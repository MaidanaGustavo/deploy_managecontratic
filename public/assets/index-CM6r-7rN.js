(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Dp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sh={exports:{}},no={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function Jk(){if(zb)return no;zb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:o}}return no.Fragment=e,no.jsx=n,no.jsxs=n,no}var Lb;function Xk(){return Lb||(Lb=1,sh.exports=Jk()),sh.exports}var b=Xk(),lh={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function Qk(){if(Bb)return de;Bb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function v(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function E(j,P,ee){this.props=j,this.context=P,this.refs=k,this.updater=ee||S}E.prototype.isReactComponent={},E.prototype.setState=function(j,P){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,P,"setState")},E.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function O(){}O.prototype=E.prototype;function B(j,P,ee){this.props=j,this.context=P,this.refs=k,this.updater=ee||S}var G=B.prototype=new O;G.constructor=B,w(G,E.prototype),G.isPureReactComponent=!0;var U=Array.isArray;function Y(){}var $={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function F(j,P,ee){var re=ee.ref;return{$$typeof:t,type:j,key:P,ref:re!==void 0?re:null,props:ee}}function J(j,P){return F(j.type,P,j.props)}function qe(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function Se(j){var P={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ee){return P[ee]})}var lt=/\/+/g;function Oe(j,P){return typeof j=="object"&&j!==null&&j.key!=null?Se(""+j.key):P.toString(36)}function De(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Y,Y):(j.status="pending",j.then(function(P){j.status==="pending"&&(j.status="fulfilled",j.value=P)},function(P){j.status==="pending"&&(j.status="rejected",j.reason=P)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function H(j,P,ee,re,fe){var ge=typeof j;(ge==="undefined"||ge==="boolean")&&(j=null);var Me=!1;if(j===null)Me=!0;else switch(ge){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(j.$$typeof){case t:case e:Me=!0;break;case p:return Me=j._init,H(Me(j._payload),P,ee,re,fe)}}if(Me)return fe=fe(j),Me=re===""?"."+Oe(j,0):re,U(fe)?(ee="",Me!=null&&(ee=Me.replace(lt,"$&/")+"/"),H(fe,P,ee,"",function(cl){return cl})):fe!=null&&(qe(fe)&&(fe=J(fe,ee+(fe.key==null||j&&j.key===fe.key?"":(""+fe.key).replace(lt,"$&/")+"/")+Me)),P.push(fe)),1;Me=0;var zt=re===""?".":re+":";if(U(j))for(var rt=0;rt<j.length;rt++)re=j[rt],ge=zt+Oe(re,rt),Me+=H(re,P,ee,ge,fe);else if(rt=v(j),typeof rt=="function")for(j=rt.call(j),rt=0;!(re=j.next()).done;)re=re.value,ge=zt+Oe(re,rt++),Me+=H(re,P,ee,ge,fe);else if(ge==="object"){if(typeof j.then=="function")return H(De(j),P,ee,re,fe);throw P=String(j),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Me}function W(j,P,ee){if(j==null)return j;var re=[],fe=0;return H(j,re,"","",function(ge){return P.call(ee,ge,fe++)}),re}function Q(j){if(j._status===-1){var P=j._result;P=P(),P.then(function(ee){(j._status===0||j._status===-1)&&(j._status=1,j._result=ee)},function(ee){(j._status===0||j._status===-1)&&(j._status=2,j._result=ee)}),j._status===-1&&(j._status=0,j._result=P)}if(j._status===1)return j._result.default;throw j._result}var we=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},_e={map:W,forEach:function(j,P,ee){W(j,function(){P.apply(this,arguments)},ee)},count:function(j){var P=0;return W(j,function(){P++}),P},toArray:function(j){return W(j,function(P){return P})||[]},only:function(j){if(!qe(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return de.Activity=g,de.Children=_e,de.Component=E,de.Fragment=n,de.Profiler=s,de.PureComponent=B,de.StrictMode=r,de.Suspense=f,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,de.__COMPILER_RUNTIME={__proto__:null,c:function(j){return $.H.useMemoCache(j)}},de.cache=function(j){return function(){return j.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(j,P,ee){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var re=w({},j.props),fe=j.key;if(P!=null)for(ge in P.key!==void 0&&(fe=""+P.key),P)!te.call(P,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&P.ref===void 0||(re[ge]=P[ge]);var ge=arguments.length-2;if(ge===1)re.children=ee;else if(1<ge){for(var Me=Array(ge),zt=0;zt<ge;zt++)Me[zt]=arguments[zt+2];re.children=Me}return F(j.type,fe,re)},de.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},de.createElement=function(j,P,ee){var re,fe={},ge=null;if(P!=null)for(re in P.key!==void 0&&(ge=""+P.key),P)te.call(P,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=P[re]);var Me=arguments.length-2;if(Me===1)fe.children=ee;else if(1<Me){for(var zt=Array(Me),rt=0;rt<Me;rt++)zt[rt]=arguments[rt+2];fe.children=zt}if(j&&j.defaultProps)for(re in Me=j.defaultProps,Me)fe[re]===void 0&&(fe[re]=Me[re]);return F(j,ge,fe)},de.createRef=function(){return{current:null}},de.forwardRef=function(j){return{$$typeof:u,render:j}},de.isValidElement=qe,de.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:Q}},de.memo=function(j,P){return{$$typeof:h,type:j,compare:P===void 0?null:P}},de.startTransition=function(j){var P=$.T,ee={};$.T=ee;try{var re=j(),fe=$.S;fe!==null&&fe(ee,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Y,we)}catch(ge){we(ge)}finally{P!==null&&ee.types!==null&&(P.types=ee.types),$.T=P}},de.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},de.use=function(j){return $.H.use(j)},de.useActionState=function(j,P,ee){return $.H.useActionState(j,P,ee)},de.useCallback=function(j,P){return $.H.useCallback(j,P)},de.useContext=function(j){return $.H.useContext(j)},de.useDebugValue=function(){},de.useDeferredValue=function(j,P){return $.H.useDeferredValue(j,P)},de.useEffect=function(j,P){return $.H.useEffect(j,P)},de.useEffectEvent=function(j){return $.H.useEffectEvent(j)},de.useId=function(){return $.H.useId()},de.useImperativeHandle=function(j,P,ee){return $.H.useImperativeHandle(j,P,ee)},de.useInsertionEffect=function(j,P){return $.H.useInsertionEffect(j,P)},de.useLayoutEffect=function(j,P){return $.H.useLayoutEffect(j,P)},de.useMemo=function(j,P){return $.H.useMemo(j,P)},de.useOptimistic=function(j,P){return $.H.useOptimistic(j,P)},de.useReducer=function(j,P,ee){return $.H.useReducer(j,P,ee)},de.useRef=function(j){return $.H.useRef(j)},de.useState=function(j){return $.H.useState(j)},de.useSyncExternalStore=function(j,P,ee){return $.H.useSyncExternalStore(j,P,ee)},de.useTransition=function(){return $.H.useTransition()},de.version="19.2.0",de}var _b;function Bo(){return _b||(_b=1,lh.exports=Qk()),lh.exports}var A=Bo();const Gi=Dp(A);var oh={exports:{}},ro={},ah={exports:{}},ch={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function Wk(){return Hb||(Hb=1,(function(t){function e(H,W){var Q=H.length;H.push(W);e:for(;0<Q;){var we=Q-1>>>1,_e=H[we];if(0<s(_e,W))H[we]=W,H[Q]=_e,Q=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var W=H[0],Q=H.pop();if(Q!==W){H[0]=Q;e:for(var we=0,_e=H.length,j=_e>>>1;we<j;){var P=2*(we+1)-1,ee=H[P],re=P+1,fe=H[re];if(0>s(ee,Q))re<_e&&0>s(fe,ee)?(H[we]=fe,H[re]=Q,we=re):(H[we]=ee,H[P]=Q,we=P);else if(re<_e&&0>s(fe,Q))H[we]=fe,H[re]=Q,we=re;else break e}}return W}function s(H,W){var Q=H.sortIndex-W.sortIndex;return Q!==0?Q:H.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,x=3,v=!1,S=!1,w=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function G(H){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=H)r(h),W.sortIndex=W.expirationTime,e(f,W);else break;W=n(h)}}function U(H){if(w=!1,G(H),!S)if(n(f)!==null)S=!0,Y||(Y=!0,Se());else{var W=n(h);W!==null&&De(U,W.startTime-H)}}var Y=!1,$=-1,te=5,F=-1;function J(){return k?!0:!(t.unstable_now()-F<te)}function qe(){if(k=!1,Y){var H=t.unstable_now();F=H;var W=!0;try{e:{S=!1,w&&(w=!1,O($),$=-1),v=!0;var Q=x;try{t:{for(G(H),g=n(f);g!==null&&!(g.expirationTime>H&&J());){var we=g.callback;if(typeof we=="function"){g.callback=null,x=g.priorityLevel;var _e=we(g.expirationTime<=H);if(H=t.unstable_now(),typeof _e=="function"){g.callback=_e,G(H),W=!0;break t}g===n(f)&&r(f),G(H)}else r(f);g=n(f)}if(g!==null)W=!0;else{var j=n(h);j!==null&&De(U,j.startTime-H),W=!1}}break e}finally{g=null,x=Q,v=!1}W=void 0}}finally{W?Se():Y=!1}}}var Se;if(typeof B=="function")Se=function(){B(qe)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,Oe=lt.port2;lt.port1.onmessage=qe,Se=function(){Oe.postMessage(null)}}else Se=function(){E(qe,0)};function De(H,W){$=E(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var Q=x;x=W;try{return H()}finally{x=Q}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=x;x=H;try{return W()}finally{x=Q}},t.unstable_scheduleCallback=function(H,W,Q){var we=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?we+Q:we):Q=we,H){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Q+_e,H={id:p++,callback:W,priorityLevel:H,startTime:Q,expirationTime:_e,sortIndex:-1},Q>we?(H.sortIndex=Q,e(h,H),n(f)===null&&H===n(h)&&(w?(O($),$=-1):w=!0,De(U,Q-we))):(H.sortIndex=_e,e(f,H),S||v||(S=!0,Y||(Y=!0,Se()))),H},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(H){var W=x;return function(){var Q=x;x=W;try{return H.apply(this,arguments)}finally{x=Q}}}})(ch)),ch}var Ub;function Zk(){return Ub||(Ub=1,ah.exports=Wk()),ah.exports}var uh={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function eN(){if(Vb)return At;Vb=1;var t=Bo();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,At.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},At.flushSync=function(f){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=p,r.d.f()}},At.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},At.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},At.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:v}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:x,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},At.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},At.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},At.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},At.requestFormReset=function(f){r.d.r(f)},At.unstable_batchedUpdates=function(f,h){return f(h)},At.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},At.useFormStatus=function(){return c.H.useHostTransitionStatus()},At.version="19.2.0",At}var $b;function H1(){if($b)return uh.exports;$b=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uh.exports=eN(),uh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function tN(){if(Ib)return ro;Ib=1;var t=Zk(),e=Bo(),n=H1();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)l+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,a=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(a=l.return),i=l.return;while(i)}return l.tag===3?a:null}function c(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function u(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(r(188))}function h(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(r(188));return l!==i?null:i}for(var a=i,d=l;;){var m=a.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){a=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===a)return f(m),i;if(y===d)return f(m),l;y=y.sibling}throw Error(r(188))}if(a.return!==d.return)a=m,d=y;else{for(var C=!1,N=m.child;N;){if(N===a){C=!0,a=m,d=y;break}if(N===d){C=!0,d=m,a=y;break}N=N.sibling}if(!C){for(N=y.child;N;){if(N===a){C=!0,a=y,d=m;break}if(N===d){C=!0,d=y,a=m;break}N=N.sibling}if(!C)throw Error(r(189))}}if(a.alternate!==d)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:l}function p(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=p(i),l!==null)return l;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),B=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator;function Se(i){return i===null||typeof i!="object"?null:(i=qe&&i[qe]||i["@@iterator"],typeof i=="function"?i:null)}var lt=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===lt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case E:return"Profiler";case k:return"StrictMode";case U:return"Suspense";case Y:return"SuspenseList";case F:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case B:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case G:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $:return l=i.displayName||null,l!==null?l:Oe(i.type)||"Memo";case te:l=i._payload,i=i._init;try{return Oe(i(l))}catch{}}return null}var De=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},we=[],_e=-1;function j(i){return{current:i}}function P(i){0>_e||(i.current=we[_e],we[_e]=null,_e--)}function ee(i,l){_e++,we[_e]=i.current,i.current=l}var re=j(null),fe=j(null),ge=j(null),Me=j(null);function zt(i,l){switch(ee(ge,l),ee(fe,i),ee(re,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?rb(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=rb(l),i=ib(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}P(re),ee(re,i)}function rt(){P(re),P(fe),P(ge)}function cl(i){i.memoizedState!==null&&ee(Me,i);var l=re.current,a=ib(l,i.type);l!==a&&(ee(fe,i),ee(re,a))}function qo(i){fe.current===i&&(P(re),P(fe)),Me.current===i&&(P(Me),Wl._currentValue=Q)}var Vu,Rm;function mi(i){if(Vu===void 0)try{throw Error()}catch(a){var l=a.stack.trim().match(/\n( *(at )?)/);Vu=l&&l[1]||"",Rm=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vu+i+Rm}var $u=!1;function Iu(i,l){if(!i||$u)return"";$u=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(_){var L=_}Reflect.construct(i,[],q)}else{try{q.call()}catch(_){L=_}i.call(q.prototype)}}else{try{throw Error()}catch(_){L=_}(q=i())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(_){if(_&&L&&typeof _.stack=="string")return[_.stack,L.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),C=y[0],N=y[1];if(C&&N){var M=C.split(`
`),z=N.split(`
`);for(m=d=0;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;for(;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;if(d===M.length||m===z.length)for(d=M.length-1,m=z.length-1;1<=d&&0<=m&&M[d]!==z[m];)m--;for(;1<=d&&0<=m;d--,m--)if(M[d]!==z[m]){if(d!==1||m!==1)do if(d--,m--,0>m||M[d]!==z[m]){var V=`
`+M[d].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=d&&0<=m);break}}}finally{$u=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?mi(a):""}function EC(i,l){switch(i.tag){case 26:case 27:case 5:return mi(i.type);case 16:return mi("Lazy");case 13:return i.child!==l&&l!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Iu(i.type,!1);case 11:return Iu(i.type.render,!1);case 1:return Iu(i.type,!0);case 31:return mi("Activity");default:return""}}function zm(i){try{var l="",a=null;do l+=EC(i,a),a=i,i=i.return;while(i);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var qu=Object.prototype.hasOwnProperty,Pu=t.unstable_scheduleCallback,Ku=t.unstable_cancelCallback,MC=t.unstable_shouldYield,TC=t.unstable_requestPaint,Ft=t.unstable_now,AC=t.unstable_getCurrentPriorityLevel,Lm=t.unstable_ImmediatePriority,Bm=t.unstable_UserBlockingPriority,Po=t.unstable_NormalPriority,jC=t.unstable_LowPriority,_m=t.unstable_IdlePriority,OC=t.log,DC=t.unstable_setDisableYieldValue,ul=null,Jt=null;function kr(i){if(typeof OC=="function"&&DC(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(ul,i)}catch{}}var Xt=Math.clz32?Math.clz32:LC,RC=Math.log,zC=Math.LN2;function LC(i){return i>>>=0,i===0?32:31-(RC(i)/zC|0)|0}var Ko=256,Go=262144,Yo=4194304;function gi(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Fo(i,l,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,y=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var N=d&134217727;return N!==0?(d=N&~y,d!==0?m=gi(d):(C&=N,C!==0?m=gi(C):a||(a=N&~i,a!==0&&(m=gi(a))))):(N=d&~y,N!==0?m=gi(N):C!==0?m=gi(C):a||(a=d&~i,a!==0&&(m=gi(a)))),m===0?0:l!==0&&l!==m&&(l&y)===0&&(y=m&-m,a=l&-l,y>=a||y===32&&(a&4194048)!==0)?l:m}function dl(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function BC(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hm(){var i=Yo;return Yo<<=1,(Yo&62914560)===0&&(Yo=4194304),i}function Gu(i){for(var l=[],a=0;31>a;a++)l.push(i);return l}function fl(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _C(i,l,a,d,m,y){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var N=i.entanglements,M=i.expirationTimes,z=i.hiddenUpdates;for(a=C&~a;0<a;){var V=31-Xt(a),q=1<<V;N[V]=0,M[V]=-1;var L=z[V];if(L!==null)for(z[V]=null,V=0;V<L.length;V++){var _=L[V];_!==null&&(_.lane&=-536870913)}a&=~q}d!==0&&Um(i,d,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(C&~l))}function Um(i,l,a){i.pendingLanes|=l,i.suspendedLanes&=~l;var d=31-Xt(l);i.entangledLanes|=l,i.entanglements[d]=i.entanglements[d]|1073741824|a&261930}function Vm(i,l){var a=i.entangledLanes|=l;for(i=i.entanglements;a;){var d=31-Xt(a),m=1<<d;m&l|i[d]&l&&(i[d]|=l),a&=~m}}function $m(i,l){var a=l&-l;return a=(a&42)!==0?1:Yu(a),(a&(i.suspendedLanes|l))!==0?0:a}function Yu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Fu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Im(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:Mb(i.type))}function qm(i,l){var a=W.p;try{return W.p=i,l()}finally{W.p=a}}var Nr=Math.random().toString(36).slice(2),St="__reactFiber$"+Nr,Ut="__reactProps$"+Nr,ts="__reactContainer$"+Nr,Ju="__reactEvents$"+Nr,HC="__reactListeners$"+Nr,UC="__reactHandles$"+Nr,Pm="__reactResources$"+Nr,hl="__reactMarker$"+Nr;function Xu(i){delete i[St],delete i[Ut],delete i[Ju],delete i[HC],delete i[UC]}function ns(i){var l=i[St];if(l)return l;for(var a=i.parentNode;a;){if(l=a[ts]||a[St]){if(a=l.alternate,l.child!==null||a!==null&&a.child!==null)for(i=db(i);i!==null;){if(a=i[St])return a;i=db(i)}return l}i=a,a=i.parentNode}return null}function rs(i){if(i=i[St]||i[ts]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function pl(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function is(i){var l=i[Pm];return l||(l=i[Pm]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function pt(i){i[hl]=!0}var Km=new Set,Gm={};function yi(i,l){ss(i,l),ss(i+"Capture",l)}function ss(i,l){for(Gm[i]=l,i=0;i<l.length;i++)Km.add(l[i])}var VC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ym={},Fm={};function $C(i){return qu.call(Fm,i)?!0:qu.call(Ym,i)?!1:VC.test(i)?Fm[i]=!0:(Ym[i]=!0,!1)}function Jo(i,l,a){if($C(l))if(a===null)i.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+a)}}function Xo(i,l,a){if(a===null)i.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+a)}}function Yn(i,l,a,d){if(d===null)i.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(l,a,""+d)}}function an(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Jm(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function IC(i,l,a){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,y=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return m.call(this)},set:function(C){a=""+C,y.call(this,C)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Qu(i){if(!i._valueTracker){var l=Jm(i)?"checked":"value";i._valueTracker=IC(i,l,""+i[l])}}function Xm(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var a=l.getValue(),d="";return i&&(d=Jm(i)?i.checked?"true":"false":i.value),i=d,i!==a?(l.setValue(i),!0):!1}function Qo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qC=/[\n"\\]/g;function cn(i){return i.replace(qC,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Wu(i,l,a,d,m,y,C,N){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),l!=null?C==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+an(l)):i.value!==""+an(l)&&(i.value=""+an(l)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),l!=null?Zu(i,C,an(l)):a!=null?Zu(i,C,an(a)):d!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.name=""+an(N):i.removeAttribute("name")}function Qm(i,l,a,d,m,y,C,N){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),l!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||l!=null)){Qu(i);return}a=a!=null?""+an(a):"",l=l!=null?""+an(l):a,N||l===i.value||(i.value=l),i.defaultValue=l}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=N?i.checked:!!d,i.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Qu(i)}function Zu(i,l,a){l==="number"&&Qo(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ls(i,l,a,d){if(i=i.options,l){l={};for(var m=0;m<a.length;m++)l["$"+a[m]]=!0;for(a=0;a<i.length;a++)m=l.hasOwnProperty("$"+i[a].value),i[a].selected!==m&&(i[a].selected=m),m&&d&&(i[a].defaultSelected=!0)}else{for(a=""+an(a),l=null,m=0;m<i.length;m++){if(i[m].value===a){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}l!==null||i[m].disabled||(l=i[m])}l!==null&&(l.selected=!0)}}function Wm(i,l,a){if(l!=null&&(l=""+an(l),l!==i.value&&(i.value=l),a==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=a!=null?""+an(a):""}function Zm(i,l,a,d){if(l==null){if(d!=null){if(a!=null)throw Error(r(92));if(De(d)){if(1<d.length)throw Error(r(93));d=d[0]}a=d}a==null&&(a=""),l=a}a=an(l),i.defaultValue=a,d=i.textContent,d===a&&d!==""&&d!==null&&(i.value=d),Qu(i)}function as(i,l){if(l){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=l;return}}i.textContent=l}var PC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eg(i,l,a){var d=l.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?d?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":d?i.setProperty(l,a):typeof a!="number"||a===0||PC.has(l)?l==="float"?i.cssFloat=a:i[l]=(""+a).trim():i[l]=a+"px"}function tg(i,l,a){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,a!=null){for(var d in a)!a.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var m in l)d=l[m],l.hasOwnProperty(m)&&a[m]!==d&&eg(i,m,d)}else for(var y in l)l.hasOwnProperty(y)&&eg(i,y,l[y])}function ed(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(i){return GC.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Fn(){}var td=null;function nd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var cs=null,us=null;function ng(i){var l=rs(i);if(l&&(i=l.stateNode)){var a=i[Ut]||null;e:switch(i=l.stateNode,l.type){case"input":if(Wu(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),l=a.name,a.type==="radio"&&l!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+cn(""+l)+'"][type="radio"]'),l=0;l<a.length;l++){var d=a[l];if(d!==i&&d.form===i.form){var m=d[Ut]||null;if(!m)throw Error(r(90));Wu(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(l=0;l<a.length;l++)d=a[l],d.form===i.form&&Xm(d)}break e;case"textarea":Wm(i,a.value,a.defaultValue);break e;case"select":l=a.value,l!=null&&ls(i,!!a.multiple,l,!1)}}}var rd=!1;function rg(i,l,a){if(rd)return i(l,a);rd=!0;try{var d=i(l);return d}finally{if(rd=!1,(cs!==null||us!==null)&&(Ua(),cs&&(l=cs,i=us,us=cs=null,ng(l),i)))for(l=0;l<i.length;l++)ng(i[l])}}function ml(i,l){var a=i.stateNode;if(a===null)return null;var d=a[Ut]||null;if(d===null)return null;a=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,l,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),id=!1;if(Jn)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){id=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{id=!1}var Er=null,sd=null,Zo=null;function ig(){if(Zo)return Zo;var i,l=sd,a=l.length,d,m="value"in Er?Er.value:Er.textContent,y=m.length;for(i=0;i<a&&l[i]===m[i];i++);var C=a-i;for(d=1;d<=C&&l[a-d]===m[y-d];d++);return Zo=m.slice(i,1<d?1-d:void 0)}function ea(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ta(){return!0}function sg(){return!1}function Vt(i){function l(a,d,m,y,C){this._reactName=a,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(a=i[N],this[N]=a?a(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ta:sg,this.isPropagationStopped=sg,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),l}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},na=Vt(bi),yl=g({},bi,{view:0,detail:0}),YC=Vt(yl),ld,od,bl,ra=g({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bl&&(bl&&i.type==="mousemove"?(ld=i.screenX-bl.screenX,od=i.screenY-bl.screenY):od=ld=0,bl=i),ld)},movementY:function(i){return"movementY"in i?i.movementY:od}}),lg=Vt(ra),FC=g({},ra,{dataTransfer:0}),JC=Vt(FC),XC=g({},yl,{relatedTarget:0}),ad=Vt(XC),QC=g({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),WC=Vt(QC),ZC=g({},bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ew=Vt(ZC),tw=g({},bi,{data:0}),og=Vt(tw),nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sw(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=iw[i])?!!l[i]:!1}function cd(){return sw}var lw=g({},yl,{key:function(i){if(i.key){var l=nw[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=ea(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rw[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(i){return i.type==="keypress"?ea(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ea(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ow=Vt(lw),aw=g({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ag=Vt(aw),cw=g({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),uw=Vt(cw),dw=g({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),fw=Vt(dw),hw=g({},ra,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),pw=Vt(hw),mw=g({},bi,{newState:0,oldState:0}),gw=Vt(mw),yw=[9,13,27,32],ud=Jn&&"CompositionEvent"in window,xl=null;Jn&&"documentMode"in document&&(xl=document.documentMode);var bw=Jn&&"TextEvent"in window&&!xl,cg=Jn&&(!ud||xl&&8<xl&&11>=xl),ug=" ",dg=!1;function fg(i,l){switch(i){case"keyup":return yw.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ds=!1;function xw(i,l){switch(i){case"compositionend":return hg(l);case"keypress":return l.which!==32?null:(dg=!0,ug);case"textInput":return i=l.data,i===ug&&dg?null:i;default:return null}}function vw(i,l){if(ds)return i==="compositionend"||!ud&&fg(i,l)?(i=ig(),Zo=sd=Er=null,ds=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return cg&&l.locale!=="ko"?null:l.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!Sw[i.type]:l==="textarea"}function mg(i,l,a,d){cs?us?us.push(d):us=[d]:cs=d,l=Ga(l,"onChange"),0<l.length&&(a=new na("onChange","change",null,a,d),i.push({event:a,listeners:l}))}var vl=null,Sl=null;function Cw(i){Qy(i,0)}function ia(i){var l=pl(i);if(Xm(l))return i}function gg(i,l){if(i==="change")return l}var yg=!1;if(Jn){var dd;if(Jn){var fd="oninput"in document;if(!fd){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),fd=typeof bg.oninput=="function"}dd=fd}else dd=!1;yg=dd&&(!document.documentMode||9<document.documentMode)}function xg(){vl&&(vl.detachEvent("onpropertychange",vg),Sl=vl=null)}function vg(i){if(i.propertyName==="value"&&ia(Sl)){var l=[];mg(l,Sl,i,nd(i)),rg(Cw,l)}}function ww(i,l,a){i==="focusin"?(xg(),vl=l,Sl=a,vl.attachEvent("onpropertychange",vg)):i==="focusout"&&xg()}function kw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ia(Sl)}function Nw(i,l){if(i==="click")return ia(l)}function Ew(i,l){if(i==="input"||i==="change")return ia(l)}function Mw(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Qt=typeof Object.is=="function"?Object.is:Mw;function Cl(i,l){if(Qt(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var a=Object.keys(i),d=Object.keys(l);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var m=a[d];if(!qu.call(l,m)||!Qt(i[m],l[m]))return!1}return!0}function Sg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Cg(i,l){var a=Sg(i);i=0;for(var d;a;){if(a.nodeType===3){if(d=i+a.textContent.length,i<=l&&d>=l)return{node:a,offset:l-i};i=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sg(a)}}function wg(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?wg(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function kg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Qo(i.document);l instanceof i.HTMLIFrameElement;){try{var a=typeof l.contentWindow.location.href=="string"}catch{a=!1}if(a)i=l.contentWindow;else break;l=Qo(i.document)}return l}function hd(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var Tw=Jn&&"documentMode"in document&&11>=document.documentMode,fs=null,pd=null,wl=null,md=!1;function Ng(i,l,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;md||fs==null||fs!==Qo(d)||(d=fs,"selectionStart"in d&&hd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),wl&&Cl(wl,d)||(wl=d,d=Ga(pd,"onSelect"),0<d.length&&(l=new na("onSelect","select",null,l,a),i.push({event:l,listeners:d}),l.target=fs)))}function xi(i,l){var a={};return a[i.toLowerCase()]=l.toLowerCase(),a["Webkit"+i]="webkit"+l,a["Moz"+i]="moz"+l,a}var hs={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionrun:xi("Transition","TransitionRun"),transitionstart:xi("Transition","TransitionStart"),transitioncancel:xi("Transition","TransitionCancel"),transitionend:xi("Transition","TransitionEnd")},gd={},Eg={};Jn&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function vi(i){if(gd[i])return gd[i];if(!hs[i])return i;var l=hs[i],a;for(a in l)if(l.hasOwnProperty(a)&&a in Eg)return gd[i]=l[a];return i}var Mg=vi("animationend"),Tg=vi("animationiteration"),Ag=vi("animationstart"),Aw=vi("transitionrun"),jw=vi("transitionstart"),Ow=vi("transitioncancel"),jg=vi("transitionend"),Og=new Map,yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yd.push("scrollEnd");function kn(i,l){Og.set(i,l),yi(l,[i])}var sa=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},un=[],ps=0,bd=0;function la(){for(var i=ps,l=bd=ps=0;l<i;){var a=un[l];un[l++]=null;var d=un[l];un[l++]=null;var m=un[l];un[l++]=null;var y=un[l];if(un[l++]=null,d!==null&&m!==null){var C=d.pending;C===null?m.next=m:(m.next=C.next,C.next=m),d.pending=m}y!==0&&Dg(a,m,y)}}function oa(i,l,a,d){un[ps++]=i,un[ps++]=l,un[ps++]=a,un[ps++]=d,bd|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function xd(i,l,a,d){return oa(i,l,a,d),aa(i)}function Si(i,l){return oa(i,null,null,l),aa(i)}function Dg(i,l,a){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a);for(var m=!1,y=i.return;y!==null;)y.childLanes|=a,d=y.alternate,d!==null&&(d.childLanes|=a),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&l!==null&&(m=31-Xt(a),i=y.hiddenUpdates,d=i[m],d===null?i[m]=[l]:d.push(l),l.lane=a|536870912),y):null}function aa(i){if(50<Kl)throw Kl=0,Af=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var ms={};function Dw(i,l,a,d){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(i,l,a,d){return new Dw(i,l,a,d)}function vd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Xn(i,l){var a=i.alternate;return a===null?(a=Wt(i.tag,l,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=l,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,l=i.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Rg(i,l){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,l=a.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function ca(i,l,a,d,m,y){var C=0;if(d=i,typeof i=="function")vd(i)&&(C=1);else if(typeof i=="string")C=_k(i,a,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case F:return i=Wt(31,a,l,m),i.elementType=F,i.lanes=y,i;case w:return Ci(a.children,m,y,l);case k:C=8,m|=24;break;case E:return i=Wt(12,a,l,m|2),i.elementType=E,i.lanes=y,i;case U:return i=Wt(13,a,l,m),i.elementType=U,i.lanes=y,i;case Y:return i=Wt(19,a,l,m),i.elementType=Y,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:C=10;break e;case O:C=9;break e;case G:C=11;break e;case $:C=14;break e;case te:C=16,d=null;break e}C=29,a=Error(r(130,i===null?"null":typeof i,"")),d=null}return l=Wt(C,a,l,m),l.elementType=i,l.type=d,l.lanes=y,l}function Ci(i,l,a,d){return i=Wt(7,i,d,l),i.lanes=a,i}function Sd(i,l,a){return i=Wt(6,i,null,l),i.lanes=a,i}function zg(i){var l=Wt(18,null,null,0);return l.stateNode=i,l}function Cd(i,l,a){return l=Wt(4,i.children!==null?i.children:[],i.key,l),l.lanes=a,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var Lg=new WeakMap;function dn(i,l){if(typeof i=="object"&&i!==null){var a=Lg.get(i);return a!==void 0?a:(l={value:i,source:l,stack:zm(l)},Lg.set(i,l),l)}return{value:i,source:l,stack:zm(l)}}var gs=[],ys=0,ua=null,kl=0,fn=[],hn=0,Mr=null,_n=1,Hn="";function Qn(i,l){gs[ys++]=kl,gs[ys++]=ua,ua=i,kl=l}function Bg(i,l,a){fn[hn++]=_n,fn[hn++]=Hn,fn[hn++]=Mr,Mr=i;var d=_n;i=Hn;var m=32-Xt(d)-1;d&=~(1<<m),a+=1;var y=32-Xt(l)+m;if(30<y){var C=m-m%5;y=(d&(1<<C)-1).toString(32),d>>=C,m-=C,_n=1<<32-Xt(l)+m|a<<m|d,Hn=y+i}else _n=1<<y|a<<m|d,Hn=i}function wd(i){i.return!==null&&(Qn(i,1),Bg(i,1,0))}function kd(i){for(;i===ua;)ua=gs[--ys],gs[ys]=null,kl=gs[--ys],gs[ys]=null;for(;i===Mr;)Mr=fn[--hn],fn[hn]=null,Hn=fn[--hn],fn[hn]=null,_n=fn[--hn],fn[hn]=null}function _g(i,l){fn[hn++]=_n,fn[hn++]=Hn,fn[hn++]=Mr,_n=l.id,Hn=l.overflow,Mr=i}var Ct=null,Pe=null,Ce=!1,Tr=null,pn=!1,Nd=Error(r(519));function Ar(i){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(dn(l,i)),Nd}function Hg(i){var l=i.stateNode,a=i.type,d=i.memoizedProps;switch(l[St]=i,l[Ut]=d,a){case"dialog":be("cancel",l),be("close",l);break;case"iframe":case"object":case"embed":be("load",l);break;case"video":case"audio":for(a=0;a<Yl.length;a++)be(Yl[a],l);break;case"source":be("error",l);break;case"img":case"image":case"link":be("error",l),be("load",l);break;case"details":be("toggle",l);break;case"input":be("invalid",l),Qm(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":be("invalid",l);break;case"textarea":be("invalid",l),Zm(l,d.value,d.defaultValue,d.children)}a=d.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||l.textContent===""+a||d.suppressHydrationWarning===!0||tb(l.textContent,a)?(d.popover!=null&&(be("beforetoggle",l),be("toggle",l)),d.onScroll!=null&&be("scroll",l),d.onScrollEnd!=null&&be("scrollend",l),d.onClick!=null&&(l.onclick=Fn),l=!0):l=!1,l||Ar(i,!0)}function Ug(i){for(Ct=i.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Ct=Ct.return}}function bs(i){if(i!==Ct)return!1;if(!Ce)return Ug(i),Ce=!0,!1;var l=i.tag,a;if((a=l!==3&&l!==27)&&((a=l===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Pf(i.type,i.memoizedProps)),a=!a),a&&Pe&&Ar(i),Ug(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Pe=ub(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Pe=ub(i)}else l===27?(l=Pe,qr(i.type)?(i=Jf,Jf=null,Pe=i):Pe=l):Pe=Ct?gn(i.stateNode.nextSibling):null;return!0}function wi(){Pe=Ct=null,Ce=!1}function Ed(){var i=Tr;return i!==null&&(Pt===null?Pt=i:Pt.push.apply(Pt,i),Tr=null),i}function Nl(i){Tr===null?Tr=[i]:Tr.push(i)}var Md=j(null),ki=null,Wn=null;function jr(i,l,a){ee(Md,l._currentValue),l._currentValue=a}function Zn(i){i._currentValue=Md.current,P(Md)}function Td(i,l,a){for(;i!==null;){var d=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),i===a)break;i=i.return}}function Ad(i,l,a,d){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var C=m.child;y=y.firstContext;e:for(;y!==null;){var N=y;y=m;for(var M=0;M<l.length;M++)if(N.context===l[M]){y.lanes|=a,N=y.alternate,N!==null&&(N.lanes|=a),Td(y.return,a,i),d||(C=null);break e}y=N.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(r(341));C.lanes|=a,y=C.alternate,y!==null&&(y.lanes|=a),Td(C,a,i),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===i){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function xs(i,l,a,d){i=null;for(var m=l,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var N=m.type;Qt(m.pendingProps.value,C.value)||(i!==null?i.push(N):i=[N])}}else if(m===Me.current){if(C=m.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Wl):i=[Wl])}m=m.return}i!==null&&Ad(l,i,a,d),l.flags|=262144}function da(i){for(i=i.firstContext;i!==null;){if(!Qt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ni(i){ki=i,Wn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wt(i){return Vg(ki,i)}function fa(i,l){return ki===null&&Ni(i),Vg(i,l)}function Vg(i,l){var a=l._currentValue;if(l={context:l,memoizedValue:a,next:null},Wn===null){if(i===null)throw Error(r(308));Wn=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Wn=Wn.next=l;return a}var Rw=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(a,d){i.push(d)}};this.abort=function(){l.aborted=!0,i.forEach(function(a){return a()})}},zw=t.unstable_scheduleCallback,Lw=t.unstable_NormalPriority,ot={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jd(){return{controller:new Rw,data:new Map,refCount:0}}function El(i){i.refCount--,i.refCount===0&&zw(Lw,function(){i.controller.abort()})}var Ml=null,Od=0,vs=0,Ss=null;function Bw(i,l){if(Ml===null){var a=Ml=[];Od=0,vs=Lf(),Ss={status:"pending",value:void 0,then:function(d){a.push(d)}}}return Od++,l.then($g,$g),l}function $g(){if(--Od===0&&Ml!==null){Ss!==null&&(Ss.status="fulfilled");var i=Ml;Ml=null,vs=0,Ss=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function _w(i,l){var a=[],d={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return i.then(function(){d.status="fulfilled",d.value=l;for(var m=0;m<a.length;m++)(0,a[m])(l)},function(m){for(d.status="rejected",d.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),d}var Ig=H.S;H.S=function(i,l){Ny=Ft(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Bw(i,l),Ig!==null&&Ig(i,l)};var Ei=j(null);function Dd(){var i=Ei.current;return i!==null?i:He.pooledCache}function ha(i,l){l===null?ee(Ei,Ei.current):ee(Ei,l.pool)}function qg(){var i=Dd();return i===null?null:{parent:ot._currentValue,pool:i}}var Cs=Error(r(460)),Rd=Error(r(474)),pa=Error(r(542)),ma={then:function(){}};function Pg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Kg(i,l,a){switch(a=i[a],a===void 0?i.push(l):a!==l&&(l.then(Fn,Fn),l=a),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Yg(i),i;default:if(typeof l.status=="string")l.then(Fn,Fn);else{if(i=He,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(d){if(l.status==="pending"){var m=l;m.status="fulfilled",m.value=d}},function(d){if(l.status==="pending"){var m=l;m.status="rejected",m.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Yg(i),i}throw Ti=l,Cs}}function Mi(i){try{var l=i._init;return l(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ti=a,Cs):a}}var Ti=null;function Gg(){if(Ti===null)throw Error(r(459));var i=Ti;return Ti=null,i}function Yg(i){if(i===Cs||i===pa)throw Error(r(483))}var ws=null,Tl=0;function ga(i){var l=Tl;return Tl+=1,ws===null&&(ws=[]),Kg(ws,i,l)}function Al(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function ya(i,l){throw l.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function Fg(i){function l(D,T){if(i){var R=D.deletions;R===null?(D.deletions=[T],D.flags|=16):R.push(T)}}function a(D,T){if(!i)return null;for(;T!==null;)l(D,T),T=T.sibling;return null}function d(D){for(var T=new Map;D!==null;)D.key!==null?T.set(D.key,D):T.set(D.index,D),D=D.sibling;return T}function m(D,T){return D=Xn(D,T),D.index=0,D.sibling=null,D}function y(D,T,R){return D.index=R,i?(R=D.alternate,R!==null?(R=R.index,R<T?(D.flags|=67108866,T):R):(D.flags|=67108866,T)):(D.flags|=1048576,T)}function C(D){return i&&D.alternate===null&&(D.flags|=67108866),D}function N(D,T,R,I){return T===null||T.tag!==6?(T=Sd(R,D.mode,I),T.return=D,T):(T=m(T,R),T.return=D,T)}function M(D,T,R,I){var oe=R.type;return oe===w?V(D,T,R.props.children,I,R.key):T!==null&&(T.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&Mi(oe)===T.type)?(T=m(T,R.props),Al(T,R),T.return=D,T):(T=ca(R.type,R.key,R.props,null,D.mode,I),Al(T,R),T.return=D,T)}function z(D,T,R,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=Cd(R,D.mode,I),T.return=D,T):(T=m(T,R.children||[]),T.return=D,T)}function V(D,T,R,I,oe){return T===null||T.tag!==7?(T=Ci(R,D.mode,I,oe),T.return=D,T):(T=m(T,R),T.return=D,T)}function q(D,T,R){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Sd(""+T,D.mode,R),T.return=D,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case v:return R=ca(T.type,T.key,T.props,null,D.mode,R),Al(R,T),R.return=D,R;case S:return T=Cd(T,D.mode,R),T.return=D,T;case te:return T=Mi(T),q(D,T,R)}if(De(T)||Se(T))return T=Ci(T,D.mode,R,null),T.return=D,T;if(typeof T.then=="function")return q(D,ga(T),R);if(T.$$typeof===B)return q(D,fa(D,T),R);ya(D,T)}return null}function L(D,T,R,I){var oe=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return oe!==null?null:N(D,T,""+R,I);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case v:return R.key===oe?M(D,T,R,I):null;case S:return R.key===oe?z(D,T,R,I):null;case te:return R=Mi(R),L(D,T,R,I)}if(De(R)||Se(R))return oe!==null?null:V(D,T,R,I,null);if(typeof R.then=="function")return L(D,T,ga(R),I);if(R.$$typeof===B)return L(D,T,fa(D,R),I);ya(D,R)}return null}function _(D,T,R,I,oe){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return D=D.get(R)||null,N(T,D,""+I,oe);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return D=D.get(I.key===null?R:I.key)||null,M(T,D,I,oe);case S:return D=D.get(I.key===null?R:I.key)||null,z(T,D,I,oe);case te:return I=Mi(I),_(D,T,R,I,oe)}if(De(I)||Se(I))return D=D.get(R)||null,V(T,D,I,oe,null);if(typeof I.then=="function")return _(D,T,R,ga(I),oe);if(I.$$typeof===B)return _(D,T,R,fa(T,I),oe);ya(T,I)}return null}function ne(D,T,R,I){for(var oe=null,ke=null,ie=T,pe=T=0,ve=null;ie!==null&&pe<R.length;pe++){ie.index>pe?(ve=ie,ie=null):ve=ie.sibling;var Ne=L(D,ie,R[pe],I);if(Ne===null){ie===null&&(ie=ve);break}i&&ie&&Ne.alternate===null&&l(D,ie),T=y(Ne,T,pe),ke===null?oe=Ne:ke.sibling=Ne,ke=Ne,ie=ve}if(pe===R.length)return a(D,ie),Ce&&Qn(D,pe),oe;if(ie===null){for(;pe<R.length;pe++)ie=q(D,R[pe],I),ie!==null&&(T=y(ie,T,pe),ke===null?oe=ie:ke.sibling=ie,ke=ie);return Ce&&Qn(D,pe),oe}for(ie=d(ie);pe<R.length;pe++)ve=_(ie,D,pe,R[pe],I),ve!==null&&(i&&ve.alternate!==null&&ie.delete(ve.key===null?pe:ve.key),T=y(ve,T,pe),ke===null?oe=ve:ke.sibling=ve,ke=ve);return i&&ie.forEach(function(Fr){return l(D,Fr)}),Ce&&Qn(D,pe),oe}function ce(D,T,R,I){if(R==null)throw Error(r(151));for(var oe=null,ke=null,ie=T,pe=T=0,ve=null,Ne=R.next();ie!==null&&!Ne.done;pe++,Ne=R.next()){ie.index>pe?(ve=ie,ie=null):ve=ie.sibling;var Fr=L(D,ie,Ne.value,I);if(Fr===null){ie===null&&(ie=ve);break}i&&ie&&Fr.alternate===null&&l(D,ie),T=y(Fr,T,pe),ke===null?oe=Fr:ke.sibling=Fr,ke=Fr,ie=ve}if(Ne.done)return a(D,ie),Ce&&Qn(D,pe),oe;if(ie===null){for(;!Ne.done;pe++,Ne=R.next())Ne=q(D,Ne.value,I),Ne!==null&&(T=y(Ne,T,pe),ke===null?oe=Ne:ke.sibling=Ne,ke=Ne);return Ce&&Qn(D,pe),oe}for(ie=d(ie);!Ne.done;pe++,Ne=R.next())Ne=_(ie,D,pe,Ne.value,I),Ne!==null&&(i&&Ne.alternate!==null&&ie.delete(Ne.key===null?pe:Ne.key),T=y(Ne,T,pe),ke===null?oe=Ne:ke.sibling=Ne,ke=Ne);return i&&ie.forEach(function(Fk){return l(D,Fk)}),Ce&&Qn(D,pe),oe}function Le(D,T,R,I){if(typeof R=="object"&&R!==null&&R.type===w&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case v:e:{for(var oe=R.key;T!==null;){if(T.key===oe){if(oe=R.type,oe===w){if(T.tag===7){a(D,T.sibling),I=m(T,R.props.children),I.return=D,D=I;break e}}else if(T.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&Mi(oe)===T.type){a(D,T.sibling),I=m(T,R.props),Al(I,R),I.return=D,D=I;break e}a(D,T);break}else l(D,T);T=T.sibling}R.type===w?(I=Ci(R.props.children,D.mode,I,R.key),I.return=D,D=I):(I=ca(R.type,R.key,R.props,null,D.mode,I),Al(I,R),I.return=D,D=I)}return C(D);case S:e:{for(oe=R.key;T!==null;){if(T.key===oe)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){a(D,T.sibling),I=m(T,R.children||[]),I.return=D,D=I;break e}else{a(D,T);break}else l(D,T);T=T.sibling}I=Cd(R,D.mode,I),I.return=D,D=I}return C(D);case te:return R=Mi(R),Le(D,T,R,I)}if(De(R))return ne(D,T,R,I);if(Se(R)){if(oe=Se(R),typeof oe!="function")throw Error(r(150));return R=oe.call(R),ce(D,T,R,I)}if(typeof R.then=="function")return Le(D,T,ga(R),I);if(R.$$typeof===B)return Le(D,T,fa(D,R),I);ya(D,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,T!==null&&T.tag===6?(a(D,T.sibling),I=m(T,R),I.return=D,D=I):(a(D,T),I=Sd(R,D.mode,I),I.return=D,D=I),C(D)):a(D,T)}return function(D,T,R,I){try{Tl=0;var oe=Le(D,T,R,I);return ws=null,oe}catch(ie){if(ie===Cs||ie===pa)throw ie;var ke=Wt(29,ie,null,D.mode);return ke.lanes=I,ke.return=D,ke}finally{}}}var Ai=Fg(!0),Jg=Fg(!1),Or=!1;function zd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ld(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Dr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Rr(i,l,a){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ee&2)!==0){var m=d.pending;return m===null?l.next=l:(l.next=m.next,m.next=l),d.pending=l,l=aa(i),Dg(i,null,a),l}return oa(i,d,l,a),aa(i)}function jl(i,l,a){if(l=l.updateQueue,l!==null&&(l=l.shared,(a&4194048)!==0)){var d=l.lanes;d&=i.pendingLanes,a|=d,l.lanes=a,Vm(i,a)}}function Bd(i,l){var a=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var m=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?m=y=C:y=y.next=C,a=a.next}while(a!==null);y===null?m=y=l:y=y.next=l}else m=y=l;a={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=l:i.next=l,a.lastBaseUpdate=l}var _d=!1;function Ol(){if(_d){var i=Ss;if(i!==null)throw i}}function Dl(i,l,a,d){_d=!1;var m=i.updateQueue;Or=!1;var y=m.firstBaseUpdate,C=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var M=N,z=M.next;M.next=null,C===null?y=z:C.next=z,C=M;var V=i.alternate;V!==null&&(V=V.updateQueue,N=V.lastBaseUpdate,N!==C&&(N===null?V.firstBaseUpdate=z:N.next=z,V.lastBaseUpdate=M))}if(y!==null){var q=m.baseState;C=0,V=z=M=null,N=y;do{var L=N.lane&-536870913,_=L!==N.lane;if(_?(xe&L)===L:(d&L)===L){L!==0&&L===vs&&(_d=!0),V!==null&&(V=V.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ne=i,ce=N;L=l;var Le=a;switch(ce.tag){case 1:if(ne=ce.payload,typeof ne=="function"){q=ne.call(Le,q,L);break e}q=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ce.payload,L=typeof ne=="function"?ne.call(Le,q,L):ne,L==null)break e;q=g({},q,L);break e;case 2:Or=!0}}L=N.callback,L!==null&&(i.flags|=64,_&&(i.flags|=8192),_=m.callbacks,_===null?m.callbacks=[L]:_.push(L))}else _={lane:L,tag:N.tag,payload:N.payload,callback:N.callback,next:null},V===null?(z=V=_,M=q):V=V.next=_,C|=L;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;_=N,N=_.next,_.next=null,m.lastBaseUpdate=_,m.shared.pending=null}}while(!0);V===null&&(M=q),m.baseState=M,m.firstBaseUpdate=z,m.lastBaseUpdate=V,y===null&&(m.shared.lanes=0),Hr|=C,i.lanes=C,i.memoizedState=q}}function Xg(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function Qg(i,l){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Xg(a[i],l)}var ks=j(null),ba=j(0);function Wg(i,l){i=ar,ee(ba,i),ee(ks,l),ar=i|l.baseLanes}function Hd(){ee(ba,ar),ee(ks,ks.current)}function Ud(){ar=ba.current,P(ks),P(ba)}var Zt=j(null),mn=null;function zr(i){var l=i.alternate;ee(it,it.current&1),ee(Zt,i),mn===null&&(l===null||ks.current!==null||l.memoizedState!==null)&&(mn=i)}function Vd(i){ee(it,it.current),ee(Zt,i),mn===null&&(mn=i)}function Zg(i){i.tag===22?(ee(it,it.current),ee(Zt,i),mn===null&&(mn=i)):Lr()}function Lr(){ee(it,it.current),ee(Zt,Zt.current)}function en(i){P(Zt),mn===i&&(mn=null),P(it)}var it=j(0);function xa(i){for(var l=i;l!==null;){if(l.tag===13){var a=l.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yf(a)||Ff(a)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var er=0,he=null,Re=null,at=null,va=!1,Ns=!1,ji=!1,Sa=0,Rl=0,Es=null,Hw=0;function Xe(){throw Error(r(321))}function $d(i,l){if(l===null)return!1;for(var a=0;a<l.length&&a<i.length;a++)if(!Qt(i[a],l[a]))return!1;return!0}function Id(i,l,a,d,m,y){return er=y,he=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=i===null||i.memoizedState===null?B0:rf,ji=!1,y=a(d,m),ji=!1,Ns&&(y=t0(l,a,d,m)),e0(i),y}function e0(i){H.H=Bl;var l=Re!==null&&Re.next!==null;if(er=0,at=Re=he=null,va=!1,Rl=0,Es=null,l)throw Error(r(300));i===null||ct||(i=i.dependencies,i!==null&&da(i)&&(ct=!0))}function t0(i,l,a,d){he=i;var m=0;do{if(Ns&&(Es=null),Rl=0,Ns=!1,25<=m)throw Error(r(301));if(m+=1,at=Re=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=_0,y=l(a,d)}while(Ns);return y}function Uw(){var i=H.H,l=i.useState()[0];return l=typeof l.then=="function"?zl(l):l,i=i.useState()[0],(Re!==null?Re.memoizedState:null)!==i&&(he.flags|=1024),l}function qd(){var i=Sa!==0;return Sa=0,i}function Pd(i,l,a){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~a}function Kd(i){if(va){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}va=!1}er=0,at=Re=he=null,Ns=!1,Rl=Sa=0,Es=null}function Lt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?he.memoizedState=at=i:at=at.next=i,at}function st(){if(Re===null){var i=he.alternate;i=i!==null?i.memoizedState:null}else i=Re.next;var l=at===null?he.memoizedState:at.next;if(l!==null)at=l,Re=i;else{if(i===null)throw he.alternate===null?Error(r(467)):Error(r(310));Re=i,i={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},at===null?he.memoizedState=at=i:at=at.next=i}return at}function Ca(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(i){var l=Rl;return Rl+=1,Es===null&&(Es=[]),i=Kg(Es,i,l),l=he,(at===null?l.memoizedState:at.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?B0:rf),i}function wa(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return zl(i);if(i.$$typeof===B)return wt(i)}throw Error(r(438,String(i)))}function Gd(i){var l=null,a=he.updateQueue;if(a!==null&&(l=a.memoCache),l==null){var d=he.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(m){return m.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),a===null&&(a=Ca(),he.updateQueue=a),a.memoCache=l,a=l.data[l.index],a===void 0)for(a=l.data[l.index]=Array(i),d=0;d<i;d++)a[d]=J;return l.index++,a}function tr(i,l){return typeof l=="function"?l(i):l}function ka(i){var l=st();return Yd(l,Re,i)}function Yd(i,l,a){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var m=i.baseQueue,y=d.pending;if(y!==null){if(m!==null){var C=m.next;m.next=y.next,y.next=C}l.baseQueue=m=y,d.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{l=m.next;var N=C=null,M=null,z=l,V=!1;do{var q=z.lane&-536870913;if(q!==z.lane?(xe&q)===q:(er&q)===q){var L=z.revertLane;if(L===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),q===vs&&(V=!0);else if((er&L)===L){z=z.next,L===vs&&(V=!0);continue}else q={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(N=M=q,C=y):M=M.next=q,he.lanes|=L,Hr|=L;q=z.action,ji&&a(y,q),y=z.hasEagerState?z.eagerState:a(y,q)}else L={lane:q,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(N=M=L,C=y):M=M.next=L,he.lanes|=q,Hr|=q;z=z.next}while(z!==null&&z!==l);if(M===null?C=y:M.next=N,!Qt(y,i.memoizedState)&&(ct=!0,V&&(a=Ss,a!==null)))throw a;i.memoizedState=y,i.baseState=C,i.baseQueue=M,d.lastRenderedState=y}return m===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Fd(i){var l=st(),a=l.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var d=a.dispatch,m=a.pending,y=l.memoizedState;if(m!==null){a.pending=null;var C=m=m.next;do y=i(y,C.action),C=C.next;while(C!==m);Qt(y,l.memoizedState)||(ct=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),a.lastRenderedState=y}return[y,d]}function n0(i,l,a){var d=he,m=st(),y=Ce;if(y){if(a===void 0)throw Error(r(407));a=a()}else a=l();var C=!Qt((Re||m).memoizedState,a);if(C&&(m.memoizedState=a,ct=!0),m=m.queue,Qd(s0.bind(null,d,m,i),[i]),m.getSnapshot!==l||C||at!==null&&at.memoizedState.tag&1){if(d.flags|=2048,Ms(9,{destroy:void 0},i0.bind(null,d,m,a,l),null),He===null)throw Error(r(349));y||(er&127)!==0||r0(d,l,a)}return a}function r0(i,l,a){i.flags|=16384,i={getSnapshot:l,value:a},l=he.updateQueue,l===null?(l=Ca(),he.updateQueue=l,l.stores=[i]):(a=l.stores,a===null?l.stores=[i]:a.push(i))}function i0(i,l,a,d){l.value=a,l.getSnapshot=d,l0(l)&&o0(i)}function s0(i,l,a){return a(function(){l0(l)&&o0(i)})}function l0(i){var l=i.getSnapshot;i=i.value;try{var a=l();return!Qt(i,a)}catch{return!0}}function o0(i){var l=Si(i,2);l!==null&&Kt(l,i,2)}function Jd(i){var l=Lt();if(typeof i=="function"){var a=i;if(i=a(),ji){kr(!0);try{a()}finally{kr(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:i},l}function a0(i,l,a,d){return i.baseState=a,Yd(i,Re,typeof d=="function"?d:tr)}function Vw(i,l,a,d,m){if(Ma(i))throw Error(r(485));if(i=l.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};H.T!==null?a(!0):y.isTransition=!1,d(y),a=l.pending,a===null?(y.next=l.pending=y,c0(l,y)):(y.next=a.next,l.pending=a.next=y)}}function c0(i,l){var a=l.action,d=l.payload,m=i.state;if(l.isTransition){var y=H.T,C={};H.T=C;try{var N=a(m,d),M=H.S;M!==null&&M(C,N),u0(i,l,N)}catch(z){Xd(i,l,z)}finally{y!==null&&C.types!==null&&(y.types=C.types),H.T=y}}else try{y=a(m,d),u0(i,l,y)}catch(z){Xd(i,l,z)}}function u0(i,l,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(d){d0(i,l,d)},function(d){return Xd(i,l,d)}):d0(i,l,a)}function d0(i,l,a){l.status="fulfilled",l.value=a,f0(l),i.state=a,l=i.pending,l!==null&&(a=l.next,a===l?i.pending=null:(a=a.next,l.next=a,c0(i,a)))}function Xd(i,l,a){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=a,f0(l),l=l.next;while(l!==d)}i.action=null}function f0(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function h0(i,l){return l}function p0(i,l){if(Ce){var a=He.formState;if(a!==null){e:{var d=he;if(Ce){if(Pe){t:{for(var m=Pe,y=pn;m.nodeType!==8;){if(!y){m=null;break t}if(m=gn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Pe=gn(m.nextSibling),d=m.data==="F!";break e}}Ar(d)}d=!1}d&&(l=a[0])}}return a=Lt(),a.memoizedState=a.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h0,lastRenderedState:l},a.queue=d,a=R0.bind(null,he,d),d.dispatch=a,d=Jd(!1),y=nf.bind(null,he,!1,d.queue),d=Lt(),m={state:l,dispatch:null,action:i,pending:null},d.queue=m,a=Vw.bind(null,he,m,y,a),m.dispatch=a,d.memoizedState=i,[l,a,!1]}function m0(i){var l=st();return g0(l,Re,i)}function g0(i,l,a){if(l=Yd(i,l,h0)[0],i=ka(tr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=zl(l)}catch(C){throw C===Cs?pa:C}else d=l;l=st();var m=l.queue,y=m.dispatch;return a!==l.memoizedState&&(he.flags|=2048,Ms(9,{destroy:void 0},$w.bind(null,m,a),null)),[d,y,i]}function $w(i,l){i.action=l}function y0(i){var l=st(),a=Re;if(a!==null)return g0(l,a,i);st(),l=l.memoizedState,a=st();var d=a.queue.dispatch;return a.memoizedState=i,[l,d,!1]}function Ms(i,l,a,d){return i={tag:i,create:a,deps:d,inst:l,next:null},l=he.updateQueue,l===null&&(l=Ca(),he.updateQueue=l),a=l.lastEffect,a===null?l.lastEffect=i.next=i:(d=a.next,a.next=i,i.next=d,l.lastEffect=i),i}function b0(){return st().memoizedState}function Na(i,l,a,d){var m=Lt();he.flags|=i,m.memoizedState=Ms(1|l,{destroy:void 0},a,d===void 0?null:d)}function Ea(i,l,a,d){var m=st();d=d===void 0?null:d;var y=m.memoizedState.inst;Re!==null&&d!==null&&$d(d,Re.memoizedState.deps)?m.memoizedState=Ms(l,y,a,d):(he.flags|=i,m.memoizedState=Ms(1|l,y,a,d))}function x0(i,l){Na(8390656,8,i,l)}function Qd(i,l){Ea(2048,8,i,l)}function Iw(i){he.flags|=4;var l=he.updateQueue;if(l===null)l=Ca(),he.updateQueue=l,l.events=[i];else{var a=l.events;a===null?l.events=[i]:a.push(i)}}function v0(i){var l=st().memoizedState;return Iw({ref:l,nextImpl:i}),function(){if((Ee&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function S0(i,l){return Ea(4,2,i,l)}function C0(i,l){return Ea(4,4,i,l)}function w0(i,l){if(typeof l=="function"){i=i();var a=l(i);return function(){typeof a=="function"?a():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function k0(i,l,a){a=a!=null?a.concat([i]):null,Ea(4,4,w0.bind(null,l,i),a)}function Wd(){}function N0(i,l){var a=st();l=l===void 0?null:l;var d=a.memoizedState;return l!==null&&$d(l,d[1])?d[0]:(a.memoizedState=[i,l],i)}function E0(i,l){var a=st();l=l===void 0?null:l;var d=a.memoizedState;if(l!==null&&$d(l,d[1]))return d[0];if(d=i(),ji){kr(!0);try{i()}finally{kr(!1)}}return a.memoizedState=[d,l],d}function Zd(i,l,a){return a===void 0||(er&1073741824)!==0&&(xe&261930)===0?i.memoizedState=l:(i.memoizedState=a,i=My(),he.lanes|=i,Hr|=i,a)}function M0(i,l,a,d){return Qt(a,l)?a:ks.current!==null?(i=Zd(i,a,d),Qt(i,l)||(ct=!0),i):(er&42)===0||(er&1073741824)!==0&&(xe&261930)===0?(ct=!0,i.memoizedState=a):(i=My(),he.lanes|=i,Hr|=i,l)}function T0(i,l,a,d,m){var y=W.p;W.p=y!==0&&8>y?y:8;var C=H.T,N={};H.T=N,nf(i,!1,l,a);try{var M=m(),z=H.S;if(z!==null&&z(N,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var V=_w(M,d);Ll(i,l,V,rn(i))}else Ll(i,l,d,rn(i))}catch(q){Ll(i,l,{then:function(){},status:"rejected",reason:q},rn())}finally{W.p=y,C!==null&&N.types!==null&&(C.types=N.types),H.T=C}}function qw(){}function ef(i,l,a,d){if(i.tag!==5)throw Error(r(476));var m=A0(i).queue;T0(i,m,l,Q,a===null?qw:function(){return j0(i),a(d)})}function A0(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:Q},next:null};var a={};return l.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:a},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function j0(i){var l=A0(i);l.next===null&&(l=i.alternate.memoizedState),Ll(i,l.next.queue,{},rn())}function tf(){return wt(Wl)}function O0(){return st().memoizedState}function D0(){return st().memoizedState}function Pw(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var a=rn();i=Dr(a);var d=Rr(l,i,a);d!==null&&(Kt(d,l,a),jl(d,l,a)),l={cache:jd()},i.payload=l;return}l=l.return}}function Kw(i,l,a){var d=rn();a={lane:d,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ma(i)?z0(l,a):(a=xd(i,l,a,d),a!==null&&(Kt(a,i,d),L0(a,l,d)))}function R0(i,l,a){var d=rn();Ll(i,l,a,d)}function Ll(i,l,a,d){var m={lane:d,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ma(i))z0(l,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var C=l.lastRenderedState,N=y(C,a);if(m.hasEagerState=!0,m.eagerState=N,Qt(N,C))return oa(i,l,m,0),He===null&&la(),!1}catch{}finally{}if(a=xd(i,l,m,d),a!==null)return Kt(a,i,d),L0(a,l,d),!0}return!1}function nf(i,l,a,d){if(d={lane:2,revertLane:Lf(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ma(i)){if(l)throw Error(r(479))}else l=xd(i,a,d,2),l!==null&&Kt(l,i,2)}function Ma(i){var l=i.alternate;return i===he||l!==null&&l===he}function z0(i,l){Ns=va=!0;var a=i.pending;a===null?l.next=l:(l.next=a.next,a.next=l),i.pending=l}function L0(i,l,a){if((a&4194048)!==0){var d=l.lanes;d&=i.pendingLanes,a|=d,l.lanes=a,Vm(i,a)}}var Bl={readContext:wt,use:wa,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Bl.useEffectEvent=Xe;var B0={readContext:wt,use:wa,useCallback:function(i,l){return Lt().memoizedState=[i,l===void 0?null:l],i},useContext:wt,useEffect:x0,useImperativeHandle:function(i,l,a){a=a!=null?a.concat([i]):null,Na(4194308,4,w0.bind(null,l,i),a)},useLayoutEffect:function(i,l){return Na(4194308,4,i,l)},useInsertionEffect:function(i,l){Na(4,2,i,l)},useMemo:function(i,l){var a=Lt();l=l===void 0?null:l;var d=i();if(ji){kr(!0);try{i()}finally{kr(!1)}}return a.memoizedState=[d,l],d},useReducer:function(i,l,a){var d=Lt();if(a!==void 0){var m=a(l);if(ji){kr(!0);try{a(l)}finally{kr(!1)}}}else m=l;return d.memoizedState=d.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},d.queue=i,i=i.dispatch=Kw.bind(null,he,i),[d.memoizedState,i]},useRef:function(i){var l=Lt();return i={current:i},l.memoizedState=i},useState:function(i){i=Jd(i);var l=i.queue,a=R0.bind(null,he,l);return l.dispatch=a,[i.memoizedState,a]},useDebugValue:Wd,useDeferredValue:function(i,l){var a=Lt();return Zd(a,i,l)},useTransition:function(){var i=Jd(!1);return i=T0.bind(null,he,i.queue,!0,!1),Lt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,a){var d=he,m=Lt();if(Ce){if(a===void 0)throw Error(r(407));a=a()}else{if(a=l(),He===null)throw Error(r(349));(xe&127)!==0||r0(d,l,a)}m.memoizedState=a;var y={value:a,getSnapshot:l};return m.queue=y,x0(s0.bind(null,d,y,i),[i]),d.flags|=2048,Ms(9,{destroy:void 0},i0.bind(null,d,y,a,l),null),a},useId:function(){var i=Lt(),l=He.identifierPrefix;if(Ce){var a=Hn,d=_n;a=(d&~(1<<32-Xt(d)-1)).toString(32)+a,l="_"+l+"R_"+a,a=Sa++,0<a&&(l+="H"+a.toString(32)),l+="_"}else a=Hw++,l="_"+l+"r_"+a.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:tf,useFormState:p0,useActionState:p0,useOptimistic:function(i){var l=Lt();l.memoizedState=l.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=a,l=nf.bind(null,he,!0,a),a.dispatch=l,[i,l]},useMemoCache:Gd,useCacheRefresh:function(){return Lt().memoizedState=Pw.bind(null,he)},useEffectEvent:function(i){var l=Lt(),a={impl:i};return l.memoizedState=a,function(){if((Ee&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},rf={readContext:wt,use:wa,useCallback:N0,useContext:wt,useEffect:Qd,useImperativeHandle:k0,useInsertionEffect:S0,useLayoutEffect:C0,useMemo:E0,useReducer:ka,useRef:b0,useState:function(){return ka(tr)},useDebugValue:Wd,useDeferredValue:function(i,l){var a=st();return M0(a,Re.memoizedState,i,l)},useTransition:function(){var i=ka(tr)[0],l=st().memoizedState;return[typeof i=="boolean"?i:zl(i),l]},useSyncExternalStore:n0,useId:O0,useHostTransitionStatus:tf,useFormState:m0,useActionState:m0,useOptimistic:function(i,l){var a=st();return a0(a,Re,i,l)},useMemoCache:Gd,useCacheRefresh:D0};rf.useEffectEvent=v0;var _0={readContext:wt,use:wa,useCallback:N0,useContext:wt,useEffect:Qd,useImperativeHandle:k0,useInsertionEffect:S0,useLayoutEffect:C0,useMemo:E0,useReducer:Fd,useRef:b0,useState:function(){return Fd(tr)},useDebugValue:Wd,useDeferredValue:function(i,l){var a=st();return Re===null?Zd(a,i,l):M0(a,Re.memoizedState,i,l)},useTransition:function(){var i=Fd(tr)[0],l=st().memoizedState;return[typeof i=="boolean"?i:zl(i),l]},useSyncExternalStore:n0,useId:O0,useHostTransitionStatus:tf,useFormState:y0,useActionState:y0,useOptimistic:function(i,l){var a=st();return Re!==null?a0(a,Re,i,l):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Gd,useCacheRefresh:D0};_0.useEffectEvent=v0;function sf(i,l,a,d){l=i.memoizedState,a=a(d,l),a=a==null?l:g({},l,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var lf={enqueueSetState:function(i,l,a){i=i._reactInternals;var d=rn(),m=Dr(d);m.payload=l,a!=null&&(m.callback=a),l=Rr(i,m,d),l!==null&&(Kt(l,i,d),jl(l,i,d))},enqueueReplaceState:function(i,l,a){i=i._reactInternals;var d=rn(),m=Dr(d);m.tag=1,m.payload=l,a!=null&&(m.callback=a),l=Rr(i,m,d),l!==null&&(Kt(l,i,d),jl(l,i,d))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var a=rn(),d=Dr(a);d.tag=2,l!=null&&(d.callback=l),l=Rr(i,d,a),l!==null&&(Kt(l,i,a),jl(l,i,a))}};function H0(i,l,a,d,m,y,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,C):l.prototype&&l.prototype.isPureReactComponent?!Cl(a,d)||!Cl(m,y):!0}function U0(i,l,a,d){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(a,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(a,d),l.state!==i&&lf.enqueueReplaceState(l,l.state,null)}function Oi(i,l){var a=l;if("ref"in l){a={};for(var d in l)d!=="ref"&&(a[d]=l[d])}if(i=i.defaultProps){a===l&&(a=g({},a));for(var m in i)a[m]===void 0&&(a[m]=i[m])}return a}function V0(i){sa(i)}function $0(i){console.error(i)}function I0(i){sa(i)}function Ta(i,l){try{var a=i.onUncaughtError;a(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function q0(i,l,a){try{var d=i.onCaughtError;d(a.value,{componentStack:a.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function of(i,l,a){return a=Dr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ta(i,l)},a}function P0(i){return i=Dr(i),i.tag=3,i}function K0(i,l,a,d){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var y=d.value;i.payload=function(){return m(y)},i.callback=function(){q0(l,a,d)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){q0(l,a,d),typeof m!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function Gw(i,l,a,d,m){if(a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=a.alternate,l!==null&&xs(l,a,m,!0),a=Zt.current,a!==null){switch(a.tag){case 31:case 13:return mn===null?Va():a.alternate===null&&Qe===0&&(Qe=3),a.flags&=-257,a.flags|=65536,a.lanes=m,d===ma?a.flags|=16384:(l=a.updateQueue,l===null?a.updateQueue=new Set([d]):l.add(d),Df(i,d,m)),!1;case 22:return a.flags|=65536,d===ma?a.flags|=16384:(l=a.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},a.updateQueue=l):(a=l.retryQueue,a===null?l.retryQueue=new Set([d]):a.add(d)),Df(i,d,m)),!1}throw Error(r(435,a.tag))}return Df(i,d,m),Va(),!1}if(Ce)return l=Zt.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=m,d!==Nd&&(i=Error(r(422),{cause:d}),Nl(dn(i,a)))):(d!==Nd&&(l=Error(r(423),{cause:d}),Nl(dn(l,a))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,d=dn(d,a),m=of(i.stateNode,d,m),Bd(i,m),Qe!==4&&(Qe=2)),!1;var y=Error(r(520),{cause:d});if(y=dn(y,a),Pl===null?Pl=[y]:Pl.push(y),Qe!==4&&(Qe=2),l===null)return!0;d=dn(d,a),a=l;do{switch(a.tag){case 3:return a.flags|=65536,i=m&-m,a.lanes|=i,i=of(a.stateNode,d,i),Bd(a,i),!1;case 1:if(l=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ur===null||!Ur.has(y))))return a.flags|=65536,m&=-m,a.lanes|=m,m=P0(m),K0(m,i,a,d),Bd(a,m),!1}a=a.return}while(a!==null);return!1}var af=Error(r(461)),ct=!1;function kt(i,l,a,d){l.child=i===null?Jg(l,null,a,d):Ai(l,i.child,a,d)}function G0(i,l,a,d,m){a=a.render;var y=l.ref;if("ref"in d){var C={};for(var N in d)N!=="ref"&&(C[N]=d[N])}else C=d;return Ni(l),d=Id(i,l,a,C,y,m),N=qd(),i!==null&&!ct?(Pd(i,l,m),nr(i,l,m)):(Ce&&N&&wd(l),l.flags|=1,kt(i,l,d,m),l.child)}function Y0(i,l,a,d,m){if(i===null){var y=a.type;return typeof y=="function"&&!vd(y)&&y.defaultProps===void 0&&a.compare===null?(l.tag=15,l.type=y,F0(i,l,y,d,m)):(i=ca(a.type,null,d,l,l.mode,m),i.ref=l.ref,i.return=l,l.child=i)}if(y=i.child,!gf(i,m)){var C=y.memoizedProps;if(a=a.compare,a=a!==null?a:Cl,a(C,d)&&i.ref===l.ref)return nr(i,l,m)}return l.flags|=1,i=Xn(y,d),i.ref=l.ref,i.return=l,l.child=i}function F0(i,l,a,d,m){if(i!==null){var y=i.memoizedProps;if(Cl(y,d)&&i.ref===l.ref)if(ct=!1,l.pendingProps=d=y,gf(i,m))(i.flags&131072)!==0&&(ct=!0);else return l.lanes=i.lanes,nr(i,l,m)}return cf(i,l,a,d,m)}function J0(i,l,a,d){var m=d.children,y=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,i!==null){for(d=l.child=i.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~y}else d=0,l.child=null;return X0(i,l,y,a,d)}if((a&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&ha(l,y!==null?y.cachePool:null),y!==null?Wg(l,y):Hd(),Zg(l);else return d=l.lanes=536870912,X0(i,l,y!==null?y.baseLanes|a:a,a,d)}else y!==null?(ha(l,y.cachePool),Wg(l,y),Lr(),l.memoizedState=null):(i!==null&&ha(l,null),Hd(),Lr());return kt(i,l,m,a),l.child}function _l(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function X0(i,l,a,d,m){var y=Dd();return y=y===null?null:{parent:ot._currentValue,pool:y},l.memoizedState={baseLanes:a,cachePool:y},i!==null&&ha(l,null),Hd(),Zg(l),i!==null&&xs(i,l,d,!0),l.childLanes=m,null}function Aa(i,l){return l=Oa({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function Q0(i,l,a){return Ai(l,i.child,null,a),i=Aa(l,l.pendingProps),i.flags|=2,en(l),l.memoizedState=null,i}function Yw(i,l,a){var d=l.pendingProps,m=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Ce){if(d.mode==="hidden")return i=Aa(l,d),l.lanes=536870912,_l(null,i);if(Vd(l),(i=Pe)?(i=cb(i,pn),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Mr!==null?{id:_n,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},a=zg(i),a.return=l,l.child=a,Ct=l,Pe=null)):i=null,i===null)throw Ar(l);return l.lanes=536870912,null}return Aa(l,d)}var y=i.memoizedState;if(y!==null){var C=y.dehydrated;if(Vd(l),m)if(l.flags&256)l.flags&=-257,l=Q0(i,l,a);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(r(558));else if(ct||xs(i,l,a,!1),m=(a&i.childLanes)!==0,ct||m){if(d=He,d!==null&&(C=$m(d,a),C!==0&&C!==y.retryLane))throw y.retryLane=C,Si(i,C),Kt(d,i,C),af;Va(),l=Q0(i,l,a)}else i=y.treeContext,Pe=gn(C.nextSibling),Ct=l,Ce=!0,Tr=null,pn=!1,i!==null&&_g(l,i),l=Aa(l,d),l.flags|=4096;return l}return i=Xn(i.child,{mode:d.mode,children:d.children}),i.ref=l.ref,l.child=i,i.return=l,i}function ja(i,l){var a=l.ref;if(a===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(l.flags|=4194816)}}function cf(i,l,a,d,m){return Ni(l),a=Id(i,l,a,d,void 0,m),d=qd(),i!==null&&!ct?(Pd(i,l,m),nr(i,l,m)):(Ce&&d&&wd(l),l.flags|=1,kt(i,l,a,m),l.child)}function W0(i,l,a,d,m,y){return Ni(l),l.updateQueue=null,a=t0(l,d,a,m),e0(i),d=qd(),i!==null&&!ct?(Pd(i,l,y),nr(i,l,y)):(Ce&&d&&wd(l),l.flags|=1,kt(i,l,a,y),l.child)}function Z0(i,l,a,d,m){if(Ni(l),l.stateNode===null){var y=ms,C=a.contextType;typeof C=="object"&&C!==null&&(y=wt(C)),y=new a(d,y),l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=lf,l.stateNode=y,y._reactInternals=l,y=l.stateNode,y.props=d,y.state=l.memoizedState,y.refs={},zd(l),C=a.contextType,y.context=typeof C=="object"&&C!==null?wt(C):ms,y.state=l.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(sf(l,a,C,d),y.state=l.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&lf.enqueueReplaceState(y,y.state,null),Dl(l,d,y,m),Ol(),y.state=l.memoizedState),typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(i===null){y=l.stateNode;var N=l.memoizedProps,M=Oi(a,N);y.props=M;var z=y.context,V=a.contextType;C=ms,typeof V=="object"&&V!==null&&(C=wt(V));var q=a.getDerivedStateFromProps;V=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function",N=l.pendingProps!==N,V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N||z!==C)&&U0(l,y,d,C),Or=!1;var L=l.memoizedState;y.state=L,Dl(l,d,y,m),Ol(),z=l.memoizedState,N||L!==z||Or?(typeof q=="function"&&(sf(l,a,q,d),z=l.memoizedState),(M=Or||H0(l,a,M,d,L,z,C))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(l.flags|=4194308)):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=z),y.props=d,y.state=z,y.context=C,d=M):(typeof y.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{y=l.stateNode,Ld(i,l),C=l.memoizedProps,V=Oi(a,C),y.props=V,q=l.pendingProps,L=y.context,z=a.contextType,M=ms,typeof z=="object"&&z!==null&&(M=wt(z)),N=a.getDerivedStateFromProps,(z=typeof N=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==q||L!==M)&&U0(l,y,d,M),Or=!1,L=l.memoizedState,y.state=L,Dl(l,d,y,m),Ol();var _=l.memoizedState;C!==q||L!==_||Or||i!==null&&i.dependencies!==null&&da(i.dependencies)?(typeof N=="function"&&(sf(l,a,N,d),_=l.memoizedState),(V=Or||H0(l,a,V,d,L,_,M)||i!==null&&i.dependencies!==null&&da(i.dependencies))?(z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,_,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,_,M)),typeof y.componentDidUpdate=="function"&&(l.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=_),y.props=d,y.state=_,y.context=M,d=V):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(l.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(l.flags|=1024),d=!1)}return y=d,ja(i,l),d=(l.flags&128)!==0,y||d?(y=l.stateNode,a=d&&typeof a.getDerivedStateFromError!="function"?null:y.render(),l.flags|=1,i!==null&&d?(l.child=Ai(l,i.child,null,m),l.child=Ai(l,null,a,m)):kt(i,l,a,m),l.memoizedState=y.state,i=l.child):i=nr(i,l,m),i}function ey(i,l,a,d){return wi(),l.flags|=256,kt(i,l,a,d),l.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function df(i){return{baseLanes:i,cachePool:qg()}}function ff(i,l,a){return i=i!==null?i.childLanes&~a:0,l&&(i|=nn),i}function ty(i,l,a){var d=l.pendingProps,m=!1,y=(l.flags&128)!==0,C;if((C=y)||(C=i!==null&&i.memoizedState===null?!1:(it.current&2)!==0),C&&(m=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,i===null){if(Ce){if(m?zr(l):Lr(),(i=Pe)?(i=cb(i,pn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Mr!==null?{id:_n,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},a=zg(i),a.return=l,l.child=a,Ct=l,Pe=null)):i=null,i===null)throw Ar(l);return Ff(i)?l.lanes=32:l.lanes=536870912,null}var N=d.children;return d=d.fallback,m?(Lr(),m=l.mode,N=Oa({mode:"hidden",children:N},m),d=Ci(d,m,a,null),N.return=l,d.return=l,N.sibling=d,l.child=N,d=l.child,d.memoizedState=df(a),d.childLanes=ff(i,C,a),l.memoizedState=uf,_l(null,d)):(zr(l),hf(l,N))}var M=i.memoizedState;if(M!==null&&(N=M.dehydrated,N!==null)){if(y)l.flags&256?(zr(l),l.flags&=-257,l=pf(i,l,a)):l.memoizedState!==null?(Lr(),l.child=i.child,l.flags|=128,l=null):(Lr(),N=d.fallback,m=l.mode,d=Oa({mode:"visible",children:d.children},m),N=Ci(N,m,a,null),N.flags|=2,d.return=l,N.return=l,d.sibling=N,l.child=d,Ai(l,i.child,null,a),d=l.child,d.memoizedState=df(a),d.childLanes=ff(i,C,a),l.memoizedState=uf,l=_l(null,d));else if(zr(l),Ff(N)){if(C=N.nextSibling&&N.nextSibling.dataset,C)var z=C.dgst;C=z,d=Error(r(419)),d.stack="",d.digest=C,Nl({value:d,source:null,stack:null}),l=pf(i,l,a)}else if(ct||xs(i,l,a,!1),C=(a&i.childLanes)!==0,ct||C){if(C=He,C!==null&&(d=$m(C,a),d!==0&&d!==M.retryLane))throw M.retryLane=d,Si(i,d),Kt(C,i,d),af;Yf(N)||Va(),l=pf(i,l,a)}else Yf(N)?(l.flags|=192,l.child=i.child,l=null):(i=M.treeContext,Pe=gn(N.nextSibling),Ct=l,Ce=!0,Tr=null,pn=!1,i!==null&&_g(l,i),l=hf(l,d.children),l.flags|=4096);return l}return m?(Lr(),N=d.fallback,m=l.mode,M=i.child,z=M.sibling,d=Xn(M,{mode:"hidden",children:d.children}),d.subtreeFlags=M.subtreeFlags&65011712,z!==null?N=Xn(z,N):(N=Ci(N,m,a,null),N.flags|=2),N.return=l,d.return=l,d.sibling=N,l.child=d,_l(null,d),d=l.child,N=i.child.memoizedState,N===null?N=df(a):(m=N.cachePool,m!==null?(M=ot._currentValue,m=m.parent!==M?{parent:M,pool:M}:m):m=qg(),N={baseLanes:N.baseLanes|a,cachePool:m}),d.memoizedState=N,d.childLanes=ff(i,C,a),l.memoizedState=uf,_l(i.child,d)):(zr(l),a=i.child,i=a.sibling,a=Xn(a,{mode:"visible",children:d.children}),a.return=l,a.sibling=null,i!==null&&(C=l.deletions,C===null?(l.deletions=[i],l.flags|=16):C.push(i)),l.child=a,l.memoizedState=null,a)}function hf(i,l){return l=Oa({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Oa(i,l){return i=Wt(22,i,null,l),i.lanes=0,i}function pf(i,l,a){return Ai(l,i.child,null,a),i=hf(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function ny(i,l,a){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l),Td(i.return,l,a)}function mf(i,l,a,d,m,y){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:m,treeForkCount:y}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=a,C.tailMode=m,C.treeForkCount=y)}function ry(i,l,a){var d=l.pendingProps,m=d.revealOrder,y=d.tail;d=d.children;var C=it.current,N=(C&2)!==0;if(N?(C=C&1|2,l.flags|=128):C&=1,ee(it,C),kt(i,l,d,a),d=Ce?kl:0,!N&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ny(i,a,l);else if(i.tag===19)ny(i,a,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(a=l.child,m=null;a!==null;)i=a.alternate,i!==null&&xa(i)===null&&(m=a),a=a.sibling;a=m,a===null?(m=l.child,l.child=null):(m=a.sibling,a.sibling=null),mf(l,!1,m,a,y,d);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=l.child,l.child=null;m!==null;){if(i=m.alternate,i!==null&&xa(i)===null){l.child=m;break}i=m.sibling,m.sibling=a,a=m,m=i}mf(l,!0,a,null,y,d);break;case"together":mf(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function nr(i,l,a){if(i!==null&&(l.dependencies=i.dependencies),Hr|=l.lanes,(a&l.childLanes)===0)if(i!==null){if(xs(i,l,a,!1),(a&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,a=Xn(i,i.pendingProps),l.child=a,a.return=l;i.sibling!==null;)i=i.sibling,a=a.sibling=Xn(i,i.pendingProps),a.return=l;a.sibling=null}return l.child}function gf(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&da(i)))}function Fw(i,l,a){switch(l.tag){case 3:zt(l,l.stateNode.containerInfo),jr(l,ot,i.memoizedState.cache),wi();break;case 27:case 5:cl(l);break;case 4:zt(l,l.stateNode.containerInfo);break;case 10:jr(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Vd(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(zr(l),l.flags|=128,null):(a&l.child.childLanes)!==0?ty(i,l,a):(zr(l),i=nr(i,l,a),i!==null?i.sibling:null);zr(l);break;case 19:var m=(i.flags&128)!==0;if(d=(a&l.childLanes)!==0,d||(xs(i,l,a,!1),d=(a&l.childLanes)!==0),m){if(d)return ry(i,l,a);l.flags|=128}if(m=l.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ee(it,it.current),d)break;return null;case 22:return l.lanes=0,J0(i,l,a,l.pendingProps);case 24:jr(l,ot,i.memoizedState.cache)}return nr(i,l,a)}function iy(i,l,a){if(i!==null)if(i.memoizedProps!==l.pendingProps)ct=!0;else{if(!gf(i,a)&&(l.flags&128)===0)return ct=!1,Fw(i,l,a);ct=(i.flags&131072)!==0}else ct=!1,Ce&&(l.flags&1048576)!==0&&Bg(l,kl,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(i=Mi(l.elementType),l.type=i,typeof i=="function")vd(i)?(d=Oi(i,d),l.tag=1,l=Z0(null,l,i,d,a)):(l.tag=0,l=cf(null,l,i,d,a));else{if(i!=null){var m=i.$$typeof;if(m===G){l.tag=11,l=G0(null,l,i,d,a);break e}else if(m===$){l.tag=14,l=Y0(null,l,i,d,a);break e}}throw l=Oe(i)||i,Error(r(306,l,""))}}return l;case 0:return cf(i,l,l.type,l.pendingProps,a);case 1:return d=l.type,m=Oi(d,l.pendingProps),Z0(i,l,d,m,a);case 3:e:{if(zt(l,l.stateNode.containerInfo),i===null)throw Error(r(387));d=l.pendingProps;var y=l.memoizedState;m=y.element,Ld(i,l),Dl(l,d,null,a);var C=l.memoizedState;if(d=C.cache,jr(l,ot,d),d!==y.cache&&Ad(l,[ot],a,!0),Ol(),d=C.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){l=ey(i,l,d,a);break e}else if(d!==m){m=dn(Error(r(424)),l),Nl(m),l=ey(i,l,d,a);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Pe=gn(i.firstChild),Ct=l,Ce=!0,Tr=null,pn=!0,a=Jg(l,null,d,a),l.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(wi(),d===m){l=nr(i,l,a);break e}kt(i,l,d,a)}l=l.child}return l;case 26:return ja(i,l),i===null?(a=mb(l.type,null,l.pendingProps,null))?l.memoizedState=a:Ce||(a=l.type,i=l.pendingProps,d=Ya(ge.current).createElement(a),d[St]=l,d[Ut]=i,Nt(d,a,i),pt(d),l.stateNode=d):l.memoizedState=mb(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return cl(l),i===null&&Ce&&(d=l.stateNode=fb(l.type,l.pendingProps,ge.current),Ct=l,pn=!0,m=Pe,qr(l.type)?(Jf=m,Pe=gn(d.firstChild)):Pe=m),kt(i,l,l.pendingProps.children,a),ja(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Ce&&((m=d=Pe)&&(d=kk(d,l.type,l.pendingProps,pn),d!==null?(l.stateNode=d,Ct=l,Pe=gn(d.firstChild),pn=!1,m=!0):m=!1),m||Ar(l)),cl(l),m=l.type,y=l.pendingProps,C=i!==null?i.memoizedProps:null,d=y.children,Pf(m,y)?d=null:C!==null&&Pf(m,C)&&(l.flags|=32),l.memoizedState!==null&&(m=Id(i,l,Uw,null,null,a),Wl._currentValue=m),ja(i,l),kt(i,l,d,a),l.child;case 6:return i===null&&Ce&&((i=a=Pe)&&(a=Nk(a,l.pendingProps,pn),a!==null?(l.stateNode=a,Ct=l,Pe=null,i=!0):i=!1),i||Ar(l)),null;case 13:return ty(i,l,a);case 4:return zt(l,l.stateNode.containerInfo),d=l.pendingProps,i===null?l.child=Ai(l,null,d,a):kt(i,l,d,a),l.child;case 11:return G0(i,l,l.type,l.pendingProps,a);case 7:return kt(i,l,l.pendingProps,a),l.child;case 8:return kt(i,l,l.pendingProps.children,a),l.child;case 12:return kt(i,l,l.pendingProps.children,a),l.child;case 10:return d=l.pendingProps,jr(l,l.type,d.value),kt(i,l,d.children,a),l.child;case 9:return m=l.type._context,d=l.pendingProps.children,Ni(l),m=wt(m),d=d(m),l.flags|=1,kt(i,l,d,a),l.child;case 14:return Y0(i,l,l.type,l.pendingProps,a);case 15:return F0(i,l,l.type,l.pendingProps,a);case 19:return ry(i,l,a);case 31:return Yw(i,l,a);case 22:return J0(i,l,a,l.pendingProps);case 24:return Ni(l),d=wt(ot),i===null?(m=Dd(),m===null&&(m=He,y=jd(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=a),m=y),l.memoizedState={parent:d,cache:m},zd(l),jr(l,ot,m)):((i.lanes&a)!==0&&(Ld(i,l),Dl(l,null,null,a),Ol()),m=i.memoizedState,y=l.memoizedState,m.parent!==d?(m={parent:d,cache:d},l.memoizedState=m,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=m),jr(l,ot,d)):(d=y.cache,jr(l,ot,d),d!==m.cache&&Ad(l,[ot],a,!0))),kt(i,l,l.pendingProps.children,a),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function rr(i){i.flags|=4}function yf(i,l,a,d,m){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(Oy())i.flags|=8192;else throw Ti=ma,Rd}else i.flags&=-16777217}function sy(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!vb(l))if(Oy())i.flags|=8192;else throw Ti=ma,Rd}function Da(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Hm():536870912,i.lanes|=l,Os|=l)}function Hl(i,l){if(!Ce)switch(i.tailMode){case"hidden":l=i.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ke(i){var l=i.alternate!==null&&i.alternate.child===i.child,a=0,d=0;if(l)for(var m=i.child;m!==null;)a|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)a|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=a,l}function Jw(i,l,a){var d=l.pendingProps;switch(kd(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(l),null;case 1:return Ke(l),null;case 3:return a=l.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Zn(ot),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(bs(l)?rr(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ed())),Ke(l),null;case 26:var m=l.type,y=l.memoizedState;return i===null?(rr(l),y!==null?(Ke(l),sy(l,y)):(Ke(l),yf(l,m,null,d,a))):y?y!==i.memoizedState?(rr(l),Ke(l),sy(l,y)):(Ke(l),l.flags&=-16777217):(i=i.memoizedProps,i!==d&&rr(l),Ke(l),yf(l,m,i,d,a)),null;case 27:if(qo(l),a=ge.current,m=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==d&&rr(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Ke(l),null}i=re.current,bs(l)?Hg(l):(i=fb(m,d,a),l.stateNode=i,rr(l))}return Ke(l),null;case 5:if(qo(l),m=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==d&&rr(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Ke(l),null}if(y=re.current,bs(l))Hg(l);else{var C=Ya(ge.current);switch(y){case 1:y=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=C.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?C.createElement(m,{is:d.is}):C.createElement(m)}}y[St]=l,y[Ut]=d;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)y.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=y;e:switch(Nt(y,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&rr(l)}}return Ke(l),yf(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,a),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==d&&rr(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(i=ge.current,bs(l)){if(i=l.stateNode,a=l.memoizedProps,d=null,m=Ct,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}i[St]=l,i=!!(i.nodeValue===a||d!==null&&d.suppressHydrationWarning===!0||tb(i.nodeValue,a)),i||Ar(l,!0)}else i=Ya(i).createTextNode(d),i[St]=l,l.stateNode=i}return Ke(l),null;case 31:if(a=l.memoizedState,i===null||i.memoizedState!==null){if(d=bs(l),a!==null){if(i===null){if(!d)throw Error(r(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[St]=l}else wi(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ke(l),i=!1}else a=Ed(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return l.flags&256?(en(l),l):(en(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Ke(l),null;case 13:if(d=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=bs(l),d!==null&&d.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=l.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[St]=l}else wi(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ke(l),m=!1}else m=Ed(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return l.flags&256?(en(l),l):(en(l),null)}return en(l),(l.flags&128)!==0?(l.lanes=a,l):(a=d!==null,i=i!==null&&i.memoizedState!==null,a&&(d=l.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048)),a!==i&&a&&(l.child.flags|=8192),Da(l,l.updateQueue),Ke(l),null);case 4:return rt(),i===null&&Uf(l.stateNode.containerInfo),Ke(l),null;case 10:return Zn(l.type),Ke(l),null;case 19:if(P(it),d=l.memoizedState,d===null)return Ke(l),null;if(m=(l.flags&128)!==0,y=d.rendering,y===null)if(m)Hl(d,!1);else{if(Qe!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(y=xa(i),y!==null){for(l.flags|=128,Hl(d,!1),i=y.updateQueue,l.updateQueue=i,Da(l,i),l.subtreeFlags=0,i=a,a=l.child;a!==null;)Rg(a,i),a=a.sibling;return ee(it,it.current&1|2),Ce&&Qn(l,d.treeForkCount),l.child}i=i.sibling}d.tail!==null&&Ft()>_a&&(l.flags|=128,m=!0,Hl(d,!1),l.lanes=4194304)}else{if(!m)if(i=xa(y),i!==null){if(l.flags|=128,m=!0,i=i.updateQueue,l.updateQueue=i,Da(l,i),Hl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ce)return Ke(l),null}else 2*Ft()-d.renderingStartTime>_a&&a!==536870912&&(l.flags|=128,m=!0,Hl(d,!1),l.lanes=4194304);d.isBackwards?(y.sibling=l.child,l.child=y):(i=d.last,i!==null?i.sibling=y:l.child=y,d.last=y)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Ft(),i.sibling=null,a=it.current,ee(it,m?a&1|2:a&1),Ce&&Qn(l,d.treeForkCount),i):(Ke(l),null);case 22:case 23:return en(l),Ud(),d=l.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(a&536870912)!==0&&(l.flags&128)===0&&(Ke(l),l.subtreeFlags&6&&(l.flags|=8192)):Ke(l),a=l.updateQueue,a!==null&&Da(l,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==a&&(l.flags|=2048),i!==null&&P(Ei),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),l.memoizedState.cache!==a&&(l.flags|=2048),Zn(ot),Ke(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Xw(i,l){switch(kd(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Zn(ot),rt(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return qo(l),null;case 31:if(l.memoizedState!==null){if(en(l),l.alternate===null)throw Error(r(340));wi()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(en(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));wi()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return P(it),null;case 4:return rt(),null;case 10:return Zn(l.type),null;case 22:case 23:return en(l),Ud(),i!==null&&P(Ei),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Zn(ot),null;case 25:return null;default:return null}}function ly(i,l){switch(kd(l),l.tag){case 3:Zn(ot),rt();break;case 26:case 27:case 5:qo(l);break;case 4:rt();break;case 31:l.memoizedState!==null&&en(l);break;case 13:en(l);break;case 19:P(it);break;case 10:Zn(l.type);break;case 22:case 23:en(l),Ud(),i!==null&&P(Ei);break;case 24:Zn(ot)}}function Ul(i,l){try{var a=l.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var m=d.next;a=m;do{if((a.tag&i)===i){d=void 0;var y=a.create,C=a.inst;d=y(),C.destroy=d}a=a.next}while(a!==m)}}catch(N){je(l,l.return,N)}}function Br(i,l,a){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&i)===i){var C=d.inst,N=C.destroy;if(N!==void 0){C.destroy=void 0,m=l;var M=a,z=N;try{z()}catch(V){je(m,M,V)}}}d=d.next}while(d!==y)}}catch(V){je(l,l.return,V)}}function oy(i){var l=i.updateQueue;if(l!==null){var a=i.stateNode;try{Qg(l,a)}catch(d){je(i,i.return,d)}}}function ay(i,l,a){a.props=Oi(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(d){je(i,l,d)}}function Vl(i,l){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof a=="function"?i.refCleanup=a(d):a.current=d}}catch(m){je(i,l,m)}}function Un(i,l){var a=i.ref,d=i.refCleanup;if(a!==null)if(typeof d=="function")try{d()}catch(m){je(i,l,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){je(i,l,m)}else a.current=null}function cy(i){var l=i.type,a=i.memoizedProps,d=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":a.autoFocus&&d.focus();break e;case"img":a.src?d.src=a.src:a.srcSet&&(d.srcset=a.srcSet)}}catch(m){je(i,i.return,m)}}function bf(i,l,a){try{var d=i.stateNode;bk(d,i.type,a,l),d[Ut]=l}catch(m){je(i,i.return,m)}}function uy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&qr(i.type)||i.tag===4}function xf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||uy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&qr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vf(i,l,a){var d=i.tag;if(d===5||d===6)i=i.stateNode,l?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,l):(l=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.appendChild(i),a=a._reactRootContainer,a!=null||l.onclick!==null||(l.onclick=Fn));else if(d!==4&&(d===27&&qr(i.type)&&(a=i.stateNode,l=null),i=i.child,i!==null))for(vf(i,l,a),i=i.sibling;i!==null;)vf(i,l,a),i=i.sibling}function Ra(i,l,a){var d=i.tag;if(d===5||d===6)i=i.stateNode,l?a.insertBefore(i,l):a.appendChild(i);else if(d!==4&&(d===27&&qr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ra(i,l,a),i=i.sibling;i!==null;)Ra(i,l,a),i=i.sibling}function dy(i){var l=i.stateNode,a=i.memoizedProps;try{for(var d=i.type,m=l.attributes;m.length;)l.removeAttributeNode(m[0]);Nt(l,d,a),l[St]=i,l[Ut]=a}catch(y){je(i,i.return,y)}}var ir=!1,ut=!1,Sf=!1,fy=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Qw(i,l){if(i=i.containerInfo,If=ec,i=kg(i),hd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var C=0,N=-1,M=-1,z=0,V=0,q=i,L=null;t:for(;;){for(var _;q!==a||m!==0&&q.nodeType!==3||(N=C+m),q!==y||d!==0&&q.nodeType!==3||(M=C+d),q.nodeType===3&&(C+=q.nodeValue.length),(_=q.firstChild)!==null;)L=q,q=_;for(;;){if(q===i)break t;if(L===a&&++z===m&&(N=C),L===y&&++V===d&&(M=C),(_=q.nextSibling)!==null)break;q=L,L=q.parentNode}q=_}a=N===-1||M===-1?null:{start:N,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(qf={focusedElem:i,selectionRange:a},ec=!1,mt=l;mt!==null;)if(l=mt,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,mt=i;else for(;mt!==null;){switch(l=mt,y=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)m=i[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,a=l,m=y.memoizedProps,y=y.memoizedState,d=a.stateNode;try{var ne=Oi(a.type,m);i=d.getSnapshotBeforeUpdate(ne,y),d.__reactInternalSnapshotBeforeUpdate=i}catch(ce){je(a,a.return,ce)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,a=i.nodeType,a===9)Gf(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Gf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,mt=i;break}mt=l.return}}function hy(i,l,a){var d=a.flags;switch(a.tag){case 0:case 11:case 15:lr(i,a),d&4&&Ul(5,a);break;case 1:if(lr(i,a),d&4)if(i=a.stateNode,l===null)try{i.componentDidMount()}catch(C){je(a,a.return,C)}else{var m=Oi(a.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(m,l,i.__reactInternalSnapshotBeforeUpdate)}catch(C){je(a,a.return,C)}}d&64&&oy(a),d&512&&Vl(a,a.return);break;case 3:if(lr(i,a),d&64&&(i=a.updateQueue,i!==null)){if(l=null,a.child!==null)switch(a.child.tag){case 27:case 5:l=a.child.stateNode;break;case 1:l=a.child.stateNode}try{Qg(i,l)}catch(C){je(a,a.return,C)}}break;case 27:l===null&&d&4&&dy(a);case 26:case 5:lr(i,a),l===null&&d&4&&cy(a),d&512&&Vl(a,a.return);break;case 12:lr(i,a);break;case 31:lr(i,a),d&4&&gy(i,a);break;case 13:lr(i,a),d&4&&yy(i,a),d&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=lk.bind(null,a),Ek(i,a))));break;case 22:if(d=a.memoizedState!==null||ir,!d){l=l!==null&&l.memoizedState!==null||ut,m=ir;var y=ut;ir=d,(ut=l)&&!y?or(i,a,(a.subtreeFlags&8772)!==0):lr(i,a),ir=m,ut=y}break;case 30:break;default:lr(i,a)}}function py(i){var l=i.alternate;l!==null&&(i.alternate=null,py(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Xu(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Fe=null,$t=!1;function sr(i,l,a){for(a=a.child;a!==null;)my(i,l,a),a=a.sibling}function my(i,l,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ul,a)}catch{}switch(a.tag){case 26:ut||Un(a,l),sr(i,l,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ut||Un(a,l);var d=Fe,m=$t;qr(a.type)&&(Fe=a.stateNode,$t=!1),sr(i,l,a),Jl(a.stateNode),Fe=d,$t=m;break;case 5:ut||Un(a,l);case 6:if(d=Fe,m=$t,Fe=null,sr(i,l,a),Fe=d,$t=m,Fe!==null)if($t)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(a.stateNode)}catch(y){je(a,l,y)}else try{Fe.removeChild(a.stateNode)}catch(y){je(a,l,y)}break;case 18:Fe!==null&&($t?(i=Fe,ob(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Us(i)):ob(Fe,a.stateNode));break;case 4:d=Fe,m=$t,Fe=a.stateNode.containerInfo,$t=!0,sr(i,l,a),Fe=d,$t=m;break;case 0:case 11:case 14:case 15:Br(2,a,l),ut||Br(4,a,l),sr(i,l,a);break;case 1:ut||(Un(a,l),d=a.stateNode,typeof d.componentWillUnmount=="function"&&ay(a,l,d)),sr(i,l,a);break;case 21:sr(i,l,a);break;case 22:ut=(d=ut)||a.memoizedState!==null,sr(i,l,a),ut=d;break;default:sr(i,l,a)}}function gy(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Us(i)}catch(a){je(l,l.return,a)}}}function yy(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Us(i)}catch(a){je(l,l.return,a)}}function Ww(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new fy),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new fy),l;default:throw Error(r(435,i.tag))}}function za(i,l){var a=Ww(i);l.forEach(function(d){if(!a.has(d)){a.add(d);var m=ok.bind(null,i,d);d.then(m,m)}})}function It(i,l){var a=l.deletions;if(a!==null)for(var d=0;d<a.length;d++){var m=a[d],y=i,C=l,N=C;e:for(;N!==null;){switch(N.tag){case 27:if(qr(N.type)){Fe=N.stateNode,$t=!1;break e}break;case 5:Fe=N.stateNode,$t=!1;break e;case 3:case 4:Fe=N.stateNode.containerInfo,$t=!0;break e}N=N.return}if(Fe===null)throw Error(r(160));my(y,C,m),Fe=null,$t=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)by(l,i),l=l.sibling}var Nn=null;function by(i,l){var a=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:It(l,i),qt(i),d&4&&(Br(3,i,i.return),Ul(3,i),Br(5,i,i.return));break;case 1:It(l,i),qt(i),d&512&&(ut||a===null||Un(a,a.return)),d&64&&ir&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?d:a.concat(d))));break;case 26:var m=Nn;if(It(l,i),qt(i),d&512&&(ut||a===null||Un(a,a.return)),d&4){var y=a!==null?a.memoizedState:null;if(d=i.memoizedState,a===null)if(d===null)if(i.stateNode===null){e:{d=i.type,a=i.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":y=m.getElementsByTagName("title")[0],(!y||y[hl]||y[St]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(d),m.head.insertBefore(y,m.querySelector("head > title"))),Nt(y,d,a),y[St]=i,pt(y),d=y;break e;case"link":var C=bb("link","href",m).get(d+(a.href||""));if(C){for(var N=0;N<C.length;N++)if(y=C[N],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(N,1);break t}}y=m.createElement(d),Nt(y,d,a),m.head.appendChild(y);break;case"meta":if(C=bb("meta","content",m).get(d+(a.content||""))){for(N=0;N<C.length;N++)if(y=C[N],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(N,1);break t}}y=m.createElement(d),Nt(y,d,a),m.head.appendChild(y);break;default:throw Error(r(468,d))}y[St]=i,pt(y),d=y}i.stateNode=d}else xb(m,i.type,i.stateNode);else i.stateNode=yb(m,d,i.memoizedProps);else y!==d?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,d===null?xb(m,i.type,i.stateNode):yb(m,d,i.memoizedProps)):d===null&&i.stateNode!==null&&bf(i,i.memoizedProps,a.memoizedProps)}break;case 27:It(l,i),qt(i),d&512&&(ut||a===null||Un(a,a.return)),a!==null&&d&4&&bf(i,i.memoizedProps,a.memoizedProps);break;case 5:if(It(l,i),qt(i),d&512&&(ut||a===null||Un(a,a.return)),i.flags&32){m=i.stateNode;try{as(m,"")}catch(ne){je(i,i.return,ne)}}d&4&&i.stateNode!=null&&(m=i.memoizedProps,bf(i,m,a!==null?a.memoizedProps:m)),d&1024&&(Sf=!0);break;case 6:if(It(l,i),qt(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,a=i.stateNode;try{a.nodeValue=d}catch(ne){je(i,i.return,ne)}}break;case 3:if(Xa=null,m=Nn,Nn=Fa(l.containerInfo),It(l,i),Nn=m,qt(i),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Us(l.containerInfo)}catch(ne){je(i,i.return,ne)}Sf&&(Sf=!1,xy(i));break;case 4:d=Nn,Nn=Fa(i.stateNode.containerInfo),It(l,i),qt(i),Nn=d;break;case 12:It(l,i),qt(i);break;case 31:It(l,i),qt(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,za(i,d)));break;case 13:It(l,i),qt(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ba=Ft()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,za(i,d)));break;case 22:m=i.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,z=ir,V=ut;if(ir=z||m,ut=V||M,It(l,i),ut=V,ir=z,qt(i),d&8192)e:for(l=i.stateNode,l._visibility=m?l._visibility&-2:l._visibility|1,m&&(a===null||M||ir||ut||Di(i)),a=null,l=i;;){if(l.tag===5||l.tag===26){if(a===null){M=a=l;try{if(y=M.stateNode,m)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{N=M.stateNode;var q=M.memoizedProps.style,L=q!=null&&q.hasOwnProperty("display")?q.display:null;N.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ne){je(M,M.return,ne)}}}else if(l.tag===6){if(a===null){M=l;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(ne){je(M,M.return,ne)}}}else if(l.tag===18){if(a===null){M=l;try{var _=M.stateNode;m?ab(_,!0):ab(M.stateNode,!1)}catch(ne){je(M,M.return,ne)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;a===l&&(a=null),l=l.return}a===l&&(a=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=i.updateQueue,d!==null&&(a=d.retryQueue,a!==null&&(d.retryQueue=null,za(i,a))));break;case 19:It(l,i),qt(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,za(i,d)));break;case 30:break;case 21:break;default:It(l,i),qt(i)}}function qt(i){var l=i.flags;if(l&2){try{for(var a,d=i.return;d!==null;){if(uy(d)){a=d;break}d=d.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var m=a.stateNode,y=xf(i);Ra(i,y,m);break;case 5:var C=a.stateNode;a.flags&32&&(as(C,""),a.flags&=-33);var N=xf(i);Ra(i,N,C);break;case 3:case 4:var M=a.stateNode.containerInfo,z=xf(i);vf(i,z,M);break;default:throw Error(r(161))}}catch(V){je(i,i.return,V)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function xy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;xy(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function lr(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)hy(i,l.alternate,l),l=l.sibling}function Di(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Br(4,l,l.return),Di(l);break;case 1:Un(l,l.return);var a=l.stateNode;typeof a.componentWillUnmount=="function"&&ay(l,l.return,a),Di(l);break;case 27:Jl(l.stateNode);case 26:case 5:Un(l,l.return),Di(l);break;case 22:l.memoizedState===null&&Di(l);break;case 30:Di(l);break;default:Di(l)}i=i.sibling}}function or(i,l,a){for(a=a&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,m=i,y=l,C=y.flags;switch(y.tag){case 0:case 11:case 15:or(m,y,a),Ul(4,y);break;case 1:if(or(m,y,a),d=y,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(z){je(d,d.return,z)}if(d=y,m=d.updateQueue,m!==null){var N=d.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)Xg(M[m],N)}catch(z){je(d,d.return,z)}}a&&C&64&&oy(y),Vl(y,y.return);break;case 27:dy(y);case 26:case 5:or(m,y,a),a&&d===null&&C&4&&cy(y),Vl(y,y.return);break;case 12:or(m,y,a);break;case 31:or(m,y,a),a&&C&4&&gy(m,y);break;case 13:or(m,y,a),a&&C&4&&yy(m,y);break;case 22:y.memoizedState===null&&or(m,y,a),Vl(y,y.return);break;case 30:break;default:or(m,y,a)}l=l.sibling}}function Cf(i,l){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&El(a))}function wf(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&El(i))}function En(i,l,a,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)vy(i,l,a,d),l=l.sibling}function vy(i,l,a,d){var m=l.flags;switch(l.tag){case 0:case 11:case 15:En(i,l,a,d),m&2048&&Ul(9,l);break;case 1:En(i,l,a,d);break;case 3:En(i,l,a,d),m&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&El(i)));break;case 12:if(m&2048){En(i,l,a,d),i=l.stateNode;try{var y=l.memoizedProps,C=y.id,N=y.onPostCommit;typeof N=="function"&&N(C,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){je(l,l.return,M)}}else En(i,l,a,d);break;case 31:En(i,l,a,d);break;case 13:En(i,l,a,d);break;case 23:break;case 22:y=l.stateNode,C=l.alternate,l.memoizedState!==null?y._visibility&2?En(i,l,a,d):$l(i,l):y._visibility&2?En(i,l,a,d):(y._visibility|=2,Ts(i,l,a,d,(l.subtreeFlags&10256)!==0||!1)),m&2048&&Cf(C,l);break;case 24:En(i,l,a,d),m&2048&&wf(l.alternate,l);break;default:En(i,l,a,d)}}function Ts(i,l,a,d,m){for(m=m&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var y=i,C=l,N=a,M=d,z=C.flags;switch(C.tag){case 0:case 11:case 15:Ts(y,C,N,M,m),Ul(8,C);break;case 23:break;case 22:var V=C.stateNode;C.memoizedState!==null?V._visibility&2?Ts(y,C,N,M,m):$l(y,C):(V._visibility|=2,Ts(y,C,N,M,m)),m&&z&2048&&Cf(C.alternate,C);break;case 24:Ts(y,C,N,M,m),m&&z&2048&&wf(C.alternate,C);break;default:Ts(y,C,N,M,m)}l=l.sibling}}function $l(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var a=i,d=l,m=d.flags;switch(d.tag){case 22:$l(a,d),m&2048&&Cf(d.alternate,d);break;case 24:$l(a,d),m&2048&&wf(d.alternate,d);break;default:$l(a,d)}l=l.sibling}}var Il=8192;function As(i,l,a){if(i.subtreeFlags&Il)for(i=i.child;i!==null;)Sy(i,l,a),i=i.sibling}function Sy(i,l,a){switch(i.tag){case 26:As(i,l,a),i.flags&Il&&i.memoizedState!==null&&Hk(a,Nn,i.memoizedState,i.memoizedProps);break;case 5:As(i,l,a);break;case 3:case 4:var d=Nn;Nn=Fa(i.stateNode.containerInfo),As(i,l,a),Nn=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Il,Il=16777216,As(i,l,a),Il=d):As(i,l,a));break;default:As(i,l,a)}}function Cy(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function ql(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var a=0;a<l.length;a++){var d=l[a];mt=d,ky(d,i)}Cy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wy(i),i=i.sibling}function wy(i){switch(i.tag){case 0:case 11:case 15:ql(i),i.flags&2048&&Br(9,i,i.return);break;case 3:ql(i);break;case 12:ql(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,La(i)):ql(i);break;default:ql(i)}}function La(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var a=0;a<l.length;a++){var d=l[a];mt=d,ky(d,i)}Cy(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Br(8,l,l.return),La(l);break;case 22:a=l.stateNode,a._visibility&2&&(a._visibility&=-3,La(l));break;default:La(l)}i=i.sibling}}function ky(i,l){for(;mt!==null;){var a=mt;switch(a.tag){case 0:case 11:case 15:Br(8,a,l);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var d=a.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:El(a.memoizedState.cache)}if(d=a.child,d!==null)d.return=a,mt=d;else e:for(a=i;mt!==null;){d=mt;var m=d.sibling,y=d.return;if(py(d),d===a){mt=null;break e}if(m!==null){m.return=y,mt=m;break e}mt=y}}}var Zw={getCacheForType:function(i){var l=wt(ot),a=l.data.get(i);return a===void 0&&(a=i(),l.data.set(i,a)),a},cacheSignal:function(){return wt(ot).controller.signal}},ek=typeof WeakMap=="function"?WeakMap:Map,Ee=0,He=null,ye=null,xe=0,Ae=0,tn=null,_r=!1,js=!1,kf=!1,ar=0,Qe=0,Hr=0,Ri=0,Nf=0,nn=0,Os=0,Pl=null,Pt=null,Ef=!1,Ba=0,Ny=0,_a=1/0,Ha=null,Ur=null,ht=0,Vr=null,Ds=null,cr=0,Mf=0,Tf=null,Ey=null,Kl=0,Af=null;function rn(){return(Ee&2)!==0&&xe!==0?xe&-xe:H.T!==null?Lf():Im()}function My(){if(nn===0)if((xe&536870912)===0||Ce){var i=Go;Go<<=1,(Go&3932160)===0&&(Go=262144),nn=i}else nn=536870912;return i=Zt.current,i!==null&&(i.flags|=32),nn}function Kt(i,l,a){(i===He&&(Ae===2||Ae===9)||i.cancelPendingCommit!==null)&&(Rs(i,0),$r(i,xe,nn,!1)),fl(i,a),((Ee&2)===0||i!==He)&&(i===He&&((Ee&2)===0&&(Ri|=a),Qe===4&&$r(i,xe,nn,!1)),Vn(i))}function Ty(i,l,a){if((Ee&6)!==0)throw Error(r(327));var d=!a&&(l&127)===0&&(l&i.expiredLanes)===0||dl(i,l),m=d?rk(i,l):Of(i,l,!0),y=d;do{if(m===0){js&&!d&&$r(i,l,0,!1);break}else{if(a=i.current.alternate,y&&!tk(a)){m=Of(i,l,!1),y=!1;continue}if(m===2){if(y=l,i.errorRecoveryDisabledLanes&y)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var N=i;m=Pl;var M=N.current.memoizedState.isDehydrated;if(M&&(Rs(N,C).flags|=256),C=Of(N,C,!1),C!==2){if(kf&&!M){N.errorRecoveryDisabledLanes|=y,Ri|=y,m=4;break e}y=Pt,Pt=m,y!==null&&(Pt===null?Pt=y:Pt.push.apply(Pt,y))}m=C}if(y=!1,m!==2)continue}}if(m===1){Rs(i,0),$r(i,l,0,!0);break}e:{switch(d=i,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:$r(d,l,nn,!_r);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(m=Ba+300-Ft(),10<m)){if($r(d,l,nn,!_r),Fo(d,0,!0)!==0)break e;cr=l,d.timeoutHandle=sb(Ay.bind(null,d,a,Pt,Ha,Ef,l,nn,Ri,Os,_r,y,"Throttled",-0,0),m);break e}Ay(d,a,Pt,Ha,Ef,l,nn,Ri,Os,_r,y,null,-0,0)}}break}while(!0);Vn(i)}function Ay(i,l,a,d,m,y,C,N,M,z,V,q,L,_){if(i.timeoutHandle=-1,q=l.subtreeFlags,q&8192||(q&16785408)===16785408){q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Sy(l,y,q);var ne=(y&62914560)===y?Ba-Ft():(y&4194048)===y?Ny-Ft():0;if(ne=Uk(q,ne),ne!==null){cr=y,i.cancelPendingCommit=ne(_y.bind(null,i,l,y,a,d,m,C,N,M,V,q,null,L,_)),$r(i,y,C,!z);return}}_y(i,l,y,a,d,m,C,N,M)}function tk(i){for(var l=i;;){var a=l.tag;if((a===0||a===11||a===15)&&l.flags&16384&&(a=l.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var d=0;d<a.length;d++){var m=a[d],y=m.getSnapshot;m=m.value;try{if(!Qt(y(),m))return!1}catch{return!1}}if(a=l.child,l.subtreeFlags&16384&&a!==null)a.return=l,l=a;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function $r(i,l,a,d){l&=~Nf,l&=~Ri,i.suspendedLanes|=l,i.pingedLanes&=~l,d&&(i.warmLanes|=l),d=i.expirationTimes;for(var m=l;0<m;){var y=31-Xt(m),C=1<<y;d[y]=-1,m&=~C}a!==0&&Um(i,a,l)}function Ua(){return(Ee&6)===0?(Gl(0),!1):!0}function jf(){if(ye!==null){if(Ae===0)var i=ye.return;else i=ye,Wn=ki=null,Kd(i),ws=null,Tl=0,i=ye;for(;i!==null;)ly(i.alternate,i),i=i.return;ye=null}}function Rs(i,l){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,Sk(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),cr=0,jf(),He=i,ye=a=Xn(i.current,null),xe=l,Ae=0,tn=null,_r=!1,js=dl(i,l),kf=!1,Os=nn=Nf=Ri=Hr=Qe=0,Pt=Pl=null,Ef=!1,(l&8)!==0&&(l|=l&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=l;0<d;){var m=31-Xt(d),y=1<<m;l|=i[m],d&=~y}return ar=l,la(),a}function jy(i,l){he=null,H.H=Bl,l===Cs||l===pa?(l=Gg(),Ae=3):l===Rd?(l=Gg(),Ae=4):Ae=l===af?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,tn=l,ye===null&&(Qe=1,Ta(i,dn(l,i.current)))}function Oy(){var i=Zt.current;return i===null?!0:(xe&4194048)===xe?mn===null:(xe&62914560)===xe||(xe&536870912)!==0?i===mn:!1}function Dy(){var i=H.H;return H.H=Bl,i===null?Bl:i}function Ry(){var i=H.A;return H.A=Zw,i}function Va(){Qe=4,_r||(xe&4194048)!==xe&&Zt.current!==null||(js=!0),(Hr&134217727)===0&&(Ri&134217727)===0||He===null||$r(He,xe,nn,!1)}function Of(i,l,a){var d=Ee;Ee|=2;var m=Dy(),y=Ry();(He!==i||xe!==l)&&(Ha=null,Rs(i,l)),l=!1;var C=Qe;e:do try{if(Ae!==0&&ye!==null){var N=ye,M=tn;switch(Ae){case 8:jf(),C=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(l=!0);var z=Ae;if(Ae=0,tn=null,zs(i,N,M,z),a&&js){C=0;break e}break;default:z=Ae,Ae=0,tn=null,zs(i,N,M,z)}}nk(),C=Qe;break}catch(V){jy(i,V)}while(!0);return l&&i.shellSuspendCounter++,Wn=ki=null,Ee=d,H.H=m,H.A=y,ye===null&&(He=null,xe=0,la()),C}function nk(){for(;ye!==null;)zy(ye)}function rk(i,l){var a=Ee;Ee|=2;var d=Dy(),m=Ry();He!==i||xe!==l?(Ha=null,_a=Ft()+500,Rs(i,l)):js=dl(i,l);e:do try{if(Ae!==0&&ye!==null){l=ye;var y=tn;t:switch(Ae){case 1:Ae=0,tn=null,zs(i,l,y,1);break;case 2:case 9:if(Pg(y)){Ae=0,tn=null,Ly(l);break}l=function(){Ae!==2&&Ae!==9||He!==i||(Ae=7),Vn(i)},y.then(l,l);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:Pg(y)?(Ae=0,tn=null,Ly(l)):(Ae=0,tn=null,zs(i,l,y,7));break;case 5:var C=null;switch(ye.tag){case 26:C=ye.memoizedState;case 5:case 27:var N=ye;if(C?vb(C):N.stateNode.complete){Ae=0,tn=null;var M=N.sibling;if(M!==null)ye=M;else{var z=N.return;z!==null?(ye=z,$a(z)):ye=null}break t}}Ae=0,tn=null,zs(i,l,y,5);break;case 6:Ae=0,tn=null,zs(i,l,y,6);break;case 8:jf(),Qe=6;break e;default:throw Error(r(462))}}ik();break}catch(V){jy(i,V)}while(!0);return Wn=ki=null,H.H=d,H.A=m,Ee=a,ye!==null?0:(He=null,xe=0,la(),Qe)}function ik(){for(;ye!==null&&!MC();)zy(ye)}function zy(i){var l=iy(i.alternate,i,ar);i.memoizedProps=i.pendingProps,l===null?$a(i):ye=l}function Ly(i){var l=i,a=l.alternate;switch(l.tag){case 15:case 0:l=W0(a,l,l.pendingProps,l.type,void 0,xe);break;case 11:l=W0(a,l,l.pendingProps,l.type.render,l.ref,xe);break;case 5:Kd(l);default:ly(a,l),l=ye=Rg(l,ar),l=iy(a,l,ar)}i.memoizedProps=i.pendingProps,l===null?$a(i):ye=l}function zs(i,l,a,d){Wn=ki=null,Kd(l),ws=null,Tl=0;var m=l.return;try{if(Gw(i,m,l,a,xe)){Qe=1,Ta(i,dn(a,i.current)),ye=null;return}}catch(y){if(m!==null)throw ye=m,y;Qe=1,Ta(i,dn(a,i.current)),ye=null;return}l.flags&32768?(Ce||d===1?i=!0:js||(xe&536870912)!==0?i=!1:(_r=i=!0,(d===2||d===9||d===3||d===6)&&(d=Zt.current,d!==null&&d.tag===13&&(d.flags|=16384))),By(l,i)):$a(l)}function $a(i){var l=i;do{if((l.flags&32768)!==0){By(l,_r);return}i=l.return;var a=Jw(l.alternate,l,ar);if(a!==null){ye=a;return}if(l=l.sibling,l!==null){ye=l;return}ye=l=i}while(l!==null);Qe===0&&(Qe=5)}function By(i,l){do{var a=Xw(i.alternate,i);if(a!==null){a.flags&=32767,ye=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!l&&(i=i.sibling,i!==null)){ye=i;return}ye=i=a}while(i!==null);Qe=6,ye=null}function _y(i,l,a,d,m,y,C,N,M){i.cancelPendingCommit=null;do Ia();while(ht!==0);if((Ee&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(y=l.lanes|l.childLanes,y|=bd,_C(i,a,y,C,N,M),i===He&&(ye=He=null,xe=0),Ds=l,Vr=i,cr=a,Mf=y,Tf=m,Ey=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,ak(Po,function(){return Iy(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=H.T,H.T=null,m=W.p,W.p=2,C=Ee,Ee|=4;try{Qw(i,l,a)}finally{Ee=C,W.p=m,H.T=d}}ht=1,Hy(),Uy(),Vy()}}function Hy(){if(ht===1){ht=0;var i=Vr,l=Ds,a=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var d=W.p;W.p=2;var m=Ee;Ee|=4;try{by(l,i);var y=qf,C=kg(i.containerInfo),N=y.focusedElem,M=y.selectionRange;if(C!==N&&N&&N.ownerDocument&&wg(N.ownerDocument.documentElement,N)){if(M!==null&&hd(N)){var z=M.start,V=M.end;if(V===void 0&&(V=z),"selectionStart"in N)N.selectionStart=z,N.selectionEnd=Math.min(V,N.value.length);else{var q=N.ownerDocument||document,L=q&&q.defaultView||window;if(L.getSelection){var _=L.getSelection(),ne=N.textContent.length,ce=Math.min(M.start,ne),Le=M.end===void 0?ce:Math.min(M.end,ne);!_.extend&&ce>Le&&(C=Le,Le=ce,ce=C);var D=Cg(N,ce),T=Cg(N,Le);if(D&&T&&(_.rangeCount!==1||_.anchorNode!==D.node||_.anchorOffset!==D.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var R=q.createRange();R.setStart(D.node,D.offset),_.removeAllRanges(),ce>Le?(_.addRange(R),_.extend(T.node,T.offset)):(R.setEnd(T.node,T.offset),_.addRange(R))}}}}for(q=[],_=N;_=_.parentNode;)_.nodeType===1&&q.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<q.length;N++){var I=q[N];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}ec=!!If,qf=If=null}finally{Ee=m,W.p=d,H.T=a}}i.current=l,ht=2}}function Uy(){if(ht===2){ht=0;var i=Vr,l=Ds,a=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var d=W.p;W.p=2;var m=Ee;Ee|=4;try{hy(i,l.alternate,l)}finally{Ee=m,W.p=d,H.T=a}}ht=3}}function Vy(){if(ht===4||ht===3){ht=0,TC();var i=Vr,l=Ds,a=cr,d=Ey;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ht=5:(ht=0,Ds=Vr=null,$y(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ur=null),Fu(a),l=l.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ul,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=H.T,m=W.p,W.p=2,H.T=null;try{for(var y=i.onRecoverableError,C=0;C<d.length;C++){var N=d[C];y(N.value,{componentStack:N.stack})}}finally{H.T=l,W.p=m}}(cr&3)!==0&&Ia(),Vn(i),m=i.pendingLanes,(a&261930)!==0&&(m&42)!==0?i===Af?Kl++:(Kl=0,Af=i):Kl=0,Gl(0)}}function $y(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,El(l)))}function Ia(){return Hy(),Uy(),Vy(),Iy()}function Iy(){if(ht!==5)return!1;var i=Vr,l=Mf;Mf=0;var a=Fu(cr),d=H.T,m=W.p;try{W.p=32>a?32:a,H.T=null,a=Tf,Tf=null;var y=Vr,C=cr;if(ht=0,Ds=Vr=null,cr=0,(Ee&6)!==0)throw Error(r(331));var N=Ee;if(Ee|=4,wy(y.current),vy(y,y.current,C,a),Ee=N,Gl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ul,y)}catch{}return!0}finally{W.p=m,H.T=d,$y(i,l)}}function qy(i,l,a){l=dn(a,l),l=of(i.stateNode,l,2),i=Rr(i,l,2),i!==null&&(fl(i,2),Vn(i))}function je(i,l,a){if(i.tag===3)qy(i,i,a);else for(;l!==null;){if(l.tag===3){qy(l,i,a);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))){i=dn(a,i),a=P0(2),d=Rr(l,a,2),d!==null&&(K0(a,d,l,i),fl(d,2),Vn(d));break}}l=l.return}}function Df(i,l,a){var d=i.pingCache;if(d===null){d=i.pingCache=new ek;var m=new Set;d.set(l,m)}else m=d.get(l),m===void 0&&(m=new Set,d.set(l,m));m.has(a)||(kf=!0,m.add(a),i=sk.bind(null,i,l,a),l.then(i,i))}function sk(i,l,a){var d=i.pingCache;d!==null&&d.delete(l),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,He===i&&(xe&a)===a&&(Qe===4||Qe===3&&(xe&62914560)===xe&&300>Ft()-Ba?(Ee&2)===0&&Rs(i,0):Nf|=a,Os===xe&&(Os=0)),Vn(i)}function Py(i,l){l===0&&(l=Hm()),i=Si(i,l),i!==null&&(fl(i,l),Vn(i))}function lk(i){var l=i.memoizedState,a=0;l!==null&&(a=l.retryLane),Py(i,a)}function ok(i,l){var a=0;switch(i.tag){case 31:case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(a=m.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Py(i,a)}function ak(i,l){return Pu(i,l)}var qa=null,Ls=null,Rf=!1,Pa=!1,zf=!1,Ir=0;function Vn(i){i!==Ls&&i.next===null&&(Ls===null?qa=Ls=i:Ls=Ls.next=i),Pa=!0,Rf||(Rf=!0,uk())}function Gl(i,l){if(!zf&&Pa){zf=!0;do for(var a=!1,d=qa;d!==null;){if(i!==0){var m=d.pendingLanes;if(m===0)var y=0;else{var C=d.suspendedLanes,N=d.pingedLanes;y=(1<<31-Xt(42|i)+1)-1,y&=m&~(C&~N),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Fy(d,y))}else y=xe,y=Fo(d,d===He?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||dl(d,y)||(a=!0,Fy(d,y));d=d.next}while(a);zf=!1}}function ck(){Ky()}function Ky(){Pa=Rf=!1;var i=0;Ir!==0&&vk()&&(i=Ir);for(var l=Ft(),a=null,d=qa;d!==null;){var m=d.next,y=Gy(d,l);y===0?(d.next=null,a===null?qa=m:a.next=m,m===null&&(Ls=a)):(a=d,(i!==0||(y&3)!==0)&&(Pa=!0)),d=m}ht!==0&&ht!==5||Gl(i),Ir!==0&&(Ir=0)}function Gy(i,l){for(var a=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var C=31-Xt(y),N=1<<C,M=m[C];M===-1?((N&a)===0||(N&d)!==0)&&(m[C]=BC(N,l)):M<=l&&(i.expiredLanes|=N),y&=~N}if(l=He,a=xe,a=Fo(i,i===l?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,a===0||i===l&&(Ae===2||Ae===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Ku(d),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||dl(i,a)){if(l=a&-a,l===i.callbackPriority)return l;switch(d!==null&&Ku(d),Fu(a)){case 2:case 8:a=Bm;break;case 32:a=Po;break;case 268435456:a=_m;break;default:a=Po}return d=Yy.bind(null,i),a=Pu(a,d),i.callbackPriority=l,i.callbackNode=a,l}return d!==null&&d!==null&&Ku(d),i.callbackPriority=2,i.callbackNode=null,2}function Yy(i,l){if(ht!==0&&ht!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Ia()&&i.callbackNode!==a)return null;var d=xe;return d=Fo(i,i===He?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Ty(i,d,l),Gy(i,Ft()),i.callbackNode!=null&&i.callbackNode===a?Yy.bind(null,i):null)}function Fy(i,l){if(Ia())return null;Ty(i,l,!0)}function uk(){Ck(function(){(Ee&6)!==0?Pu(Lm,ck):Ky()})}function Lf(){if(Ir===0){var i=vs;i===0&&(i=Ko,Ko<<=1,(Ko&261888)===0&&(Ko=256)),Ir=i}return Ir}function Jy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wo(""+i)}function Xy(i,l){var a=l.ownerDocument.createElement("input");return a.name=l.name,a.value=l.value,i.id&&a.setAttribute("form",i.id),l.parentNode.insertBefore(a,l),i=new FormData(i),a.parentNode.removeChild(a),i}function dk(i,l,a,d,m){if(l==="submit"&&a&&a.stateNode===m){var y=Jy((m[Ut]||null).action),C=d.submitter;C&&(l=(l=C[Ut]||null)?Jy(l.formAction):C.getAttribute("formAction"),l!==null&&(y=l,C=null));var N=new na("action","action",null,d,m);i.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ir!==0){var M=C?Xy(m,C):new FormData(m);ef(a,{pending:!0,data:M,method:m.method,action:y},null,M)}}else typeof y=="function"&&(N.preventDefault(),M=C?Xy(m,C):new FormData(m),ef(a,{pending:!0,data:M,method:m.method,action:y},y,M))},currentTarget:m}]})}}for(var Bf=0;Bf<yd.length;Bf++){var _f=yd[Bf],fk=_f.toLowerCase(),hk=_f[0].toUpperCase()+_f.slice(1);kn(fk,"on"+hk)}kn(Mg,"onAnimationEnd"),kn(Tg,"onAnimationIteration"),kn(Ag,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(Aw,"onTransitionRun"),kn(jw,"onTransitionStart"),kn(Ow,"onTransitionCancel"),kn(jg,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function Qy(i,l){l=(l&4)!==0;for(var a=0;a<i.length;a++){var d=i[a],m=d.event;d=d.listeners;e:{var y=void 0;if(l)for(var C=d.length-1;0<=C;C--){var N=d[C],M=N.instance,z=N.currentTarget;if(N=N.listener,M!==y&&m.isPropagationStopped())break e;y=N,m.currentTarget=z;try{y(m)}catch(V){sa(V)}m.currentTarget=null,y=M}else for(C=0;C<d.length;C++){if(N=d[C],M=N.instance,z=N.currentTarget,N=N.listener,M!==y&&m.isPropagationStopped())break e;y=N,m.currentTarget=z;try{y(m)}catch(V){sa(V)}m.currentTarget=null,y=M}}}}function be(i,l){var a=l[Ju];a===void 0&&(a=l[Ju]=new Set);var d=i+"__bubble";a.has(d)||(Wy(l,i,2,!1),a.add(d))}function Hf(i,l,a){var d=0;l&&(d|=4),Wy(a,i,d,l)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Uf(i){if(!i[Ka]){i[Ka]=!0,Km.forEach(function(a){a!=="selectionchange"&&(pk.has(a)||Hf(a,!1,i),Hf(a,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Ka]||(l[Ka]=!0,Hf("selectionchange",!1,l))}}function Wy(i,l,a,d){switch(Mb(l)){case 2:var m=Ik;break;case 8:m=qk;break;default:m=eh}a=m.bind(null,l,a,i),m=void 0,!id||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(l,a,{capture:!0,passive:m}):i.addEventListener(l,a,!0):m!==void 0?i.addEventListener(l,a,{passive:m}):i.addEventListener(l,a,!1)}function Vf(i,l,a,d,m){var y=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var N=d.stateNode.containerInfo;if(N===m)break;if(C===4)for(C=d.return;C!==null;){var M=C.tag;if((M===3||M===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;N!==null;){if(C=ns(N),C===null)return;if(M=C.tag,M===5||M===6||M===26||M===27){d=y=C;continue e}N=N.parentNode}}d=d.return}rg(function(){var z=y,V=nd(a),q=[];e:{var L=Og.get(i);if(L!==void 0){var _=na,ne=i;switch(i){case"keypress":if(ea(a)===0)break e;case"keydown":case"keyup":_=ow;break;case"focusin":ne="focus",_=ad;break;case"focusout":ne="blur",_=ad;break;case"beforeblur":case"afterblur":_=ad;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=JC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=uw;break;case Mg:case Tg:case Ag:_=WC;break;case jg:_=fw;break;case"scroll":case"scrollend":_=YC;break;case"wheel":_=pw;break;case"copy":case"cut":case"paste":_=ew;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=ag;break;case"toggle":case"beforetoggle":_=gw}var ce=(l&4)!==0,Le=!ce&&(i==="scroll"||i==="scrollend"),D=ce?L!==null?L+"Capture":null:L;ce=[];for(var T=z,R;T!==null;){var I=T;if(R=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||R===null||D===null||(I=ml(T,D),I!=null&&ce.push(Fl(T,I,R))),Le)break;T=T.return}0<ce.length&&(L=new _(L,ne,null,a,V),q.push({event:L,listeners:ce}))}}if((l&7)===0){e:{if(L=i==="mouseover"||i==="pointerover",_=i==="mouseout"||i==="pointerout",L&&a!==td&&(ne=a.relatedTarget||a.fromElement)&&(ns(ne)||ne[ts]))break e;if((_||L)&&(L=V.window===V?V:(L=V.ownerDocument)?L.defaultView||L.parentWindow:window,_?(ne=a.relatedTarget||a.toElement,_=z,ne=ne?ns(ne):null,ne!==null&&(Le=o(ne),ce=ne.tag,ne!==Le||ce!==5&&ce!==27&&ce!==6)&&(ne=null)):(_=null,ne=z),_!==ne)){if(ce=lg,I="onMouseLeave",D="onMouseEnter",T="mouse",(i==="pointerout"||i==="pointerover")&&(ce=ag,I="onPointerLeave",D="onPointerEnter",T="pointer"),Le=_==null?L:pl(_),R=ne==null?L:pl(ne),L=new ce(I,T+"leave",_,a,V),L.target=Le,L.relatedTarget=R,I=null,ns(V)===z&&(ce=new ce(D,T+"enter",ne,a,V),ce.target=R,ce.relatedTarget=Le,I=ce),Le=I,_&&ne)t:{for(ce=mk,D=_,T=ne,R=0,I=D;I;I=ce(I))R++;I=0;for(var oe=T;oe;oe=ce(oe))I++;for(;0<R-I;)D=ce(D),R--;for(;0<I-R;)T=ce(T),I--;for(;R--;){if(D===T||T!==null&&D===T.alternate){ce=D;break t}D=ce(D),T=ce(T)}ce=null}else ce=null;_!==null&&Zy(q,L,_,ce,!1),ne!==null&&Le!==null&&Zy(q,Le,ne,ce,!0)}}e:{if(L=z?pl(z):window,_=L.nodeName&&L.nodeName.toLowerCase(),_==="select"||_==="input"&&L.type==="file")var ke=gg;else if(pg(L))if(yg)ke=Ew;else{ke=kw;var ie=ww}else _=L.nodeName,!_||_.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?z&&ed(z.elementType)&&(ke=gg):ke=Nw;if(ke&&(ke=ke(i,z))){mg(q,ke,a,V);break e}ie&&ie(i,L,z),i==="focusout"&&z&&L.type==="number"&&z.memoizedProps.value!=null&&Zu(L,"number",L.value)}switch(ie=z?pl(z):window,i){case"focusin":(pg(ie)||ie.contentEditable==="true")&&(fs=ie,pd=z,wl=null);break;case"focusout":wl=pd=fs=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,Ng(q,a,V);break;case"selectionchange":if(Tw)break;case"keydown":case"keyup":Ng(q,a,V)}var pe;if(ud)e:{switch(i){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else ds?fg(i,a)&&(ve="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(cg&&a.locale!=="ko"&&(ds||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&ds&&(pe=ig()):(Er=V,sd="value"in Er?Er.value:Er.textContent,ds=!0)),ie=Ga(z,ve),0<ie.length&&(ve=new og(ve,i,null,a,V),q.push({event:ve,listeners:ie}),pe?ve.data=pe:(pe=hg(a),pe!==null&&(ve.data=pe)))),(pe=bw?xw(i,a):vw(i,a))&&(ve=Ga(z,"onBeforeInput"),0<ve.length&&(ie=new og("onBeforeInput","beforeinput",null,a,V),q.push({event:ie,listeners:ve}),ie.data=pe)),dk(q,i,z,a,V)}Qy(q,l)})}function Fl(i,l,a){return{instance:i,listener:l,currentTarget:a}}function Ga(i,l){for(var a=l+"Capture",d=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=ml(i,a),m!=null&&d.unshift(Fl(i,m,y)),m=ml(i,l),m!=null&&d.push(Fl(i,m,y))),i.tag===3)return d;i=i.return}return[]}function mk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Zy(i,l,a,d,m){for(var y=l._reactName,C=[];a!==null&&a!==d;){var N=a,M=N.alternate,z=N.stateNode;if(N=N.tag,M!==null&&M===d)break;N!==5&&N!==26&&N!==27||z===null||(M=z,m?(z=ml(a,y),z!=null&&C.unshift(Fl(a,z,M))):m||(z=ml(a,y),z!=null&&C.push(Fl(a,z,M)))),a=a.return}C.length!==0&&i.push({event:l,listeners:C})}var gk=/\r\n?/g,yk=/\u0000|\uFFFD/g;function eb(i){return(typeof i=="string"?i:""+i).replace(gk,`
`).replace(yk,"")}function tb(i,l){return l=eb(l),eb(i)===l}function ze(i,l,a,d,m,y){switch(a){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||as(i,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&as(i,""+d);break;case"className":Xo(i,"class",d);break;case"tabIndex":Xo(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Xo(i,a,d);break;case"style":tg(i,d,y);break;case"data":if(l!=="object"){Xo(i,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||a!=="href")){i.removeAttribute(a);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(a);break}d=Wo(""+d),i.setAttribute(a,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(l!=="input"&&ze(i,l,"name",m.name,m,null),ze(i,l,"formEncType",m.formEncType,m,null),ze(i,l,"formMethod",m.formMethod,m,null),ze(i,l,"formTarget",m.formTarget,m,null)):(ze(i,l,"encType",m.encType,m,null),ze(i,l,"method",m.method,m,null),ze(i,l,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(a);break}d=Wo(""+d),i.setAttribute(a,d);break;case"onClick":d!=null&&(i.onclick=Fn);break;case"onScroll":d!=null&&be("scroll",i);break;case"onScrollEnd":d!=null&&be("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(a=d.__html,a!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}a=Wo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,""+d):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":d===!0?i.setAttribute(a,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(a,d):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(a,d):i.removeAttribute(a);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(a):i.setAttribute(a,d);break;case"popover":be("beforetoggle",i),be("toggle",i),Jo(i,"popover",d);break;case"xlinkActuate":Yn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Yn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Yn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Yn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Yn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Yn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Yn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Yn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Yn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Jo(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=KC.get(a)||a,Jo(i,a,d))}}function $f(i,l,a,d,m,y){switch(a){case"style":tg(i,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(a=d.__html,a!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof d=="string"?as(i,d):(typeof d=="number"||typeof d=="bigint")&&as(i,""+d);break;case"onScroll":d!=null&&be("scroll",i);break;case"onScrollEnd":d!=null&&be("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),l=a.slice(2,m?a.length-7:void 0),y=i[Ut]||null,y=y!=null?y[a]:null,typeof y=="function"&&i.removeEventListener(l,y,m),typeof d=="function")){typeof y!="function"&&y!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(l,d,m);break e}a in i?i[a]=d:d===!0?i.setAttribute(a,""):Jo(i,a,d)}}}function Nt(i,l,a){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",i),be("load",i);var d=!1,m=!1,y;for(y in a)if(a.hasOwnProperty(y)){var C=a[y];if(C!=null)switch(y){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:ze(i,l,y,C,a,null)}}m&&ze(i,l,"srcSet",a.srcSet,a,null),d&&ze(i,l,"src",a.src,a,null);return;case"input":be("invalid",i);var N=y=C=m=null,M=null,z=null;for(d in a)if(a.hasOwnProperty(d)){var V=a[d];if(V!=null)switch(d){case"name":m=V;break;case"type":C=V;break;case"checked":M=V;break;case"defaultChecked":z=V;break;case"value":y=V;break;case"defaultValue":N=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,l));break;default:ze(i,l,d,V,a,null)}}Qm(i,y,N,M,z,C,m,!1);return;case"select":be("invalid",i),d=C=y=null;for(m in a)if(a.hasOwnProperty(m)&&(N=a[m],N!=null))switch(m){case"value":y=N;break;case"defaultValue":C=N;break;case"multiple":d=N;default:ze(i,l,m,N,a,null)}l=y,a=C,i.multiple=!!d,l!=null?ls(i,!!d,l,!1):a!=null&&ls(i,!!d,a,!0);return;case"textarea":be("invalid",i),y=m=d=null;for(C in a)if(a.hasOwnProperty(C)&&(N=a[C],N!=null))switch(C){case"value":d=N;break;case"defaultValue":m=N;break;case"children":y=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:ze(i,l,C,N,a,null)}Zm(i,d,m,y);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(d=a[M],d!=null))switch(M){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ze(i,l,M,d,a,null)}return;case"dialog":be("beforetoggle",i),be("toggle",i),be("cancel",i),be("close",i);break;case"iframe":case"object":be("load",i);break;case"video":case"audio":for(d=0;d<Yl.length;d++)be(Yl[d],i);break;case"image":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"embed":case"source":case"link":be("error",i),be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(d=a[z],d!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:ze(i,l,z,d,a,null)}return;default:if(ed(l)){for(V in a)a.hasOwnProperty(V)&&(d=a[V],d!==void 0&&$f(i,l,V,d,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(d=a[N],d!=null&&ze(i,l,N,d,a,null))}function bk(i,l,a,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,C=null,N=null,M=null,z=null,V=null;for(_ in a){var q=a[_];if(a.hasOwnProperty(_)&&q!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":M=q;default:d.hasOwnProperty(_)||ze(i,l,_,null,d,q)}}for(var L in d){var _=d[L];if(q=a[L],d.hasOwnProperty(L)&&(_!=null||q!=null))switch(L){case"type":y=_;break;case"name":m=_;break;case"checked":z=_;break;case"defaultChecked":V=_;break;case"value":C=_;break;case"defaultValue":N=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(137,l));break;default:_!==q&&ze(i,l,L,_,d,q)}}Wu(i,C,N,M,z,V,y,m);return;case"select":_=C=N=L=null;for(y in a)if(M=a[y],a.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":_=M;default:d.hasOwnProperty(y)||ze(i,l,y,null,d,M)}for(m in d)if(y=d[m],M=a[m],d.hasOwnProperty(m)&&(y!=null||M!=null))switch(m){case"value":L=y;break;case"defaultValue":N=y;break;case"multiple":C=y;default:y!==M&&ze(i,l,m,y,d,M)}l=N,a=C,d=_,L!=null?ls(i,!!a,L,!1):!!d!=!!a&&(l!=null?ls(i,!!a,l,!0):ls(i,!!a,a?[]:"",!1));return;case"textarea":_=L=null;for(N in a)if(m=a[N],a.hasOwnProperty(N)&&m!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ze(i,l,N,null,d,m)}for(C in d)if(m=d[C],y=a[C],d.hasOwnProperty(C)&&(m!=null||y!=null))switch(C){case"value":L=m;break;case"defaultValue":_=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&ze(i,l,C,m,d,y)}Wm(i,L,_);return;case"option":for(var ne in a)if(L=a[ne],a.hasOwnProperty(ne)&&L!=null&&!d.hasOwnProperty(ne))switch(ne){case"selected":i.selected=!1;break;default:ze(i,l,ne,null,d,L)}for(M in d)if(L=d[M],_=a[M],d.hasOwnProperty(M)&&L!==_&&(L!=null||_!=null))switch(M){case"selected":i.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:ze(i,l,M,L,d,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)L=a[ce],a.hasOwnProperty(ce)&&L!=null&&!d.hasOwnProperty(ce)&&ze(i,l,ce,null,d,L);for(z in d)if(L=d[z],_=a[z],d.hasOwnProperty(z)&&L!==_&&(L!=null||_!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,l));break;default:ze(i,l,z,L,d,_)}return;default:if(ed(l)){for(var Le in a)L=a[Le],a.hasOwnProperty(Le)&&L!==void 0&&!d.hasOwnProperty(Le)&&$f(i,l,Le,void 0,d,L);for(V in d)L=d[V],_=a[V],!d.hasOwnProperty(V)||L===_||L===void 0&&_===void 0||$f(i,l,V,L,d,_);return}}for(var D in a)L=a[D],a.hasOwnProperty(D)&&L!=null&&!d.hasOwnProperty(D)&&ze(i,l,D,null,d,L);for(q in d)L=d[q],_=a[q],!d.hasOwnProperty(q)||L===_||L==null&&_==null||ze(i,l,q,L,d,_)}function nb(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,a=performance.getEntriesByType("resource"),d=0;d<a.length;d++){var m=a[d],y=m.transferSize,C=m.initiatorType,N=m.duration;if(y&&N&&nb(C)){for(C=0,N=m.responseEnd,d+=1;d<a.length;d++){var M=a[d],z=M.startTime;if(z>N)break;var V=M.transferSize,q=M.initiatorType;V&&nb(q)&&(M=M.responseEnd,C+=V*(M<N?1:(N-z)/(M-z)))}if(--d,l+=8*(y+C)/(m.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var If=null,qf=null;function Ya(i){return i.nodeType===9?i:i.ownerDocument}function rb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ib(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Pf(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Kf=null;function vk(){var i=window.event;return i&&i.type==="popstate"?i===Kf?!1:(Kf=i,!0):(Kf=null,!1)}var sb=typeof setTimeout=="function"?setTimeout:void 0,Sk=typeof clearTimeout=="function"?clearTimeout:void 0,lb=typeof Promise=="function"?Promise:void 0,Ck=typeof queueMicrotask=="function"?queueMicrotask:typeof lb<"u"?function(i){return lb.resolve(null).then(i).catch(wk)}:sb;function wk(i){setTimeout(function(){throw i})}function qr(i){return i==="head"}function ob(i,l){var a=l,d=0;do{var m=a.nextSibling;if(i.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(d===0){i.removeChild(m),Us(l);return}d--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")d++;else if(a==="html")Jl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Jl(a);for(var y=a.firstChild;y;){var C=y.nextSibling,N=y.nodeName;y[hl]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=C}}else a==="body"&&Jl(i.ownerDocument.body);a=m}while(a);Us(l)}function ab(i,l){var a=i;i=0;do{var d=a.nextSibling;if(a.nodeType===1?l?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(l?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=d}while(a)}function Gf(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var a=l;switch(l=l.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gf(a),Xu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function kk(i,l,a,d){for(;i.nodeType===1;){var m=a;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[hl])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=gn(i.nextSibling),i===null)break}return null}function Nk(i,l,a){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gn(i.nextSibling),i===null))return null;return i}function cb(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=gn(i.nextSibling),i===null))return null;return i}function Yf(i){return i.data==="$?"||i.data==="$~"}function Ff(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Ek(i,l){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||a.readyState!=="loading")l();else{var d=function(){l(),a.removeEventListener("DOMContentLoaded",d)};a.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function gn(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var Jf=null;function ub(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(l===0)return gn(i.nextSibling);l--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||l++}i=i.nextSibling}return null}function db(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(l===0)return i;l--}else a!=="/$"&&a!=="/&"||l++}i=i.previousSibling}return null}function fb(i,l,a){switch(l=Ya(a),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Jl(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Xu(i)}var yn=new Map,hb=new Set;function Fa(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ur=W.d;W.d={f:Mk,r:Tk,D:Ak,C:jk,L:Ok,m:Dk,X:zk,S:Rk,M:Lk};function Mk(){var i=ur.f(),l=Ua();return i||l}function Tk(i){var l=rs(i);l!==null&&l.tag===5&&l.type==="form"?j0(l):ur.r(i)}var Bs=typeof document>"u"?null:document;function pb(i,l,a){var d=Bs;if(d&&typeof l=="string"&&l){var m=cn(l);m='link[rel="'+i+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),hb.has(m)||(hb.add(m),i={rel:i,crossOrigin:a,href:l},d.querySelector(m)===null&&(l=d.createElement("link"),Nt(l,"link",i),pt(l),d.head.appendChild(l)))}}function Ak(i){ur.D(i),pb("dns-prefetch",i,null)}function jk(i,l){ur.C(i,l),pb("preconnect",i,l)}function Ok(i,l,a){ur.L(i,l,a);var d=Bs;if(d&&i&&l){var m='link[rel="preload"][as="'+cn(l)+'"]';l==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+cn(a.imageSizes)+'"]')):m+='[href="'+cn(i)+'"]';var y=m;switch(l){case"style":y=_s(i);break;case"script":y=Hs(i)}yn.has(y)||(i=g({rel:"preload",href:l==="image"&&a&&a.imageSrcSet?void 0:i,as:l},a),yn.set(y,i),d.querySelector(m)!==null||l==="style"&&d.querySelector(Xl(y))||l==="script"&&d.querySelector(Ql(y))||(l=d.createElement("link"),Nt(l,"link",i),pt(l),d.head.appendChild(l)))}}function Dk(i,l){ur.m(i,l);var a=Bs;if(a&&i){var d=l&&typeof l.as=="string"?l.as:"script",m='link[rel="modulepreload"][as="'+cn(d)+'"][href="'+cn(i)+'"]',y=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Hs(i)}if(!yn.has(y)&&(i=g({rel:"modulepreload",href:i},l),yn.set(y,i),a.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(y)))return}d=a.createElement("link"),Nt(d,"link",i),pt(d),a.head.appendChild(d)}}}function Rk(i,l,a){ur.S(i,l,a);var d=Bs;if(d&&i){var m=is(d).hoistableStyles,y=_s(i);l=l||"default";var C=m.get(y);if(!C){var N={loading:0,preload:null};if(C=d.querySelector(Xl(y)))N.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":l},a),(a=yn.get(y))&&Xf(i,a);var M=C=d.createElement("link");pt(M),Nt(M,"link",i),M._p=new Promise(function(z,V){M.onload=z,M.onerror=V}),M.addEventListener("load",function(){N.loading|=1}),M.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Ja(C,l,d)}C={type:"stylesheet",instance:C,count:1,state:N},m.set(y,C)}}}function zk(i,l){ur.X(i,l);var a=Bs;if(a&&i){var d=is(a).hoistableScripts,m=Hs(i),y=d.get(m);y||(y=a.querySelector(Ql(m)),y||(i=g({src:i,async:!0},l),(l=yn.get(m))&&Qf(i,l),y=a.createElement("script"),pt(y),Nt(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function Lk(i,l){ur.M(i,l);var a=Bs;if(a&&i){var d=is(a).hoistableScripts,m=Hs(i),y=d.get(m);y||(y=a.querySelector(Ql(m)),y||(i=g({src:i,async:!0,type:"module"},l),(l=yn.get(m))&&Qf(i,l),y=a.createElement("script"),pt(y),Nt(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function mb(i,l,a,d){var m=(m=ge.current)?Fa(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(l=_s(a.href),a=is(m).hoistableStyles,d=a.get(l),d||(d={type:"style",instance:null,count:0,state:null},a.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=_s(a.href);var y=is(m).hoistableStyles,C=y.get(i);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,C),(y=m.querySelector(Xl(i)))&&!y._p&&(C.instance=y,C.state.loading=5),yn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yn.set(i,a),y||Bk(m,i,a,C.state))),l&&d===null)throw Error(r(528,""));return C}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=a.async,a=a.src,typeof a=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Hs(a),a=is(m).hoistableScripts,d=a.get(l),d||(d={type:"script",instance:null,count:0,state:null},a.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function _s(i){return'href="'+cn(i)+'"'}function Xl(i){return'link[rel="stylesheet"]['+i+"]"}function gb(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function Bk(i,l,a,d){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=i.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Nt(l,"link",a),pt(l),i.head.appendChild(l))}function Hs(i){return'[src="'+cn(i)+'"]'}function Ql(i){return"script[async]"+i}function yb(i,l,a){if(l.count++,l.instance===null)switch(l.type){case"style":var d=i.querySelector('style[data-href~="'+cn(a.href)+'"]');if(d)return l.instance=d,pt(d),d;var m=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),pt(d),Nt(d,"style",m),Ja(d,a.precedence,i),l.instance=d;case"stylesheet":m=_s(a.href);var y=i.querySelector(Xl(m));if(y)return l.state.loading|=4,l.instance=y,pt(y),y;d=gb(a),(m=yn.get(m))&&Xf(d,m),y=(i.ownerDocument||i).createElement("link"),pt(y);var C=y;return C._p=new Promise(function(N,M){C.onload=N,C.onerror=M}),Nt(y,"link",d),l.state.loading|=4,Ja(y,a.precedence,i),l.instance=y;case"script":return y=Hs(a.src),(m=i.querySelector(Ql(y)))?(l.instance=m,pt(m),m):(d=a,(m=yn.get(y))&&(d=g({},a),Qf(d,m)),i=i.ownerDocument||i,m=i.createElement("script"),pt(m),Nt(m,"link",d),i.head.appendChild(m),l.instance=m);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Ja(d,a.precedence,i));return l.instance}function Ja(i,l,a){for(var d=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,y=m,C=0;C<d.length;C++){var N=d[C];if(N.dataset.precedence===l)y=N;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(l=a.nodeType===9?a.head:a,l.insertBefore(i,l.firstChild))}function Xf(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Qf(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Xa=null;function bb(i,l,a){if(Xa===null){var d=new Map,m=Xa=new Map;m.set(a,d)}else m=Xa,d=m.get(a),d||(d=new Map,m.set(a,d));if(d.has(i))return d;for(d.set(i,null),a=a.getElementsByTagName(i),m=0;m<a.length;m++){var y=a[m];if(!(y[hl]||y[St]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(l)||"";C=i+C;var N=d.get(C);N?N.push(y):d.set(C,[y])}}return d}function xb(i,l,a){i=i.ownerDocument||i,i.head.insertBefore(a,l==="title"?i.querySelector("head > title"):null)}function _k(i,l,a){if(a===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Hk(i,l,a,d){if(a.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=_s(d.href),y=l.querySelector(Xl(m));if(y){l=y._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=Qa.bind(i),l.then(i,i)),a.state.loading|=4,a.instance=y,pt(y);return}y=l.ownerDocument||l,d=gb(d),(m=yn.get(m))&&Xf(d,m),y=y.createElement("link"),pt(y);var C=y;C._p=new Promise(function(N,M){C.onload=N,C.onerror=M}),Nt(y,"link",d),a.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,l),(l=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Qa.bind(i),l.addEventListener("load",a),l.addEventListener("error",a))}}var Wf=0;function Uk(i,l){return i.stylesheets&&i.count===0&&Za(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var d=setTimeout(function(){if(i.stylesheets&&Za(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+l);0<i.imgBytes&&Wf===0&&(Wf=62500*xk());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Za(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Wf?50:800)+l);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function Qa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Za(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wa=null;function Za(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wa=new Map,l.forEach(Vk,i),Wa=null,Qa.call(i))}function Vk(i,l){if(!(l.state.loading&4)){var a=Wa.get(i);if(a)var d=a.get(null);else{a=new Map,Wa.set(i,a);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var C=m[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),d=C)}d&&a.set(null,d)}m=l.instance,C=m.getAttribute("data-precedence"),y=a.get(C)||d,y===d&&a.set(null,m),a.set(C,m),this.count++,d=Qa.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),l.state.loading|=4}}var Wl={$$typeof:B,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function $k(i,l,a,d,m,y,C,N,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gu(0),this.hiddenUpdates=Gu(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Sb(i,l,a,d,m,y,C,N,M,z,V,q){return i=new $k(i,l,a,C,M,z,V,q,N),l=1,y===!0&&(l|=24),y=Wt(3,null,null,l),i.current=y,y.stateNode=i,l=jd(),l.refCount++,i.pooledCache=l,l.refCount++,y.memoizedState={element:d,isDehydrated:a,cache:l},zd(y),i}function Cb(i){return i?(i=ms,i):ms}function wb(i,l,a,d,m,y){m=Cb(m),d.context===null?d.context=m:d.pendingContext=m,d=Dr(l),d.payload={element:a},y=y===void 0?null:y,y!==null&&(d.callback=y),a=Rr(i,d,l),a!==null&&(Kt(a,i,l),jl(a,i,l))}function kb(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<l?a:l}}function Zf(i,l){kb(i,l),(i=i.alternate)&&kb(i,l)}function Nb(i){if(i.tag===13||i.tag===31){var l=Si(i,67108864);l!==null&&Kt(l,i,67108864),Zf(i,67108864)}}function Eb(i){if(i.tag===13||i.tag===31){var l=rn();l=Yu(l);var a=Si(i,l);a!==null&&Kt(a,i,l),Zf(i,l)}}var ec=!0;function Ik(i,l,a,d){var m=H.T;H.T=null;var y=W.p;try{W.p=2,eh(i,l,a,d)}finally{W.p=y,H.T=m}}function qk(i,l,a,d){var m=H.T;H.T=null;var y=W.p;try{W.p=8,eh(i,l,a,d)}finally{W.p=y,H.T=m}}function eh(i,l,a,d){if(ec){var m=th(d);if(m===null)Vf(i,l,d,tc,a),Tb(i,d);else if(Kk(m,i,l,a,d))d.stopPropagation();else if(Tb(i,d),l&4&&-1<Pk.indexOf(i)){for(;m!==null;){var y=rs(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=gi(y.pendingLanes);if(C!==0){var N=y;for(N.pendingLanes|=2,N.entangledLanes|=2;C;){var M=1<<31-Xt(C);N.entanglements[1]|=M,C&=~M}Vn(y),(Ee&6)===0&&(_a=Ft()+500,Gl(0))}}break;case 31:case 13:N=Si(y,2),N!==null&&Kt(N,y,2),Ua(),Zf(y,2)}if(y=th(d),y===null&&Vf(i,l,d,tc,a),y===m)break;m=y}m!==null&&d.stopPropagation()}else Vf(i,l,d,null,a)}}function th(i){return i=nd(i),nh(i)}var tc=null;function nh(i){if(tc=null,i=ns(i),i!==null){var l=o(i);if(l===null)i=null;else{var a=l.tag;if(a===13){if(i=c(l),i!==null)return i;i=null}else if(a===31){if(i=u(l),i!==null)return i;i=null}else if(a===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return tc=i,null}function Mb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(AC()){case Lm:return 2;case Bm:return 8;case Po:case jC:return 32;case _m:return 268435456;default:return 32}default:return 32}}var rh=!1,Pr=null,Kr=null,Gr=null,Zl=new Map,eo=new Map,Yr=[],Pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tb(i,l){switch(i){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Zl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(l.pointerId)}}function to(i,l,a,d,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:l,domEventName:a,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},l!==null&&(l=rs(l),l!==null&&Nb(l)),i):(i.eventSystemFlags|=d,l=i.targetContainers,m!==null&&l.indexOf(m)===-1&&l.push(m),i)}function Kk(i,l,a,d,m){switch(l){case"focusin":return Pr=to(Pr,i,l,a,d,m),!0;case"dragenter":return Kr=to(Kr,i,l,a,d,m),!0;case"mouseover":return Gr=to(Gr,i,l,a,d,m),!0;case"pointerover":var y=m.pointerId;return Zl.set(y,to(Zl.get(y)||null,i,l,a,d,m)),!0;case"gotpointercapture":return y=m.pointerId,eo.set(y,to(eo.get(y)||null,i,l,a,d,m)),!0}return!1}function Ab(i){var l=ns(i.target);if(l!==null){var a=o(l);if(a!==null){if(l=a.tag,l===13){if(l=c(a),l!==null){i.blockedOn=l,qm(i.priority,function(){Eb(a)});return}}else if(l===31){if(l=u(a),l!==null){i.blockedOn=l,qm(i.priority,function(){Eb(a)});return}}else if(l===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nc(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var a=th(i.nativeEvent);if(a===null){a=i.nativeEvent;var d=new a.constructor(a.type,a);td=d,a.target.dispatchEvent(d),td=null}else return l=rs(a),l!==null&&Nb(l),i.blockedOn=a,!1;l.shift()}return!0}function jb(i,l,a){nc(i)&&a.delete(l)}function Gk(){rh=!1,Pr!==null&&nc(Pr)&&(Pr=null),Kr!==null&&nc(Kr)&&(Kr=null),Gr!==null&&nc(Gr)&&(Gr=null),Zl.forEach(jb),eo.forEach(jb)}function rc(i,l){i.blockedOn===l&&(i.blockedOn=null,rh||(rh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gk)))}var ic=null;function Ob(i){ic!==i&&(ic=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ic===i&&(ic=null);for(var l=0;l<i.length;l+=3){var a=i[l],d=i[l+1],m=i[l+2];if(typeof d!="function"){if(nh(d||a)===null)continue;break}var y=rs(a);y!==null&&(i.splice(l,3),l-=3,ef(y,{pending:!0,data:m,method:a.method,action:d},d,m))}}))}function Us(i){function l(M){return rc(M,i)}Pr!==null&&rc(Pr,i),Kr!==null&&rc(Kr,i),Gr!==null&&rc(Gr,i),Zl.forEach(l),eo.forEach(l);for(var a=0;a<Yr.length;a++){var d=Yr[a];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Yr.length&&(a=Yr[0],a.blockedOn===null);)Ab(a),a.blockedOn===null&&Yr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(d=0;d<a.length;d+=3){var m=a[d],y=a[d+1],C=m[Ut]||null;if(typeof y=="function")C||Ob(a);else if(C){var N=null;if(y&&y.hasAttribute("formAction")){if(m=y,C=y[Ut]||null)N=C.formAction;else if(nh(m)!==null)continue}else N=C.action;typeof N=="function"?a[d+1]=N:(a.splice(d,3),d-=3),Ob(a)}}}function Db(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(C){return m=C})},focusReset:"manual",scroll:"manual"})}function l(){m!==null&&(m(),m=null),d||setTimeout(a,20)}function a(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(a,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),m!==null&&(m(),m=null)}}}function ih(i){this._internalRoot=i}sc.prototype.render=ih.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var a=l.current,d=rn();wb(a,d,i,l,null,null)},sc.prototype.unmount=ih.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;wb(i.current,2,null,i,null,null),Ua(),l[ts]=null}};function sc(i){this._internalRoot=i}sc.prototype.unstable_scheduleHydration=function(i){if(i){var l=Im();i={blockedOn:null,target:i,priority:l};for(var a=0;a<Yr.length&&l!==0&&l<Yr[a].priority;a++);Yr.splice(a,0,i),a===0&&Ab(i)}};var Rb=e.version;if(Rb!=="19.2.0")throw Error(r(527,Rb,"19.2.0"));W.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(l),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var Yk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{ul=lc.inject(Yk),Jt=lc}catch{}}return ro.createRoot=function(i,l){if(!s(i))throw Error(r(299));var a=!1,d="",m=V0,y=$0,C=I0;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=Sb(i,1,!1,null,null,a,d,null,m,y,C,Db),i[ts]=l.current,Uf(i),new ih(l)},ro.hydrateRoot=function(i,l,a){if(!s(i))throw Error(r(299));var d=!1,m="",y=V0,C=$0,N=I0,M=null;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),l=Sb(i,1,!0,l,a??null,d,m,M,y,C,N,Db),l.context=Cb(null),a=l.current,d=rn(),d=Yu(d),m=Dr(d),m.callback=null,Rr(a,m,d),a=d,l.current.lanes=a,fl(l,a),Vn(l),i[ts]=l.current,Uf(i),new sc(l)},ro.version="19.2.0",ro}var qb;function nN(){if(qb)return oh.exports;qb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oh.exports=tN(),oh.exports}var rN=nN();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pb="popstate";function iN(t={}){function e(r,s){let{pathname:o,search:c,hash:u}=r.location;return Gh("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Co(s)}return lN(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function On(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sN(){return Math.random().toString(36).substring(2,10)}function Kb(t,e){return{usr:t.state,key:t.key,idx:e}}function Gh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?rl(e):e,state:n,key:e&&e.key||r||sN()}}function Co({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function rl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function lN(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,u="POP",f=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let k=p(),E=k==null?null:k-h;h=k,f&&f({action:u,location:w.location,delta:E})}function x(k,E){u="PUSH";let O=Gh(w.location,k,E);h=p()+1;let B=Kb(O,h),G=w.createHref(O);try{c.pushState(B,"",G)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(G)}o&&f&&f({action:u,location:w.location,delta:1})}function v(k,E){u="REPLACE";let O=Gh(w.location,k,E);h=p();let B=Kb(O,h),G=w.createHref(O);c.replaceState(B,"",G),o&&f&&f({action:u,location:w.location,delta:0})}function S(k){return oN(k)}let w={get action(){return u},get location(){return t(s,c)},listen(k){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Pb,g),f=k,()=>{s.removeEventListener(Pb,g),f=null}},createHref(k){return e(s,k)},createURL:S,encodeLocation(k){let E=S(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:x,replace:v,go(k){return c.go(k)}};return w}function oN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Je(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Co(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function U1(t,e,n="/"){return aN(t,e,n,!1)}function aN(t,e,n,r){let s=typeof e=="string"?rl(e):e,o=Sr(s.pathname||"/",n);if(o==null)return null;let c=V1(t);cN(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=vN(o);u=bN(c[f],h,r)}return u}function V1(t,e=[],n=[],r="",s=!1){let o=(c,u,f=s,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&f)return;Je(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=br([r,p.relativePath]),x=n.concat(p);c.children&&c.children.length>0&&(Je(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),V1(c.children,e,x,g,f)),!(c.path==null&&!c.index)&&e.push({path:g,score:gN(g,c.index),routesMeta:x})};return t.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let f of $1(c.path))o(c,u,!0,f)}),e}function $1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=$1(r.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),s&&u.push(...c),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function cN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var uN=/^:[\w-]+$/,dN=3,fN=2,hN=1,pN=10,mN=-2,Gb=t=>t==="*";function gN(t,e){let n=t.split("/"),r=n.length;return n.some(Gb)&&(r+=mN),e&&(r+=fN),n.filter(s=>!Gb(s)).reduce((s,o)=>s+(uN.test(o)?dN:o===""?hN:pN),r)}function yN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function bN(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=Dc({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),x=f.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=Dc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!g)return null;Object.assign(s,g.params),c.push({params:s,pathname:br([o,g.pathname]),pathnameBase:kN(br([o,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(o=br([o,g.pathnameBase]))}return c}function Dc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},x)=>{if(p==="*"){let S=u[x]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const v=u[x];return g&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:t}}function xN(t,e=!1,n=!0){On(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return On(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Sr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?rl(t):t;return{pathname:n?n.startsWith("/")?n:CN(n,e):e,search:NN(r),hash:EN(s)}}function CN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rp(t){let e=wN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function zp(t,e,n,r=!1){let s;typeof t=="string"?s=rl(t):(s={...t},Je(!s.pathname||!s.pathname.includes("?"),dh("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),dh("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),dh("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),g-=1;s.pathname=x.join("/")}u=g>=0?e[g]:"/"}let f=SN(s,u),h=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var br=t=>t.join("/").replace(/\/\/+/g,"/"),kN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var I1=["POST","PUT","PATCH","DELETE"];new Set(I1);var TN=["GET",...I1];new Set(TN);var il=A.createContext(null);il.displayName="DataRouter";var vu=A.createContext(null);vu.displayName="DataRouterState";A.createContext(!1);var q1=A.createContext({isTransitioning:!1});q1.displayName="ViewTransition";var AN=A.createContext(new Map);AN.displayName="Fetchers";var jN=A.createContext(null);jN.displayName="Await";var Dn=A.createContext(null);Dn.displayName="Navigation";var _o=A.createContext(null);_o.displayName="Location";var Rn=A.createContext({outlet:null,matches:[],isDataRoute:!1});Rn.displayName="Route";var Lp=A.createContext(null);Lp.displayName="RouteError";function ON(t,{relative:e}={}){Je(sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Dn),{hash:s,pathname:o,search:c}=Ho(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:br([n,o])),r.createHref({pathname:u,search:c,hash:s})}function sl(){return A.useContext(_o)!=null}function zn(){return Je(sl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(_o).location}var P1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function K1(t){A.useContext(Dn).static||A.useLayoutEffect(t)}function Ln(){let{isDataRoute:t}=A.useContext(Rn);return t?KN():DN()}function DN(){Je(sl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(il),{basename:e,navigator:n}=A.useContext(Dn),{matches:r}=A.useContext(Rn),{pathname:s}=zn(),o=JSON.stringify(Rp(r)),c=A.useRef(!1);return K1(()=>{c.current=!0}),A.useCallback((f,h={})=>{if(On(c.current,P1),!c.current)return;if(typeof f=="number"){n.go(f);return}let p=zp(f,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:br([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,o,s,t])}A.createContext(null);function RN(){let{matches:t}=A.useContext(Rn),e=t[t.length-1];return e?e.params:{}}function Ho(t,{relative:e}={}){let{matches:n}=A.useContext(Rn),{pathname:r}=zn(),s=JSON.stringify(Rp(n));return A.useMemo(()=>zp(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function zN(t,e){return G1(t,e)}function G1(t,e,n,r,s){Je(sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Dn),{matches:c}=A.useContext(Rn),u=c[c.length-1],f=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let O=g&&g.path||"";Y1(h,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let x=zn(),v;if(e){let O=typeof e=="string"?rl(e):e;Je(p==="/"||O.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),v=O}else v=x;let S=v.pathname||"/",w=S;if(p!=="/"){let O=p.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let k=U1(t,{pathname:w});On(g||k!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),On(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=UN(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:br([p,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:br([p,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,n,r,s);return e&&E?A.createElement(_o.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function LN(){let t=PN(),e=MN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,c)}var BN=A.createElement(LN,null),_N=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(Rn.Provider,{value:this.props.routeContext},A.createElement(Lp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HN({routeContext:t,match:e,children:n}){let r=A.useContext(il);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Rn.Provider,{value:t},n)}function UN(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=n?.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);Je(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,f=-1;if(n)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:g,errors:x}=n,v=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||v){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let x,v=!1,S=null,w=null;n&&(x=c&&p.route.id?c[p.route.id]:void 0,S=p.route.errorElement||BN,u&&(f<0&&g===0?(Y1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):f===g&&(v=!0,w=p.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,g+1)),E=()=>{let O;return x?O=S:v?O=w:p.route.Component?O=A.createElement(p.route.Component,null):p.route.element?O=p.route.element:O=h,A.createElement(HN,{match:p,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:O})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(_N,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:E(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):E()},null)}function Bp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VN(t){let e=A.useContext(il);return Je(e,Bp(t)),e}function $N(t){let e=A.useContext(vu);return Je(e,Bp(t)),e}function IN(t){let e=A.useContext(Rn);return Je(e,Bp(t)),e}function _p(t){let e=IN(t),n=e.matches[e.matches.length-1];return Je(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qN(){return _p("useRouteId")}function PN(){let t=A.useContext(Lp),e=$N("useRouteError"),n=_p("useRouteError");return t!==void 0?t:e.errors?.[n]}function KN(){let{router:t}=VN("useNavigate"),e=_p("useNavigate"),n=A.useRef(!1);return K1(()=>{n.current=!0}),A.useCallback(async(s,o={})=>{On(n.current,P1),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var Yb={};function Y1(t,e,n){!e&&!Yb[t]&&(Yb[t]=!0,On(!1,n))}A.memo(GN);function GN({routes:t,future:e,state:n,unstable_onError:r}){return G1(t,void 0,n,r,e)}function F1({to:t,replace:e,state:n,relative:r}){Je(sl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(Dn);On(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(Rn),{pathname:c}=zn(),u=Ln(),f=zp(t,Rp(o),c,r==="path"),h=JSON.stringify(f);return A.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:r})},[u,h,r,e,n]),null}function Mn(t){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){Je(!sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof n=="string"&&(n=rl(n));let{pathname:f="/",search:h="",hash:p="",state:g=null,key:x="default"}=n,v=A.useMemo(()=>{let S=Sr(f,c);return S==null?null:{location:{pathname:S,search:h,hash:p,state:g,key:x},navigationType:r}},[c,f,h,p,g,x,r]);return On(v!=null,`<Router basename="${c}"> is not able to match the URL "${f}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:A.createElement(Dn.Provider,{value:u},A.createElement(_o.Provider,{children:e,value:v}))}function FN({children:t,location:e}){return zN(Yh(t),e)}function Yh(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let o=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Yh(r.props.children,o));return}Je(r.type===Mn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Yh(r.props.children,o)),n.push(c)}),n}var wc="get",kc="application/x-www-form-urlencoded";function Su(t){return t!=null&&typeof t.tagName=="string"}function JN(t){return Su(t)&&t.tagName.toLowerCase()==="button"}function XN(t){return Su(t)&&t.tagName.toLowerCase()==="form"}function QN(t){return Su(t)&&t.tagName.toLowerCase()==="input"}function WN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZN(t,e){return t.button===0&&(!e||e==="_self")&&!WN(t)}var oc=null;function eE(){if(oc===null)try{new FormData(document.createElement("form"),0),oc=!1}catch{oc=!0}return oc}var tE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fh(t){return t!=null&&!tE.has(t)?(On(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kc}"`),null):t}function nE(t,e){let n,r,s,o,c;if(XN(t)){let u=t.getAttribute("action");r=u?Sr(u,e):null,n=t.getAttribute("method")||wc,s=fh(t.getAttribute("enctype"))||kc,o=new FormData(t)}else if(JN(t)||QN(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||u.getAttribute("action");if(r=f?Sr(f,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||wc,s=fh(t.getAttribute("formenctype"))||fh(u.getAttribute("enctype"))||kc,o=new FormData(u,t),!eE()){let{name:h,type:p,value:g}=t;if(p==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,g)}}else{if(Su(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wc,r=null,s=kc,c=t}return o&&s==="text/plain"&&(c=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rE(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Sr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function iE(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function lE(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await iE(o,n);return c.links?c.links():[]}return[]}));return uE(r.flat(1).filter(sE).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Fb(t,e,n,r,s,o){let c=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,u=(f,h)=>n[h].pathname!==f.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,h)=>c(f,h)||u(f,h)):o==="data"?e.filter((f,h)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(c(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let g=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function oE(t,e,{includeHydrateFallback:n}={}){return aE(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function aE(t){return[...new Set(t)]}function cE(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function uE(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(cE(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function J1(){let t=A.useContext(il);return Hp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dE(){let t=A.useContext(vu);return Hp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Up=A.createContext(void 0);Up.displayName="FrameworkContext";function X1(){let t=A.useContext(Up);return Hp(t,"You must render this element inside a <HydratedRouter> element"),t}function fE(t,e){let n=A.useContext(Up),[r,s]=A.useState(!1),[o,c]=A.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,x=A.useRef(null);A.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let w=E=>{E.forEach(O=>{c(O.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return x.current&&k.observe(x.current),()=>{k.disconnect()}}},[t]),A.useEffect(()=>{if(r){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[r]);let v=()=>{s(!0)},S=()=>{s(!1),c(!1)};return n?t!=="intent"?[o,x,{}]:[o,x,{onFocus:io(u,v),onBlur:io(f,S),onMouseEnter:io(h,v),onMouseLeave:io(p,S),onTouchStart:io(g,v)}]:[!1,x,{}]}function io(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function hE({page:t,...e}){let{router:n}=J1(),r=A.useMemo(()=>U1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(mE,{page:t,matches:r,...e}):null}function pE(t){let{manifest:e,routeModules:n}=X1(),[r,s]=A.useState([]);return A.useEffect(()=>{let o=!1;return lE(t,e,n).then(c=>{o||s(c)}),()=>{o=!0}},[t,e,n]),r}function mE({page:t,matches:e,...n}){let r=zn(),{manifest:s,routeModules:o}=X1(),{basename:c}=J1(),{loaderData:u,matches:f}=dE(),h=A.useMemo(()=>Fb(t,e,f,s,r,"data"),[t,e,f,s,r]),p=A.useMemo(()=>Fb(t,e,f,s,r,"assets"),[t,e,f,s,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,w=!1;if(e.forEach(E=>{let O=s.routes[E.route.id];!O||!O.hasLoader||(!h.some(B=>B.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||O.hasClientLoader?w=!0:S.add(E.route.id))}),S.size===0)return[];let k=rE(t,c,"data");return w&&S.size>0&&k.searchParams.set("_routes",e.filter(E=>S.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[c,u,r,s,h,e,t,o]),x=A.useMemo(()=>oE(p,s),[p,s]),v=pE(p);return A.createElement(A.Fragment,null,g.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),x.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),v.map(({key:S,link:w})=>A.createElement("link",{key:S,nonce:n.nonce,...w})))}function gE(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Q1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Q1&&(window.__reactRouterVersion="7.9.4")}catch{}function yE({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=iN({window:n,v5Compat:!0}));let s=r.current,[o,c]=A.useState({action:s.action,location:s.location}),u=A.useCallback(f=>{A.startTransition(()=>c(f))},[c]);return A.useLayoutEffect(()=>s.listen(u),[s,u]),A.createElement(YN,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var W1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cu=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:c,state:u,target:f,to:h,preventScrollReset:p,viewTransition:g,...x},v){let{basename:S}=A.useContext(Dn),w=typeof h=="string"&&W1.test(h),k,E=!1;if(typeof h=="string"&&w&&(k=h,Q1))try{let F=new URL(window.location.href),J=h.startsWith("//")?new URL(F.protocol+h):new URL(h),qe=Sr(J.pathname,S);J.origin===F.origin&&qe!=null?h=qe+J.search+J.hash:E=!0}catch{On(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=ON(h,{relative:s}),[B,G,U]=fE(r,x),Y=SE(h,{replace:c,state:u,target:f,preventScrollReset:p,relative:s,viewTransition:g});function $(F){e&&e(F),F.defaultPrevented||Y(F)}let te=A.createElement("a",{...x,...U,href:k||O,onClick:E||o?e:$,ref:gE(v,G),target:f,"data-discover":!w&&n==="render"?"true":void 0});return B&&!w?A.createElement(A.Fragment,null,te,A.createElement(hE,{page:O})):te});Cu.displayName="Link";var bE=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:c,viewTransition:u,children:f,...h},p){let g=Ho(c,{relative:h.relative}),x=zn(),v=A.useContext(vu),{navigator:S,basename:w}=A.useContext(Dn),k=v!=null&&EE(g)&&u===!0,E=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,O=x.pathname,B=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(O=O.toLowerCase(),B=B?B.toLowerCase():null,E=E.toLowerCase()),B&&w&&(B=Sr(B,w)||B);const G=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let U=O===E||!s&&O.startsWith(E)&&O.charAt(G)==="/",Y=B!=null&&(B===E||!s&&B.startsWith(E)&&B.charAt(E.length)==="/"),$={isActive:U,isPending:Y,isTransitioning:k},te=U?e:void 0,F;typeof r=="function"?F=r($):F=[r,U?"active":null,Y?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let J=typeof o=="function"?o($):o;return A.createElement(Cu,{...h,"aria-current":te,className:F,ref:p,style:J,to:c,viewTransition:u},typeof f=="function"?f($):f)});bE.displayName="NavLink";var xE=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:c=wc,action:u,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:g,...x},v)=>{let S=kE(),w=NE(u,{relative:h}),k=c.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&W1.test(u),O=B=>{if(f&&f(B),B.defaultPrevented)return;B.preventDefault();let G=B.nativeEvent.submitter,U=G?.getAttribute("formmethod")||c;S(G||B.currentTarget,{fetcherKey:e,method:U,navigate:n,replace:s,state:o,relative:h,preventScrollReset:p,viewTransition:g})};return A.createElement("form",{ref:v,method:k,action:w,onSubmit:r?f:O,...x,"data-discover":!E&&t==="render"?"true":void 0})});xE.displayName="Form";function vE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z1(t){let e=A.useContext(il);return Je(e,vE(t)),e}function SE(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:c}={}){let u=Ln(),f=zn(),h=Ho(t,{relative:o});return A.useCallback(p=>{if(ZN(p,e)){p.preventDefault();let g=n!==void 0?n:Co(f)===Co(h);u(t,{replace:g,state:r,preventScrollReset:s,relative:o,viewTransition:c})}},[f,u,h,n,r,e,t,s,o,c])}var CE=0,wE=()=>`__${String(++CE)}__`;function kE(){let{router:t}=Z1("useSubmit"),{basename:e}=A.useContext(Dn),n=qN();return A.useCallback(async(r,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=nE(r,e);if(s.navigate===!1){let p=s.fetcherKey||wE();await t.fetch(p,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function NE(t,{relative:e}={}){let{basename:n}=A.useContext(Dn),r=A.useContext(Rn);Je(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Ho(t||".",{relative:e})},c=zn();if(t==null){o.search=c.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(p=>p==="")){u.delete("index"),f.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:br([n,o.pathname])),Co(o)}function EE(t,{relative:e}={}){let n=A.useContext(q1);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Z1("useViewTransitionState"),s=Ho(t,{relative:e});if(!n.isTransitioning)return!1;let o=Sr(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Sr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Dc(s.pathname,c)!=null||Dc(s.pathname,o)!=null}var ev=H1();const ME=Dp(ev),Vs="http://localhost:3001/api",ll={listar:async()=>{try{const t=await fetch(`${Vs}/clientes`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao listar clientes");return(await t.json()).clientes||[]}catch(t){throw console.error("Erro ao listar clientes:",t),t}},buscarPorId:async t=>{try{const e=await fetch(`${Vs}/clientes/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===404)return null;if(!e.ok)throw new Error("Erro ao buscar cliente");return await e.json()}catch(e){throw console.error("Erro ao buscar cliente:",e),e}},criar:async t=>{try{const e=await fetch(`${Vs}/clientes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.status===409){const n=await e.json();throw new Error(n.error||"CNPJ ou email j cadastrado")}if(!e.ok)throw new Error("Erro ao criar cliente");return await e.json()}catch(e){throw console.error("Erro ao criar cliente:",e),e}},atualizar:async(t,e)=>{try{const n=await fetch(`${Vs}/clientes/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.status===404)throw new Error("Cliente no encontrado");if(!n.ok)throw new Error("Erro ao atualizar cliente");return await n.json()}catch(n){throw console.error("Erro ao atualizar cliente:",n),n}},deletar:async t=>{try{const e=await fetch(`${Vs}/clientes/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(e.status===404)throw new Error("Cliente no encontrado");if(!e.ok)throw new Error("Erro ao deletar cliente");return!0}catch(e){throw console.error("Erro ao deletar cliente:",e),e}},login:async(t,e)=>{try{const n=await fetch(`${Vs}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,senha:e})});if(n.status===401)throw new Error("Credenciais invlidas");if(!n.ok)throw new Error("Erro ao fazer login");return(await n.json()).cliente}catch(n){throw console.error("Erro ao fazer login:",n),n}}},tv=A.createContext(null),TE=[{id:1,email:"admin@exemplo.com",password:"admin123",name:"Administrador",role:"admin"},{id:2,email:"usuario@exemplo.com",password:"user123",name:"Usurio Teste",role:"user"}];function AE({children:t}){const[e,n]=A.useState(null),r=async(c,u,f=!1)=>{if(f)try{const p=(await ll.listar()).find(g=>g.email===c&&g.senha===u);if(p){const g={id:p.id,email:p.email,name:p.razaoSocial,role:"cliente",clienteId:p.id,cnpj:p.cnpj};return n(g),localStorage.setItem("user",JSON.stringify(g)),{success:!0}}return{success:!1,error:"Email ou senha invlidos"}}catch{return{success:!1,error:"Erro ao fazer login"}}else{const h=TE.find(p=>p.email===c&&p.password===u);if(h){const{password:p,...g}=h;return n(g),localStorage.setItem("user",JSON.stringify(g)),{success:!0}}return{success:!1,error:"Email ou senha invlidos"}}},s=()=>{n(null),localStorage.removeItem("user")},o=()=>{const c=localStorage.getItem("user");c&&n(JSON.parse(c))};return b.jsx(tv.Provider,{value:{user:e,login:r,logout:s,checkAuth:o},children:t})}function Zi(){const t=A.useContext(tv);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function jE(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(""),[f,h]=A.useState(!1),{login:p}=Zi(),g=Ln(),x=async v=>{v.preventDefault(),u(""),h(!0);try{const S=await p(t,n);S.success?g("/dashboard"):(u(S.error),h(!1))}catch{u("Erro ao fazer login. Tente novamente."),h(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:b.jsxs("div",{className:"w-full max-w-md",children:[b.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 space-y-8",children:[b.jsxs("div",{className:"text-center space-y-2",children:[b.jsx("div",{className:"flex justify-center mb-4",children:b.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),b.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Bem-vindo"}),b.jsx("p",{className:"text-gray-500",children:"Entre com suas credenciais para continuar"})]}),c&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),b.jsx("span",{className:"text-sm font-medium",children:c})]})}),b.jsxs("form",{onSubmit:x,className:"space-y-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),b.jsx("input",{id:"email",type:"email",value:t,onChange:v=>e(v.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 outline-none",placeholder:"seu@email.com",required:!0})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:b.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),b.jsx("input",{id:"password",type:"password",value:n,onChange:v=>r(v.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 outline-none",placeholder:"",required:!0})]})]}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"remember-me",type:"checkbox",checked:s,onChange:v=>o(v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),b.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Lembrar-me"})]}),b.jsx("a",{href:"#",className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition duration-200",children:"Esqueceu a senha?"})]}),b.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transform transition duration-200 hover:scale-[1.02] active:scale-[0.98]",children:"Entrar"})]}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-300"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Ou continue com"})})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-200",children:[b.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Google"})]}),b.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-200",children:[b.jsx("svg",{className:"w-5 h-5",fill:"#1877F2",viewBox:"0 0 24 24",children:b.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),b.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Facebook"})]})]}),b.jsxs("p",{className:"text-center text-sm text-gray-600",children:["No tem uma conta?"," ",b.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500 transition duration-200",children:"Cadastre-se"})]})]}),b.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-medium text-blue-900",children:" um cliente?"}),b.jsx("p",{className:"text-xs text-blue-700",children:"Acesse o portal para visualizar seus contratos"})]})]}),b.jsx(Cu,{to:"/cliente/login",className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition",children:"Portal do Cliente"})]})}),b.jsx("p",{className:"mt-8 text-center text-sm text-gray-500",children:" 2025 ContraticManage. Todos os direitos reservados."})]})})}function OE(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(!1),f=Ln(),{login:h,user:p}=Zi();A.useEffect(()=>{p&&(p.role==="cliente"?f("/cliente/dashboard"):f("/dashboard"))},[p,f]);const g=async x=>{x.preventDefault(),o(""),u(!0);try{const v=await h(t,n,!0);v.success?f("/cliente/dashboard"):o(v.error||"Erro ao fazer login")}catch{o("Erro ao fazer login. Tente novamente.")}finally{u(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:b.jsxs("div",{className:"max-w-md w-full",children:[b.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:b.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),b.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Portal do Cliente"}),b.jsx("p",{className:"text-gray-600",children:"Acesse seus contratos"})]}),b.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s&&b.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:s}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),b.jsx("input",{type:"email",value:t,onChange:x=>e(x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"seu@email.com",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),b.jsx("input",{type:"password",value:n,onChange:x=>r(x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"",required:!0}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use a senha fornecida pela empresa"})]}),b.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200 font-medium disabled:bg-blue-400 disabled:cursor-not-allowed",children:c?"Entrando...":"Entrar"})]}),b.jsx("div",{className:"mt-6 text-center",children:b.jsx(Cu,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-800 transition",children:"Acessar como administrador"})})]}),b.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:b.jsxs("p",{className:"text-sm text-blue-800",children:[b.jsx("strong",{children:"Ateno:"})," Este  o portal de acesso para clientes. Use o email e senha fornecidos pela empresa."]})})]})})}function DE(){const{user:t,logout:e}=Zi(),n=Ln(),r=zn(),[s,o]=A.useState(null);A.useEffect(()=>{r.state?.message&&(o({message:r.state.message,type:r.state.type||"success"}),n(r.pathname,{replace:!0,state:{}}),setTimeout(()=>{o(null)},5e3))},[r,n]);const c=()=>{e(),n("/login")};return b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("nav",{className:"bg-white shadow-lg",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between h-16",children:[b.jsx("div",{className:"flex items-center",children:b.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:b.jsx("span",{className:"text-white font-bold text-xl",children:"CM"})}),b.jsx("span",{className:"ml-3 text-xl font-bold text-gray-800",children:"ContraticManage"})]})}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsxs("div",{className:"text-right",children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:t?.name}),b.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t?.role})]}),b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:b.jsx("span",{className:"text-white font-semibold",children:t?.name?.charAt(0).toUpperCase()})})]}),b.jsx("button",{onClick:c,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition duration-200",children:"Sair"})]})]})})}),b.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[s&&s.type==="success"&&b.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 animate-fade-in",children:b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex items-start space-x-3",children:[b.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Sucesso!"}),b.jsx("p",{className:"mt-1 text-sm text-green-700",children:s.message})]})]}),b.jsx("button",{onClick:()=>o(null),className:"text-green-400 hover:text-green-600 transition-colors",children:b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),b.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:[b.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Bem-vindo de volta, ",t?.name,"! "]}),b.jsx("p",{className:"text-blue-100",children:"Aqui est um resumo das suas atividades"})]}),b.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsx("button",{onClick:()=>n("/cadastrar-cliente"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200 border-2 border-transparent hover:border-blue-500 group",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:b.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),b.jsxs("div",{className:"text-left",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Cadastrar Cliente"}),b.jsx("p",{className:"text-sm text-gray-500",children:"Adicione um novo cliente ao sistema"})]})]}),b.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),b.jsx("button",{onClick:()=>n("/cadastrar-contrato"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200 border-2 border-transparent hover:border-purple-500 group",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:b.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),b.jsxs("div",{className:"text-left",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Cadastrar Contrato"}),b.jsx("p",{className:"text-sm text-gray-500",children:"Crie um novo contrato no sistema"})]})]}),b.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-purple-500 group-hover:translate-x-1 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),b.jsx("div",{className:"mb-6",children:b.jsx("button",{onClick:()=>n("/clientes-contratos"),className:"w-full bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200 border-2 border-transparent hover:border-green-500 group",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-200",children:b.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),b.jsxs("div",{className:"text-left",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Visualizar Clientes e Contratos"}),b.jsx("p",{className:"text-sm text-gray-500",children:"Veja todos os clientes e seus contratos"})]})]}),b.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-green-500 group-hover:translate-x-1 transition-all duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[b.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Total de Contratos"}),b.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:"24"})]}),b.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),b.jsxs("div",{className:"mt-4",children:[b.jsx("span",{className:"text-green-600 text-sm font-medium",children:" 12%"}),b.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"vs ms anterior"})]})]}),b.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Contratos Ativos"}),b.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:"18"})]}),b.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),b.jsxs("div",{className:"mt-4",children:[b.jsx("span",{className:"text-green-600 text-sm font-medium",children:" 8%"}),b.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"vs ms anterior"})]})]})]})]})]})}const $s="http://localhost:3001/api",Qs={listar:async()=>{try{const t=await fetch(`${$s}/contratos`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao listar contratos");return(await t.json()).contratos||[]}catch(t){throw console.error("Erro ao listar contratos:",t),t}},buscarPorId:async t=>{try{const e=await fetch(`${$s}/contratos/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===404)return null;if(!e.ok)throw new Error("Erro ao buscar contrato");return await e.json()}catch(e){throw console.error("Erro ao buscar contrato:",e),e}},buscarPorCliente:async t=>{try{const e=await fetch(`${$s}/contratos?clienteId=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Erro ao buscar contratos do cliente");return(await e.json()).contratos||[]}catch(e){throw console.error("Erro ao buscar contratos do cliente:",e),e}},criar:async t=>{try{const e=await fetch(`${$s}/contratos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.status===404)throw new Error("Cliente no encontrado");if(!e.ok)throw new Error("Erro ao criar contrato");return await e.json()}catch(e){throw console.error("Erro ao criar contrato:",e),e}},atualizar:async(t,e)=>{try{const n=await fetch(`${$s}/contratos/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.status===404)throw new Error("Contrato no encontrado");if(!n.ok)throw new Error("Erro ao atualizar contrato");return await n.json()}catch(n){throw console.error("Erro ao atualizar contrato:",n),n}},deletar:async t=>{try{const e=await fetch(`${$s}/contratos/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(e.status===404)throw new Error("Contrato no encontrado");if(!e.ok)throw new Error("Erro ao deletar contrato");return!0}catch(e){throw console.error("Erro ao deletar contrato:",e),e}}};function RE(){const{user:t,logout:e}=Zi(),n=Ln(),[r,s]=A.useState([]),[o,c]=A.useState(null),[u,f]=A.useState(!0),[h,p]=A.useState("todos");A.useEffect(()=>{if(!t||t.role!=="cliente"){n("/cliente/login");return}g()},[t,n]);const g=async()=>{try{f(!0);const w=await ll.buscarPorId(t.clienteId);c(w);const k=await Qs.buscarPorCliente(t.clienteId);s(k)}catch(w){console.error("Erro ao carregar dados:",w)}finally{f(!1)}},x=()=>{e(),n("/cliente/login")},v=r.filter(w=>h==="ativos"?w.status==="ativo":h==="inativos"?w.status!=="ativo":!0),S={total:r.length,ativos:r.filter(w=>w.status==="ativo").length,inativos:r.filter(w=>w.status!=="ativo").length};return u?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between items-center py-4",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Portal do Cliente"}),b.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o?.razaoSocial})]}),b.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]})})}),b.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Informaes da Empresa"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"CNPJ"}),b.jsx("p",{className:"font-medium text-gray-800",children:o?.cnpj})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),b.jsx("p",{className:"font-medium text-gray-800",children:o?.email})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Telefone"}),b.jsx("p",{className:"font-medium text-gray-800",children:o?.telefone||"No informado"})]})]})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[b.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Total de Contratos"}),b.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:S.total})]}),b.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),b.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Contratos Ativos"}),b.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:S.ativos})]}),b.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),b.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Contratos Inativos"}),b.jsx("p",{className:"text-3xl font-bold text-gray-600 mt-2",children:S.inativos})]}),b.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:b.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),b.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("button",{onClick:()=>p("todos"),className:`px-4 py-2 rounded-lg transition ${h==="todos"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Todos (",S.total,")"]}),b.jsxs("button",{onClick:()=>p("ativos"),className:`px-4 py-2 rounded-lg transition ${h==="ativos"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Ativos (",S.ativos,")"]}),b.jsxs("button",{onClick:()=>p("inativos"),className:`px-4 py-2 rounded-lg transition ${h==="inativos"?"bg-gray-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Inativos (",S.inativos,")"]})]})}),b.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[b.jsx("div",{className:"p-6 border-b border-gray-200",children:b.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Seus Contratos"})}),v.length===0?b.jsxs("div",{className:"p-12 text-center",children:[b.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),b.jsx("p",{className:"text-gray-600",children:"Nenhum contrato encontrado"})]}):b.jsx("div",{className:"divide-y divide-gray-200",children:v.map(w=>b.jsx("div",{className:"p-6 hover:bg-gray-50 transition cursor-pointer",onClick:()=>n(`/cliente/contrato/${w.id}`),children:b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:w.titulo||"Contrato sem ttulo"}),b.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="ativo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.status||"Pendente"})]}),b.jsx("p",{className:"text-sm text-gray-600 mb-2",children:w.descricao||"Sem descrio"}),b.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[b.jsxs("span",{children:["Criado em: ",new Date(w.dataCadastro).toLocaleDateString("pt-BR")]}),w.dataVigencia&&b.jsxs("span",{children:["Vigncia: ",new Date(w.dataVigencia).toLocaleDateString("pt-BR")]})]})]}),b.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},w.id))})]})]})]})}function zE(t,e){let n=t;return n=n.replace(/<span[^>]*data-type="variable"[^>]*>\{\{([^}]+)\}\}<\/span>/g,"{{$1}}"),Object.keys(e).forEach(r=>{const s=new RegExp(`\\{\\{${r}\\}\\}`,"g");n=n.replace(s,e[r]||"")}),n}function LE(){const{id:t}=RN(),{user:e}=Zi(),n=Ln(),[r,s]=A.useState(null),[o,c]=A.useState(null),[u,f]=A.useState(""),[h,p]=A.useState(!0),[g,x]=A.useState("");A.useEffect(()=>{if(!e||e.role!=="cliente"){n("/cliente/login");return}v()},[t,e,n]);const v=async()=>{try{p(!0),x("");const E=await Qs.buscarPorId(t);if(!E){x("Contrato no encontrado");return}if(E.clienteId!==e.clienteId){x("Voc no tem permisso para visualizar este contrato");return}s(E);const O=await ll.buscarPorId(E.clienteId);if(c(O),E.conteudo){const B={cliente:O,contrato:E,data_atual:new Date().toLocaleDateString("pt-BR"),...E.variaveis},G=zE(E.conteudo,B);f(G)}}catch(E){console.error("Erro ao carregar contrato:",E),x("Erro ao carregar contrato")}finally{p(!1)}},S=()=>{n("/cliente/dashboard")},w=()=>{alert("Funcionalidade de download em desenvolvimento")},k=()=>{window.print()};return h?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando contrato..."})]})}):g?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),b.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Erro"}),b.jsx("p",{className:"text-gray-600 mb-6",children:g}),b.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition",children:"Voltar ao Dashboard"})]})}):b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 print:hidden",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between items-center py-4",children:[b.jsxs("button",{onClick:S,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]}),b.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Baixar PDF"]})]})]})})}),b.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 print:py-0",children:[b.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 print:hidden",children:[b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:r.titulo||"Contrato sem ttulo"}),b.jsx("p",{className:"text-gray-600",children:r.descricao||"Sem descrio"})]}),b.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.status==="ativo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status||"Pendente"})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Data de Criao"}),b.jsx("p",{className:"font-medium text-gray-800",children:new Date(r.dataCadastro).toLocaleDateString("pt-BR")})]}),r.dataVigencia&&b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Data de Vigncia"}),b.jsx("p",{className:"font-medium text-gray-800",children:new Date(r.dataVigencia).toLocaleDateString("pt-BR")})]}),r.valor&&b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Valor"}),b.jsxs("p",{className:"font-medium text-gray-800",children:["R$ ",parseFloat(r.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),b.jsx("div",{className:"bg-white rounded-lg shadow-sm print:shadow-none",children:b.jsx("div",{className:"p-8 print:p-0",children:u?b.jsx("div",{className:"prose prose-sm max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:u}}):b.jsxs("div",{className:"text-center py-12",children:[b.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),b.jsx("p",{className:"text-gray-600",children:"Este contrato no possui contedo"})]})})}),b.jsx("div",{className:"hidden print:block mt-8 pt-8 border-t border-gray-300",children:b.jsxs("div",{className:"text-center text-sm text-gray-600",children:[b.jsxs("p",{children:["Documento gerado em ",new Date().toLocaleDateString("pt-BR")," s ",new Date().toLocaleTimeString("pt-BR")]}),b.jsxs("p",{className:"mt-2",children:[o?.razaoSocial," - CNPJ: ",o?.cnpj]})]})})]})]})}const Fh=t=>{const e=t.replace(/\D/g,"");return e.length<=2?e:e.length<=5?`${e.slice(0,2)}.${e.slice(2)}`:e.length<=8?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5)}`:e.length<=12?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8)}`:`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12,14)}`},nv=t=>t.replace(/\D/g,""),BE=t=>{const e=nv(t);if(e.length!==14||/^(\d)\1+$/.test(e))return!1;let n=e.length-2,r=e.substring(0,n);const s=e.substring(n);let o=0,c=n-7;for(let f=n;f>=1;f--)o+=r.charAt(n-f)*c--,c<2&&(c=9);let u=o%11<2?0:11-o%11;if(u!==parseInt(s.charAt(0)))return!1;n=n+1,r=e.substring(0,n),o=0,c=n-7;for(let f=n;f>=1;f--)o+=r.charAt(n-f)*c--,c<2&&(c=9);return u=o%11<2?0:11-o%11,u===parseInt(s.charAt(1))},_E=t=>t?Fh(t):"",Jh=t=>{const e=t.replace(/\D/g,"");return e.length<=2?e:e.length<=6?`(${e.slice(0,2)}) ${e.slice(2)}`:e.length<=10?`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7,11)}`},HE=t=>t?Jh(t):"",UE=t=>{const e=t.replace(/\D/g,"");return e.length<=5?e:`${e.slice(0,5)}-${e.slice(5,8)}`},VE=t=>t?UE(t):"";function $E(){const t=Ln(),[e,n]=A.useState({razaoSocial:"",cnpj:"",email:"",telefone:"",endereco:""}),[r,s]=A.useState(!1),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,p]=A.useState(null),[g,x]=A.useState(!1),v=B=>{const{name:G,value:U}=B.target;if(G==="cnpj"){const Y=Fh(U);n($=>({...$,[G]:Y})),u&&f("")}else if(G==="telefone"){const Y=Jh(U);n($=>({...$,[G]:Y}))}else n(Y=>({...Y,[G]:U}));o&&c("")},S=B=>{if(B.target.name==="cnpj"){B.preventDefault();const G=B.clipboardData.getData("text"),U=Fh(G);n(Y=>({...Y,cnpj:U})),u&&f(""),o&&c("")}else if(B.target.name==="telefone"){B.preventDefault();const G=B.clipboardData.getData("text"),U=Jh(G);n(Y=>({...Y,telefone:U})),o&&c("")}},w=async B=>{if(B.preventDefault(),c(""),f(""),!BE(e.cnpj)){f("CNPJ invlido");return}s(!0);try{const G={razaoSocial:e.razaoSocial.trim(),cnpj:nv(e.cnpj),email:e.email.trim(),telefone:e.telefone.replace(/\D/g,""),endereco:e.endereco.trim()},U=await ll.criar(G);U.senhaGerada&&p(U.senhaGerada)}catch(G){c(G.message||"Erro ao cadastrar cliente"),s(!1)}},k=()=>{t("/dashboard")},E=()=>{t("/dashboard",{state:{message:"Cliente cadastrado com sucesso!",type:"success"}})},O=()=>{h&&(navigator.clipboard.writeText(h),x(!0),setTimeout(()=>x(!1),2e3))};return b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("nav",{className:"bg-white shadow-lg",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsx("div",{className:"flex justify-between h-16",children:b.jsxs("div",{className:"flex items-center",children:[b.jsx("button",{onClick:k,className:"mr-4 text-gray-600 hover:text-gray-800",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),b.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:b.jsx("span",{className:"text-white font-bold text-xl",children:"CM"})}),b.jsx("span",{className:"ml-3 text-xl font-bold text-gray-800",children:"ContraticManage"})]})]})})})}),b.jsxs("main",{className:"max-w-3xl mx-auto py-6 sm:px-6 lg:px-8",children:[b.jsx("div",{className:"mb-6",children:b.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:b.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),b.jsxs("div",{children:[b.jsx("h1",{className:"text-2xl font-bold",children:"Cadastrar Novo Cliente"}),b.jsx("p",{className:"text-blue-100 text-sm",children:"Preencha os dados do cliente abaixo"})]})]})})}),o&&b.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-start space-x-3",children:[b.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Erro ao cadastrar cliente"}),b.jsx("p",{className:"mt-1 text-sm text-red-700",children:o})]})]})}),b.jsx("div",{className:"bg-white rounded-lg shadow-md p-8",children:b.jsxs("form",{onSubmit:w,className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"razaoSocial",className:"block text-sm font-medium text-gray-700 mb-2",children:"Razo Social *"}),b.jsx("input",{type:"text",id:"razaoSocial",name:"razaoSocial",value:e.razaoSocial,onChange:v,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",placeholder:"Digite a razo social da empresa"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"cnpj",className:"block text-sm font-medium text-gray-700 mb-2",children:"CNPJ *"}),b.jsx("input",{type:"text",id:"cnpj",name:"cnpj",value:e.cnpj,onChange:v,onPaste:S,required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition duration-200 ${u?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"00.000.000/0000-00",maxLength:"18"}),u?b.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u]}):b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Formato: 00.000.000/0000-00"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),b.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:v,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",placeholder:"exemplo@empresa.com"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Email ser usado para login do cliente. Uma senha padro ser gerada automaticamente."})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"telefone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),b.jsx("input",{type:"text",id:"telefone",name:"telefone",value:e.telefone,onChange:v,onPaste:S,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",placeholder:"(00) 00000-0000",maxLength:"15"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Formato: (00) 00000-0000"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"endereco",className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo"}),b.jsx("textarea",{id:"endereco",name:"endereco",value:e.endereco,onChange:v,rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",placeholder:"Rua, nmero, bairro, cidade - Estado"})]}),b.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[b.jsx("button",{type:"button",onClick:k,disabled:r,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),b.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:r?b.jsxs(b.Fragment,{children:[b.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("span",{children:"Cadastrando..."})]}):b.jsx("span",{children:"Cadastrar Cliente"})})]})]})}),b.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-start space-x-3",children:[b.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Informao"}),b.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"Campos obrigatrios (*): Razo Social, CNPJ e Email. Uma senha padro ser gerada automaticamente para o cliente."})]})]})})]}),h&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[b.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto bg-green-100 rounded-full",children:b.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),b.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900 text-center",children:"Cliente Cadastrado com Sucesso!"}),b.jsxs("div",{className:"mt-6 bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4",children:[b.jsxs("div",{className:"flex items-start space-x-3",children:[b.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h4",{className:"text-sm font-semibold text-yellow-800",children:"Senha de Acesso Gerada"}),b.jsx("p",{className:"mt-1 text-xs text-yellow-700",children:"Anote ou copie esta senha. Ela ser necessria para o cliente acessar o sistema."})]})]}),b.jsxs("div",{className:"mt-4 flex items-center justify-between bg-white rounded-lg p-3 border border-yellow-300",children:[b.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[b.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),b.jsx("code",{className:"text-lg font-mono font-bold text-gray-900",children:h})]}),b.jsx("button",{onClick:O,className:"ml-2 px-3 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm font-medium flex items-center space-x-1",children:g?b.jsxs(b.Fragment,{children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),b.jsx("span",{children:"Copiado!"})]}):b.jsxs(b.Fragment,{children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),b.jsx("span",{children:"Copiar"})]})})]})]}),b.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[b.jsxs("p",{className:"text-sm text-gray-700",children:[b.jsx("strong",{children:"Email:"})," ",e.email]}),b.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:[b.jsx("strong",{children:"Senha:"})," ",h]})]}),b.jsx("div",{className:"mt-6 flex justify-center",children:b.jsx("button",{onClick:E,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition duration-200 shadow-lg hover:shadow-xl",children:"Fechar e Voltar ao Dashboard"})})]})})]})}var hh={exports:{}},ph={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb;function IE(){if(Jb)return ph;Jb=1;var t=Bo();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function u(g,x){var v=x(),S=r({inst:{value:v,getSnapshot:x}}),w=S[0].inst,k=S[1];return o(function(){w.value=v,w.getSnapshot=x,f(w)&&k({inst:w})},[g,v,x]),s(function(){return f(w)&&k({inst:w}),g(function(){f(w)&&k({inst:w})})},[g]),c(v),v}function f(g){var x=g.getSnapshot;g=g.value;try{var v=x();return!n(g,v)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return ph.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,ph}var Xb;function rv(){return Xb||(Xb=1,hh.exports=IE()),hh.exports}var iv=rv();function Et(t){this.content=t}Et.prototype={constructor:Et,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),o=r.content.slice();return s==-1?o.push(n||t,e):(o[s+1]=e,n&&(o[s]=n)),new Et(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Et(n)},addToStart:function(t,e){return new Et([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Et(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),o=r.find(t);return s.splice(o==-1?s.length:o,0,e,n),new Et(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Et.from(t),t.size?new Et(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Et.from(t),t.size?new Et(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Et.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Et.from=function(t){if(t instanceof Et)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Et(e)};function sv(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),o=e.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let c=0;s.text[c]==o.text[c];c++)n++;return n}if(s.content.size||o.content.size){let c=sv(s.content,o.content,n+1);if(c!=null)return c}n+=s.nodeSize}}function lv(t,e,n,r){for(let s=t.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let c=t.child(--s),u=e.child(--o),f=c.nodeSize;if(c==u){n-=f,r-=f;continue}if(!c.sameMarkup(u))return{a:n,b:r};if(c.isText&&c.text!=u.text){let h=0,p=Math.min(c.text.length,u.text.length);for(;h<p&&c.text[c.text.length-h-1]==u.text[u.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(c.content.size||u.content.size){let h=lv(c.content,u.content,n-1,r-1);if(h)return h}n-=f,r-=f}}class K{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,o){for(let c=0,u=0;u<n;c++){let f=this.content[c],h=u+f.nodeSize;if(h>e&&r(f,s+u,o||null,c)!==!1&&f.content.size){let p=u+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,n-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let o="",c=!0;return this.nodesBetween(e,n,(u,f)=>{let h=u.isText?u.text.slice(Math.max(e,f)-f,n-f):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(c?c=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new K(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let o=0,c=0;c<n;o++){let u=this.content[o],f=c+u.nodeSize;f>e&&((c<e||f>n)&&(u.isText?u=u.cut(Math.max(0,e-c),Math.min(u.text.length,n-c)):u=u.cut(Math.max(0,e-c-1),Math.min(u.content.size,n-c-1))),r.push(u),s+=u.nodeSize),c=f}return new K(r,s)}cutByIndex(e,n){return e==n?K.empty:e==0&&n==this.content.length?this:new K(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new K(s,o)}addToStart(e){return new K([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new K(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return sv(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return lv(this,e,n,r)}findIndex(e){if(e==0)return ac(0,e);if(e==this.size)return ac(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=e)return o==e?ac(n+1,o):ac(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return K.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new K(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return K.empty;let n,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(n||(n=e.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new K(n||e,r)}static from(e){if(!e)return K.empty;if(e instanceof K)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new K([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}K.empty=new K([],0);const mh={index:0,offset:0};function ac(t,e){return mh.index=t,mh.offset=e,mh}function Rc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Rc(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Rc(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ue=class Xh{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Rc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Xh.none;if(e instanceof Xh)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};Ue.none=[];class zc extends Error{}class Z{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=av(this.content,e+this.openStart,n);return r&&new Z(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Z(ov(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Z.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Z(K.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new Z(e,r,s)}}Z.empty=new Z(K.empty,0,0);function ov(t,e,n){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r),{index:c,offset:u}=t.findIndex(n);if(s==e||o.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(ov(o.content,e-s-1,n-s-1)))}function av(t,e,n,r){let{index:s,offset:o}=t.findIndex(e),c=t.maybeChild(s);if(o==e||c.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=av(c.content,e-o-1,n,c);return u&&t.replaceChild(s,c.copy(u))}function qE(t,e,n){if(n.openStart>t.depth)throw new zc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new zc("Inconsistent open depths");return cv(t,e,n,0)}function cv(t,e,n,r){let s=t.index(r),o=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let c=cv(t,e,n,r+1);return o.copy(o.content.replaceChild(s,c))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let c=t.parent,u=c.content;return Ii(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:c,end:u}=PE(n,t);return Ii(o,dv(t,c,u,e,r))}else return Ii(o,Lc(t,e,r))}function uv(t,e){if(!e.type.compatibleContent(t.type))throw new zc("Cannot join "+e.type.name+" onto "+t.type.name)}function Qh(t,e,n){let r=t.node(n);return uv(r,e.node(n)),r}function $i(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function fo(t,e,n,r){let s=(e||t).node(n),o=0,c=e?e.index(n):s.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&($i(t.nodeAfter,r),o++));for(let u=o;u<c;u++)$i(s.child(u),r);e&&e.depth==n&&e.textOffset&&$i(e.nodeBefore,r)}function Ii(t,e){return t.type.checkContent(e),t.copy(e)}function dv(t,e,n,r,s){let o=t.depth>s&&Qh(t,e,s+1),c=r.depth>s&&Qh(n,r,s+1),u=[];return fo(null,t,s,u),o&&c&&e.index(s)==n.index(s)?(uv(o,c),$i(Ii(o,dv(t,e,n,r,s+1)),u)):(o&&$i(Ii(o,Lc(t,e,s+1)),u),fo(e,n,s,u),c&&$i(Ii(c,Lc(n,r,s+1)),u)),fo(r,null,s,u),new K(u)}function Lc(t,e,n){let r=[];if(fo(null,t,n,r),t.depth>n){let s=Qh(t,e,n+1);$i(Ii(s,Lc(t,e,n+1)),r)}return fo(e,null,n,r),new K(r)}function PE(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)s=e.node(o).copy(K.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class wo{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ue.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let u=r;r=s,s=u}let o=r.marks;for(var c=0;c<o.length;c++)o[c].type.spec.inclusive===!1&&(!s||!o[c].isInSet(s.marks))&&(o=o[c--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Bc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let c=e;;){let{index:u,offset:f}=c.content.findIndex(o),h=o-f;if(r.push(c,u,s+f),!h||(c=c.child(u),c.isText))break;o=h-1,s+=f+1}return new wo(n,r,o)}static resolveCached(e,n){let r=Qb.get(e);if(r)for(let o=0;o<r.elts.length;o++){let c=r.elts[o];if(c.pos==n)return c}else Qb.set(e,r=new KE);let s=r.elts[r.i]=wo.resolve(e,n);return r.i=(r.i+1)%GE,s}}class KE{constructor(){this.elts=[],this.i=0}}const GE=12,Qb=new WeakMap;class Bc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const YE=Object.create(null);class jn{constructor(e,n,r,s=Ue.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||K.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Rc(this.attrs,n||e.defaultAttrs||YE)&&Ue.sameSet(this.marks,r||Ue.none)}copy(e=null){return e==this.content?this:new jn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new jn(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Z.empty;let s=this.resolve(e),o=this.resolve(n),c=r?0:s.sharedDepth(n),u=s.start(c),h=s.node(c).content.cut(s.pos-u,o.pos-u);return new Z(h,s.depth-c,o.depth-c)}replace(e,n,r){return qE(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return wo.resolveCached(this,e)}resolveNoCache(e){return wo.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),fv(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=K.empty,s=0,o=r.childCount){let c=this.contentMatchAt(e).matchFragment(r,s,o),u=c&&c.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let f=s;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),c=o&&o.matchFragment(this.content,n);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ue.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ue.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=K.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}}jn.prototype.text=void 0;class _c extends jn{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):fv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _c(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _c(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function fv(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Yi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new FE(e,n);if(r.next==null)return Yi.empty;let s=hv(r);r.next&&r.err("Unexpected trailing text");let o=tM(eM(s));return nM(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function o(c,u){let f=c.matchFragment(e,r);if(f&&(!n||f.validEnd))return K.from(u.map(h=>h.createAndFill()));for(let h=0;h<c.next.length;h++){let{type:p,next:g}=c.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(g)==-1){s.push(g);let x=o(g,u.concat(p));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let c=[];for(let u=s;u.type;u=u.via)c.push(u.type);return c.reverse()}for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!s.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let c=0;c<r.next.length;c++)o+=(c?", ":"")+r.next[c].type.name+"->"+e.indexOf(r.next[c].next);return o}).join(`
`)}}Yi.empty=new Yi(!0);class FE{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function hv(t){let e=[];do e.push(JE(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function JE(t){let e=[];do e.push(XE(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function XE(t){let e=ZE(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=QE(t,e);else break;return e}function Wb(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function QE(t,e){let n=Wb(t),r=n;return t.eat(",")&&(t.next!="}"?r=Wb(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function WE(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let o in n){let c=n[o];c.isInGroup(e)&&s.push(c)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function ZE(t){if(t.eat("(")){let e=hv(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=WE(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eM(t){let e=[[]];return s(o(t,0),n()),e;function n(){return e.push([])-1}function r(c,u,f){let h={term:f,to:u};return e[c].push(h),h}function s(c,u){c.forEach(f=>f.to=u)}function o(c,u){if(c.type=="choice")return c.exprs.reduce((f,h)=>f.concat(o(h,u)),[]);if(c.type=="seq")for(let f=0;;f++){let h=o(c.exprs[f],u);if(f==c.exprs.length-1)return h;s(h,u=n())}else if(c.type=="star"){let f=n();return r(u,f),s(o(c.expr,f),f),[r(f)]}else if(c.type=="plus"){let f=n();return s(o(c.expr,u),f),s(o(c.expr,f),f),[r(f)]}else{if(c.type=="opt")return[r(u)].concat(o(c.expr,u));if(c.type=="range"){let f=u;for(let h=0;h<c.min;h++){let p=n();s(o(c.expr,f),p),f=p}if(c.max==-1)s(o(c.expr,f),f);else for(let h=c.min;h<c.max;h++){let p=n();r(f,p),s(o(c.expr,f),p),f=p}return[r(f)]}else{if(c.type=="name")return[r(u,void 0,c.value)];throw new Error("Unknown expr type")}}}}function pv(t,e){return e-t}function Zb(t,e){let n=[];return r(e),n.sort(pv);function r(s){let o=t[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let c=0;c<o.length;c++){let{term:u,to:f}=o[c];!u&&n.indexOf(f)==-1&&r(f)}}}function tM(t){let e=Object.create(null);return n(Zb(t,0));function n(r){let s=[];r.forEach(c=>{t[c].forEach(({term:u,to:f})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);Zb(t,f).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new Yi(r.indexOf(t.length-1)>-1);for(let c=0;c<s.length;c++){let u=s[c][1].sort(pv);o.next.push({type:s[c][0],next:e[u.join(",")]||n(u)})}return o}}function nM(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],o=!s.validEnd,c=[];for(let u=0;u<s.next.length;u++){let{type:f,next:h}=s.next[u];c.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function mv(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function gv(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let o=t[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function yv(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let o=t[s];o.validate&&o.validate(e[s])}}function bv(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new iM(t,r,e[r]);return n}let ex=class xv{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=bv(e,r.attrs),this.defaultAttrs=mv(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Yi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:gv(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jn(this,this.computeAttrs(e),K.from(n),Ue.setFrom(r))}createChecked(e=null,n,r){return n=K.from(n),this.checkContent(n),new jn(this,this.computeAttrs(e),n,Ue.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=K.from(n),n.size){let c=this.contentMatch.fillBefore(n);if(!c)return null;n=c.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(K.empty,!0);return o?new jn(this,e,n.append(o),Ue.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){yv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ue.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,c)=>r[o]=new xv(o,n,c));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function rM(t,e,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class iM{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?rM(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class wu{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=bv(e,s.attrs),this.excluded=null;let o=mv(this.attrs);this.instance=o?new Ue(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Ue(this,gv(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((o,c)=>r[o]=new wu(o,s++,n,c)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){yv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class vv{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Et.from(e.nodes),n.marks=Et.from(e.marks||{}),this.nodes=ex.compile(this.spec.nodes,this),this.marks=wu.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],c=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[c]||(r[c]=Yi.parse(c,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?tx(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],c=o.spec.excludes;o.excluded=c==null?[o]:c==""?[]:tx(this,c.split(" "))}this.nodeFromJSON=s=>jn.fromJSON(this,s),this.markFromJSON=s=>Ue.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ex){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new _c(r,r.defaultAttrs,e,Ue.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function tx(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],o=t.marks[s],c=o;if(o)n.push(o);else for(let u in t.marks){let f=t.marks[u];(s=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(s)>-1)&&n.push(c=f)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function sM(t){return t.tag!=null}function lM(t){return t.style!=null}class li{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(sM(s))this.tags.push(s);else if(lM(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new rx(this,n,!1);return r.addAll(e,Ue.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new rx(this,n,!0);return r.addAll(e,Ue.none,n.from,n.to),Z.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(cM(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let c=o.getAttrs(e);if(c===!1)continue;o.attrs=c||void 0}return o}}}matchStyle(e,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let c=this.styles[o],u=c.style;if(!(u.indexOf(e)!=0||c.context&&!r.matchesContext(c.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(c.getAttrs){let f=c.getAttrs(n);if(f===!1)continue;c.attrs=f||void 0}return c}}}static schemaRules(e){let n=[];function r(s){let o=s.priority==null?50:s.priority,c=0;for(;c<n.length;c++){let u=n[c];if((u.priority==null?50:u.priority)<o)break}n.splice(c,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(c=>{r(c=ix(c)),c.mark||c.ignore||c.clearMark||(c.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(c=>{r(c=ix(c)),c.node||c.ignore||c.mark||(c.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new li(e,li.schemaRules(e)))}}const Sv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oM={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Cv={ol:!0,ul:!0},ko=1,Wh=2,ho=4;function nx(t,e,n){return e!=null?(e?ko:0)|(e==="full"?Wh:0):t&&t.whitespace=="pre"?ko|Wh:n&~ho}class cc{constructor(e,n,r,s,o,c){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=c,this.content=[],this.activeMarks=Ue.none,this.match=o||(c&ho?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(K.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ko)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=K.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(K.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Sv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class rx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,c=nx(null,n.preserveWhitespace,0)|(r?ho:0);s?o=new cc(s.type,s.attrs,Ue.none,!0,n.topMatch||s.type.contentMatch,c):r?o=new cc(null,null,Ue.none,!0,null,c):o=new cc(e.schema.topNodeType,null,Ue.none,!0,null,c),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,o=s.options&Wh?"full":this.localPreserveWS||(s.options&ko)>0,{schema:c}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(c.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let f=0;f<u.length;f++)f&&this.insertNode(c.linebreakReplacement.create(),n,!0),u[f]&&this.insertNode(c.text(u[f]),n,!/\S/.test(u[f]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(c.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),u;Cv.hasOwnProperty(c)&&this.parser.normalizeLists&&aM(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:oM.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,n);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,p=this.needsBlock;if(Sv.hasOwnProperty(c))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let g=f&&f.skip?n:this.readStyles(e,n);g&&this.addAll(e,g),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,n);h&&this.addElementByRule(e,f,h,f.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],c=r.getPropertyValue(o);if(c)for(let u=void 0;;){let f=this.parser.matchStyle(o,c,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?n=n.filter(h=>!f.clearMark(h)):n=n.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return n}addElementByRule(e,n,r,s){let o,c;if(n.node)if(c=this.parser.schema.nodes[n.node],c.isLeaf)this.insertNode(c.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(c,n.attrs||null,r,n.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[n.mark];r=r.concat(f.create(n.attrs))}let u=this.top;if(c&&c.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof n.contentElement=="string"?f=e.querySelector(n.contentElement):typeof n.contentElement=="function"?f=n.contentElement(e):n.contentElement&&(f=n.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(u)&&this.open--}addAll(e,n,r,s){let o=r||0;for(let c=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];c!=u;c=c.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(c,n);this.findAtPoint(e,o)}findPlace(e,n,r){let s,o;for(let c=this.open,u=0;c>=0;c--){let f=this.nodes[c],h=f.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,o=f,!h.length))break;if(f.solid){if(r)break;u+=2}}if(!s)return null;this.sync(o);for(let c=0;c<s.length;c++)n=this.enterInner(s[c],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let c=Ue.none;for(let u of s.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):sx(u.type,e.type))&&(c=u.addToSet(c));return o.content.push(e.mark(c)),!0}return!1}enter(e,n,r,s){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,s)),o}enterInner(e,n,r,s=!1,o){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let u=nx(e,o,c.options);c.options&ho&&c.content.length==0&&(u|=ho);let f=Ue.none;return r=r.filter(h=>(c.type?c.type.allowsMarkType(h.type):sx(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new cc(e,n,f,s,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=ko)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),c=(u,f)=>{for(;u>=0;u--){let h=n[u];if(h==""){if(u==n.length-1||u==0)continue;for(;f>=o;f--)if(c(u-1,f))return!0;return!1}else{let p=f>0||f==0&&s?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return c(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function aM(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Cv.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function cM(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ix(t){let e={};for(let n in t)e[n]=t[n];return e}function sx(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let o=[],c=u=>{o.push(u);for(let f=0;f<u.edgeCount;f++){let{type:h,next:p}=u.edge(f);if(h==e||o.indexOf(p)<0&&c(p))return!0}};if(c(s.contentMatch))return!0}}class es{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=gh(n).createDocumentFragment());let s=r,o=[];return e.forEach(c=>{if(o.length||c.marks.length){let u=0,f=0;for(;u<o.length&&f<c.marks.length;){let h=c.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,f++}for(;u<o.length;)s=o.pop()[1];for(;f<c.marks.length;){let h=c.marks[f++],p=this.serializeMark(h,c.isInline,n);p&&(o.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(c,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Nc(gh(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Nc(gh(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Nc(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new es(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=lx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return lx(e.marks)}}function lx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function gh(t){return t.document||window.document}const ox=new WeakMap;function uM(t){let e=ox.get(t);return e===void 0&&ox.set(t,e=dM(t)),e}function dM(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Nc(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=uM(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(n=s.slice(0,c),s=s.slice(c+1));let u,f=n?t.createElementNS(n,s):t.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let x=g.indexOf(" ");x>0?f.setAttributeNS(g.slice(0,x),g.slice(x+1),h[g]):g=="style"&&f.style?f.style.cssText=h[g]:f.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let x=e[g];if(x===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:v,contentDOM:S}=Nc(t,x,n,r);if(f.appendChild(v),S){if(u)throw new RangeError("Multiple content holes");u=S}}}return{dom:f,contentDOM:u}}const wv=65535,kv=Math.pow(2,16);function fM(t,e){return t+e*kv}function ax(t){return t&wv}function hM(t){return(t-(t&wv))/kv}const Nv=1,Ev=2,Ec=4,Mv=8;class Zh{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Mv)>0}get deletedBefore(){return(this.delInfo&(Nv|Ec))>0}get deletedAfter(){return(this.delInfo&(Ev|Ec))>0}get deletedAcross(){return(this.delInfo&Ec)>0}}class sn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&sn.empty)return sn.empty}recover(e){let n=0,r=ax(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+hM(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,o=this.inverted?2:1,c=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?s:0);if(f>e)break;let h=this.ranges[u+o],p=this.ranges[u+c],g=f+h;if(e<=g){let x=h?e==f?-1:e==g?1:n:n,v=f+s+(x<0?0:p);if(r)return v;let S=e==(n<0?f:g)?null:fM(u/3,e-f),w=e==f?Ev:e==g?Nv:Ec;return(n<0?e!=f:e!=g)&&(w|=Mv),new Zh(v,w,S)}s+=p-h}return r?e+s:new Zh(e+s,0,null)}touches(e,n){let r=0,s=ax(n),o=this.inverted?2:1,c=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[u+o],p=f+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+c]-h}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let c=this.ranges[s],u=c-(this.inverted?o:0),f=c+(this.inverted?0:o),h=this.ranges[s+n],p=this.ranges[s+r];e(u,u+h,f,f+p),o+=p-h}}invert(){return new sn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?sn.empty:new sn(e<0?[0,-e,0]:[0,0,e])}}sn.empty=new sn([]);class No{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new No(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new No;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let o=this.from;o<this.to;o++){let c=this._maps[o],u=c.mapResult(e,n);if(u.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new Zh(e,s,null)}}const yh=Object.create(null);class Rt{getMap(){return sn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=yh[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in yh)throw new RangeError("Duplicate use of step JSON ID "+e);return yh[e]=n,n.prototype.jsonID=e,n}}class dt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new dt(e,null)}static fail(e){return new dt(null,e)}static fromReplace(e,n,r,s){try{return dt.ok(e.replace(n,r,s))}catch(o){if(o instanceof zc)return dt.fail(o.message);throw o}}}function Vp(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let o=t.child(s);o.content.size&&(o=o.copy(Vp(o.content,e,o))),o.isInline&&(o=e(o,n,s)),r.push(o)}return K.fromArray(r)}class ri extends Rt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new Z(Vp(n.content,(c,u)=>!c.isAtom||!u.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),s),n.openStart,n.openEnd);return dt.fromReplace(e,this.from,this.to,o)}invert(){return new An(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ri(n.pos,r.pos,this.mark)}merge(e){return e instanceof ri&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ri(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ri(n.from,n.to,e.markFromJSON(n.mark))}}Rt.jsonID("addMark",ri);class An extends Rt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Z(Vp(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return dt.fromReplace(e,this.from,this.to,r)}invert(){return new ri(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new An(n.pos,r.pos,this.mark)}merge(e){return e instanceof An&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new An(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new An(n.from,n.to,e.markFromJSON(n.mark))}}Rt.jsonID("removeMark",An);class ii extends Rt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return dt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return dt.fromReplace(e,this.pos,this.pos+1,new Z(K.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new ii(this.pos,n.marks[s]);return new ii(this.pos,this.mark)}}return new Fi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ii(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ii(n.pos,e.markFromJSON(n.mark))}}Rt.jsonID("addNodeMark",ii);class Fi extends Rt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return dt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return dt.fromReplace(e,this.pos,this.pos+1,new Z(K.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ii(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fi(n.pos,e.markFromJSON(n.mark))}}Rt.jsonID("removeNodeMark",Fi);class gt extends Rt{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&ep(e,this.from,this.to)?dt.fail("Structure replace would overwrite content"):dt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new sn([this.from,this.to-this.from,this.slice.size])}invert(e){return new gt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new gt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof gt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Z.empty:new Z(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new gt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Z.empty:new Z(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new gt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new gt(n.from,n.to,Z.fromJSON(e,n.slice),!!n.structure)}}Rt.jsonID("replace",gt);class bt extends Rt{constructor(e,n,r,s,o,c,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=c,this.structure=u}apply(e){if(this.structure&&(ep(e,this.from,this.gapFrom)||ep(e,this.gapTo,this.to)))return dt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return dt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?dt.fromReplace(e,this.from,this.to,r):dt.fail("Content does not fit in gap")}getMap(){return new sn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new bt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new bt(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new bt(n.from,n.to,n.gapFrom,n.gapTo,Z.fromJSON(e,n.slice),n.insert,!!n.structure)}}Rt.jsonID("replaceAround",bt);function ep(t,e,n){let r=t.resolve(e),s=n-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let c=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,s--}}return!1}function pM(t,e,n,r){let s=[],o=[],c,u;t.doc.nodesBetween(e,n,(f,h,p)=>{if(!f.isInline)return;let g=f.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let x=Math.max(h,e),v=Math.min(h+f.nodeSize,n),S=r.addToSet(g);for(let w=0;w<g.length;w++)g[w].isInSet(S)||(c&&c.to==x&&c.mark.eq(g[w])?c.to=v:s.push(c=new An(x,v,g[w])));u&&u.to==x?u.to=v:o.push(u=new ri(x,v,r))}}),s.forEach(f=>t.step(f)),o.forEach(f=>t.step(f))}function mM(t,e,n,r){let s=[],o=0;t.doc.nodesBetween(e,n,(c,u)=>{if(!c.isInline)return;o++;let f=null;if(r instanceof wu){let h=c.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(c.marks)&&(f=[r]):f=c.marks;if(f&&f.length){let h=Math.min(u+c.nodeSize,n);for(let p=0;p<f.length;p++){let g=f[p],x;for(let v=0;v<s.length;v++){let S=s[v];S.step==o-1&&g.eq(s[v].style)&&(x=S)}x?(x.to=h,x.step=o):s.push({style:g,from:Math.max(u,e),to:h,step:o})}}}),s.forEach(c=>t.step(new An(c.from,c.to,c.style)))}function $p(t,e,n,r=n.contentMatch,s=!0){let o=t.doc.nodeAt(e),c=[],u=e+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),p=u+h.nodeSize,g=r.matchType(h.type);if(!g)c.push(new gt(u,p,Z.empty));else{r=g;for(let x=0;x<h.marks.length;x++)n.allowsMarkType(h.marks[x].type)||t.step(new An(u,p,h.marks[x]));if(s&&h.isText&&n.whitespace!="pre"){let x,v=/\r?\n|\r/g,S;for(;x=v.exec(h.text);)S||(S=new Z(K.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),c.push(new gt(u+x.index,u+x.index+x[0].length,S))}}u=p}if(!r.validEnd){let f=r.fillBefore(K.empty,!0);t.replace(u,u,new Z(f,0,0))}for(let f=c.length-1;f>=0;f--)t.step(c[f])}function gM(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ol(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),o=t.$from.index(r),c=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(o,c,n))return r;if(r==0||s.type.spec.isolating||!gM(s,o,c))break}return null}function yM(t,e,n){let{$from:r,$to:s,depth:o}=e,c=r.before(o+1),u=s.after(o+1),f=c,h=u,p=K.empty,g=0;for(let S=o,w=!1;S>n;S--)w||r.index(S)>0?(w=!0,p=K.from(r.node(S).copy(p)),g++):f--;let x=K.empty,v=0;for(let S=o,w=!1;S>n;S--)w||s.after(S+1)<s.end(S)?(w=!0,x=K.from(s.node(S).copy(x)),v++):h++;t.step(new bt(f,h,c,u,new Z(p.append(x),g,v),p.size-g,!0))}function Ip(t,e,n=null,r=t){let s=bM(t,e),o=s&&xM(r,e);return o?s.map(cx).concat({type:e,attrs:n}).concat(o.map(cx)):null}function cx(t){return{type:t,attrs:null}}function bM(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let c=o.length?o[0]:e;return n.canReplaceWith(r,s,c)?o:null}function xM(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.child(r),c=e.contentMatch.findWrapping(o.type);if(!c)return null;let f=(c.length?c[c.length-1]:e).contentMatch;for(let h=r;f&&h<s;h++)f=f.matchType(n.child(h).type);return!f||!f.validEnd?null:c}function vM(t,e,n){let r=K.empty;for(let c=n.length-1;c>=0;c--){if(r.size){let u=n[c].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=K.from(n[c].type.create(n[c].attrs,r))}let s=e.start,o=e.end;t.step(new bt(s,o,s,o,new Z(r,0,0),n.length,!0))}function SM(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(c,u)=>{let f=typeof s=="function"?s(c):s;if(c.isTextblock&&!c.hasMarkup(r,f)&&CM(t.doc,t.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!S?h=!1:!v&&S&&(h=!0)}h===!1&&Av(t,c,u,o),$p(t,t.mapping.slice(o).map(u,1),r,void 0,h===null);let p=t.mapping.slice(o),g=p.map(u,1),x=p.map(u+c.nodeSize,1);return t.step(new bt(g,x,g+1,x-1,new Z(K.from(r.create(f,null,c.marks)),0,0),1,!0)),h===!0&&Tv(t,c,u,o),!1}})}function Tv(t,e,n,r){e.forEach((s,o)=>{if(s.isText){let c,u=/\r?\n|\r/g;for(;c=u.exec(s.text);){let f=t.mapping.slice(r).map(n+1+o+c.index);t.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function Av(t,e,n,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let c=t.mapping.slice(r).map(n+1+o);t.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function CM(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function wM(t,e,n,r,s){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let c=n.create(r,null,s||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,c);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new bt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Z(K.from(c),0,0),1,!0))}function xr(t,e,n=1,r){let s=t.resolve(e),o=s.depth-n,c=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!c.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=n-2;h>o;h--,p--){let g=s.node(h),x=s.index(h);if(g.type.spec.isolating)return!1;let v=g.content.cutByIndex(x,g.childCount),S=r&&r[p+1];S&&(v=v.replaceChild(0,S.type.create(S.attrs)));let w=r&&r[p]||g;if(!g.canReplace(x+1,g.childCount)||!w.type.validContent(v))return!1}let u=s.indexAfter(o),f=r&&r[0];return s.node(o).canReplaceWith(u,u,f?f.type:s.node(o+1).type)}function kM(t,e,n=1,r){let s=t.doc.resolve(e),o=K.empty,c=K.empty;for(let u=s.depth,f=s.depth-n,h=n-1;u>f;u--,h--){o=K.from(s.node(u).copy(o));let p=r&&r[h];c=K.from(p?p.type.create(p.attrs,c):s.node(u).copy(c))}t.step(new gt(e,e,new Z(o.append(c),n,n),!0))}function hi(t,e){let n=t.resolve(e),r=n.index();return jv(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function NM(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),c=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(c),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function jv(t,e){return!!(t&&e&&!t.isLeaf&&NM(t,e))}function ku(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let o,c,u=r.index(s);if(s==r.depth?(o=r.nodeBefore,c=r.nodeAfter):n>0?(o=r.node(s+1),u++,c=r.node(s).maybeChild(u)):(o=r.node(s).maybeChild(u-1),c=r.node(s+1)),o&&!o.isTextblock&&jv(o,c)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function EM(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,o=t.doc.resolve(e-n),c=o.node().type;if(s&&c.inlineContent){let p=c.whitespace=="pre",g=!!c.contentMatch.matchType(s);p&&!g?r=!1:!p&&g&&(r=!0)}let u=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);Av(t,p.node(),p.before(),u)}c.inlineContent&&$p(t,e+n-1,c,o.node().contentMatchAt(o.index()),r==null);let f=t.mapping.slice(u),h=f.map(e-n);if(t.step(new gt(h,f.map(e+n,-1),Z.empty,!0)),r===!0){let p=t.doc.resolve(h);Tv(t,p.node(),p.before(),t.steps.length)}return t}function MM(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function Ov(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let c=r.depth;c>=0;c--){let u=c==r.depth?0:r.pos<=(r.start(c+1)+r.end(c+1))/2?-1:1,f=r.index(c)+(u>0?1:0),h=r.node(c),p=!1;if(o==1)p=h.canReplace(f,f,s);else{let g=h.contentMatchAt(f).findWrapping(s.firstChild.type);p=g&&h.canReplaceWith(f,f,g[0])}if(p)return u==0?r.pos:u<0?r.before(c+1):r.after(c+1)}return null}function Nu(t,e,n=e,r=Z.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),o=t.resolve(n);return Dv(s,o,r)?new gt(e,n,r):new TM(s,o,r).fit()}function Dv(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class TM{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=K.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=K.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,c=r.depth,u=s.depth;for(;c&&u&&o.childCount==1;)o=o.firstChild.content,c--,u--;let f=new Z(o,c,u);return e>-1?new bt(r.pos,e,this.$to.pos,this.$to.end(),f,n):f.size||r.pos!=this.$to.pos?new gt(r.pos,s.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=bh(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let c=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:h}=this.frontier[u],p,g=null;if(n==1&&(c?h.matchType(c.type)||(g=h.fillBefore(K.from(c),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:g};if(n==2&&c&&(p=h.findWrapping(c.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=bh(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Z(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=bh(e,n);if(s.childCount<=1&&n>0){let o=e.size-n<=n+s.size;this.unplaced=new Z(oo(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Z(oo(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let w=0;w<o.length;w++)this.openFrontierNode(o[w]);let c=this.unplaced,u=r?r.content:c.content,f=c.openStart-e,h=0,p=[],{match:g,type:x}=this.frontier[n];if(s){for(let w=0;w<s.childCount;w++)p.push(s.child(w));g=g.matchFragment(s)}let v=u.size+e-(c.content.size-c.openEnd);for(;h<u.childCount;){let w=u.child(h),k=g.matchType(w.type);if(!k)break;h++,(h>1||f==0||w.content.size)&&(g=k,p.push(Rv(w.mark(x.allowedMarks(w.marks)),h==1?f:0,h==u.childCount?v:-1)))}let S=h==u.childCount;S||(v=-1),this.placed=ao(this.placed,n,K.from(p)),this.frontier[n].match=g,S&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,k=u;w<v;w++){let E=k.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),k=E.content}this.unplaced=S?e==0?Z.empty:new Z(oo(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new Z(oo(c.content,e,h),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!xh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),c=xh(e,n,s,r,o);if(c){for(let u=n-1;u>=0;u--){let{match:f,type:h}=this.frontier[u],p=xh(e,u,h,f,!0);if(!p||p.childCount)continue e}return{depth:n,fit:c,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ao(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=ao(this.placed,this.depth,K.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(K.empty,!0);n.childCount&&(this.placed=ao(this.placed,this.frontier.length,n))}}function oo(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(oo(t.firstChild.content,e-1,n)))}function ao(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ao(t.lastChild.content,e-1,n)))}function bh(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Rv(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Rv(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(K.empty,!0)))),t.copy(r)}function xh(t,e,n,r,s){let o=t.node(e),c=s?t.indexAfter(e):t.index(e);if(c==o.childCount&&!n.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,c);return u&&!AM(n,o.content,c)?u:null}function AM(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jM(t){return t.spec.defining||t.spec.definingForContent}function OM(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),o=t.doc.resolve(n);if(Dv(s,o,r))return t.step(new gt(e,n,r));let c=Lv(s,t.doc.resolve(n));c[c.length-1]==0&&c.pop();let u=-(s.depth+1);c.unshift(u);for(let x=s.depth,v=s.pos-1;x>0;x--,v--){let S=s.node(x).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;c.indexOf(x)>-1?u=x:s.before(x)==v&&c.splice(1,0,-x)}let f=c.indexOf(u),h=[],p=r.openStart;for(let x=r.content,v=0;;v++){let S=x.firstChild;if(h.push(S),v==r.openStart)break;x=S.content}for(let x=p-1;x>=0;x--){let v=h[x],S=jM(v.type);if(S&&!v.sameMarkup(s.node(Math.abs(u)-1)))p=x;else if(S||!v.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let v=(x+p+1)%(r.openStart+1),S=h[v];if(S)for(let w=0;w<c.length;w++){let k=c[(w+f)%c.length],E=!0;k<0&&(E=!1,k=-k);let O=s.node(k-1),B=s.index(k-1);if(O.canReplaceWith(B,B,S.type,S.marks))return t.replace(s.before(k),E?o.after(k):n,new Z(zv(r.content,0,r.openStart,v),v,r.openEnd))}}let g=t.steps.length;for(let x=c.length-1;x>=0&&(t.replace(e,n,r),!(t.steps.length>g));x--){let v=c[x];v<0||(e=s.before(v),n=o.after(v))}}function zv(t,e,n,r,s){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(zv(o.content,e+1,n,r,o)))}if(e>r){let o=s.contentMatchAt(0),c=o.fillBefore(t).append(t);t=c.append(o.matchFragment(c).fillBefore(K.empty,!0))}return t}function DM(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=MM(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new Z(K.from(r),0,0))}function RM(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),o=Lv(r,s);for(let c=0;c<o.length;c++){let u=o[c],f=c==o.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),s.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return t.delete(r.before(u),s.after(u))}for(let c=1;c<=r.depth&&c<=s.depth;c++)if(e-r.start(c)==r.depth-c&&n>r.end(c)&&s.end(c)-n!=s.depth-c&&r.start(c-1)==s.start(c-1)&&r.node(c-1).canReplace(r.index(c-1),s.index(c-1)))return t.delete(r.before(c),n);t.delete(e,n)}function Lv(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let o=t.start(s);if(o<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&n.push(s)}return n}class Js extends Rt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return dt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return dt.fromReplace(e,this.pos,this.pos+1,new Z(K.from(s),0,n.isLeaf?0:1))}getMap(){return sn.empty}invert(e){return new Js(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Js(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Js(n.pos,n.attr,n.value)}}Rt.jsonID("attr",Js);class Eo extends Rt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return dt.ok(r)}getMap(){return sn.empty}invert(e){return new Eo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Eo(n.attr,n.value)}}Rt.jsonID("docAttr",Eo);let Ws=class extends Error{};Ws=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ws.prototype=Object.create(Error.prototype);Ws.prototype.constructor=Ws;Ws.prototype.name="TransformError";class qp{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new No}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ws(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Z.empty){let s=Nu(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new Z(K.from(r),0,0))}delete(e,n){return this.replace(e,n,Z.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return OM(this,e,n,r),this}replaceRangeWith(e,n,r){return DM(this,e,n,r),this}deleteRange(e,n){return RM(this,e,n),this}lift(e,n){return yM(this,e,n),this}join(e,n=1){return EM(this,e,n),this}wrap(e,n){return vM(this,e,n),this}setBlockType(e,n=e,r,s=null){return SM(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return wM(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Js(e,n,r)),this}setDocAttribute(e,n){return this.step(new Eo(e,n)),this}addNodeMark(e,n){return this.step(new ii(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ue)n.isInSet(r.marks)&&this.step(new Fi(e,n));else{let s=r.marks,o,c=[];for(;o=n.isInSet(s);)c.push(new Fi(e,o)),s=o.removeFromSet(s);for(let u=c.length-1;u>=0;u--)this.step(c[u])}return this}split(e,n=1,r){return kM(this,e,n,r),this}addMark(e,n,r){return pM(this,e,n,r),this}removeMark(e,n,r){return mM(this,e,n,r),this}clearIncompatible(e,n,r){return $p(this,e,n,r),this}}const vh=Object.create(null);class ue{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Bv(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Z.empty){let r=n.content.lastChild,s=null;for(let u=0;u<n.openEnd;u++)s=r,r=r.lastChild;let o=e.steps.length,c=this.ranges;for(let u=0;u<c.length;u++){let{$from:f,$to:h}=c[u],p=e.mapping.slice(o);e.replaceRange(p.map(f.pos),p.map(h.pos),u?Z.empty:n),u==0&&fx(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:c,$to:u}=s[o],f=e.mapping.slice(r),h=f.map(c.pos),p=f.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,n),fx(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new ae(e):Ps(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let c=n<0?Ps(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ps(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(c)return c}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new on(e.node(0))}static atStart(e){return Ps(e,e,0,0,1)||new on(e)}static atEnd(e){return Ps(e,e,e.content.size,e.childCount,-1)||new on(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=vh[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in vh)throw new RangeError("Duplicate use of selection JSON ID "+e);return vh[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ae.between(this.$anchor,this.$head).getBookmark()}}ue.prototype.visible=!0;class Bv{constructor(e,n){this.$from=e,this.$to=n}}let ux=!1;function dx(t){!ux&&!t.parent.inlineContent&&(ux=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ae extends ue{constructor(e,n=e){dx(e),dx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ue.near(r);let s=e.resolve(n.map(this.anchor));return new ae(s.parent.inlineContent?s:r,r)}replace(e,n=Z.empty){if(super.replace(e,n),n==Z.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ae&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Eu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ae(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=ue.findFrom(n,r,!0)||ue.findFrom(n,-r,!0);if(o)n=o.$head;else return ue.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(ue.findFrom(e,-r,!0)||ue.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new ae(e,n)}}ue.jsonID("text",ae);class Eu{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Eu(e.map(this.anchor),e.map(this.head))}resolve(e){return ae.between(e.resolve(this.anchor),e.resolve(this.head))}}class se extends ue{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=e.resolve(s);return r?ue.near(o):new se(o)}content(){return new Z(K.from(this.node),0,0)}eq(e){return e instanceof se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Pp(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new se(e.resolve(n.anchor))}static create(e,n){return new se(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}se.prototype.visible=!1;ue.jsonID("node",se);class Pp{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Eu(r,r):new Pp(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&se.isSelectable(r)?new se(n):ue.near(n)}}class on extends ue{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Z.empty){if(n==Z.empty){e.delete(0,e.doc.content.size);let r=ue.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new on(e)}map(e){return new on(e)}eq(e){return e instanceof on}getBookmark(){return zM}}ue.jsonID("all",on);const zM={map(){return this},resolve(t){return new on(t)}};function Ps(t,e,n,r,s,o=!1){if(e.inlineContent)return ae.create(t,n);for(let c=r-(s>0?0:1);s>0?c<e.childCount:c>=0;c+=s){let u=e.child(c);if(u.isAtom){if(!o&&se.isSelectable(u))return se.create(t,n-(s<0?u.nodeSize:0))}else{let f=Ps(t,u,n+s,s<0?u.childCount:0,s,o);if(f)return f}n+=u.nodeSize*s}return null}function fx(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof gt||s instanceof bt))return;let o=t.mapping.maps[r],c;o.forEach((u,f,h,p)=>{c==null&&(c=p)}),t.setSelection(ue.near(t.doc.resolve(c),n))}const hx=1,uc=2,px=4;class LM extends qp{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|hx)&~uc,this.storedMarks=null,this}get selectionSet(){return(this.updated&hx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=uc,this}ensureMarks(e){return Ue.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&uc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~uc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ue.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let c=this.doc.resolve(n);o=r==n?c.marks():c.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ue.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=px,this}get scrolledIntoView(){return(this.updated&px)>0}}function mx(t,e){return!e||!t?t:t.bind(e)}class co{constructor(e,n,r){this.name=e,this.init=mx(n.init,r),this.apply=mx(n.apply,r)}}const BM=[new co("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new co("selection",{init(t,e){return t.selection||ue.atStart(e.doc)},apply(t){return t.selection}}),new co("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new co("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Sh{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=BM.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new co(r.key,r.spec.state,r))})}}class Fs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let c=0;c<this.config.plugins.length;c++){let u=this.config.plugins[c];if(u.spec.appendTransaction){let f=s?s[c].n:0,h=s?s[c].state:this,p=f<n.length&&u.spec.appendTransaction.call(u,f?n.slice(f):n,h,r);if(p&&r.filterTransaction(p,c)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let g=0;g<this.config.plugins.length;g++)s.push(g<c?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}s&&(s[c]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fs(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new LM(this)}static create(e){let n=new Sh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fs(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new Sh(this.schema,e.plugins),r=n.fields,s=new Fs(n);for(let o=0;o<r.length;o++){let c=r[o].name;s[c]=this.hasOwnProperty(c)?this[c]:r[o].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Sh(e.schema,e.plugins),o=new Fs(s);return s.fields.forEach(c=>{if(c.name=="doc")o.doc=jn.fromJSON(e.schema,n.doc);else if(c.name=="selection")o.selection=ue.fromJSON(o.doc,n.selection);else if(c.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],h=f.spec.state;if(f.key==c.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){o[c.name]=h.fromJSON.call(f,e,n[u],o);return}}o[c.name]=c.init(e,o)}}),o}}function _v(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=_v(s,e,{})),n[r]=s}return n}class Ye{constructor(e){this.spec=e,this.props={},e.props&&_v(e.props,this,this.props),this.key=e.key?e.key.key:Hv("plugin")}getState(e){return e[this.key]}}const Ch=Object.create(null);function Hv(t){return t in Ch?t+"$"+ ++Ch[t]:(Ch[t]=0,t+"$")}class tt{constructor(e="key"){this.key=Hv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Kp=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Uv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Vv=(t,e,n)=>{let r=Uv(t,n);if(!r)return!1;let s=Gp(r);if(!s){let c=r.blockRange(),u=c&&ol(c);return u==null?!1:(e&&e(t.tr.lift(c,u).scrollIntoView()),!0)}let o=s.nodeBefore;if(Jv(t,s,e,-1))return!0;if(r.parent.content.size==0&&(Zs(o,"end")||se.isSelectable(o)))for(let c=r.depth;;c--){let u=Nu(t.doc,r.before(c),r.after(c),Z.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=t.tr.step(u);f.setSelection(Zs(o,"end")?ue.findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):se.create(f.doc,s.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(c==1||r.node(c-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},_M=(t,e,n)=>{let r=Uv(t,n);if(!r)return!1;let s=Gp(r);return s?$v(t,s,e):!1},HM=(t,e,n)=>{let r=qv(t,n);if(!r)return!1;let s=Yp(r);return s?$v(t,s,e):!1};function $v(t,e,n){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let c=e.nodeAfter,u=c,f=e.pos+1;for(;!u.isTextblock;f++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Nu(t.doc,o,f,Z.empty);if(!h||h.from!=o||h instanceof gt&&h.slice.size>=f-o)return!1;if(n){let p=t.tr.step(h);p.setSelection(ae.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Zs(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Iv=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Gp(r)}let c=o&&o.nodeBefore;return!c||!se.isSelectable(c)?!1:(e&&e(t.tr.setSelection(se.create(t.doc,o.pos-c.nodeSize)).scrollIntoView()),!0)};function Gp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function qv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Pv=(t,e,n)=>{let r=qv(t,n);if(!r)return!1;let s=Yp(r);if(!s)return!1;let o=s.nodeAfter;if(Jv(t,s,e,1))return!0;if(r.parent.content.size==0&&(Zs(o,"start")||se.isSelectable(o))){let c=Nu(t.doc,r.before(),r.after(),Z.empty);if(c&&c.slice.size<c.to-c.from){if(e){let u=t.tr.step(c);u.setSelection(Zs(o,"start")?ue.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):se.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},Kv=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Yp(r)}let c=o&&o.nodeAfter;return!c||!se.isSelectable(c)?!1:(e&&e(t.tr.setSelection(se.create(t.doc,o.pos)).scrollIntoView()),!0)};function Yp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const UM=(t,e)=>{let n=t.selection,r=n instanceof se,s;if(r){if(n.node.isTextblock||!hi(t.doc,n.from))return!1;s=n.from}else if(s=ku(t.doc,n.from,-1),s==null)return!1;if(e){let o=t.tr.join(s);r&&o.setSelection(se.create(o.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},VM=(t,e)=>{let n=t.selection,r;if(n instanceof se){if(n.node.isTextblock||!hi(t.doc,n.to))return!1;r=n.to}else if(r=ku(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},$M=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),o=s&&ol(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)},Gv=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Fp(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const IM=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),c=Fp(s.contentMatchAt(o));if(!c||!s.canReplaceWith(o,o,c))return!1;if(e){let u=n.after(),f=t.tr.replaceWith(u,u,c.createAndFill());f.setSelection(ue.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},Yv=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof on||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=Fp(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let c=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=t.tr.insert(c,o.createAndFill());u.setSelection(ae.create(u.doc,c+1)),e(u.scrollIntoView())}return!0},Fv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(xr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&ol(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function qM(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof se&&e.selection.node.isBlock)return!r.parentOffset||!xr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],c,u,f=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){f=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=Fp(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(f&&u?{type:u}:null),c=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof ae||e.selection instanceof on)&&p.deleteSelection();let g=p.mapping.map(r.pos),x=xr(p.doc,g,o.length,o);if(x||(o[0]=u?{type:u}:null,x=xr(p.doc,g,o.length,o)),!x)return!1;if(p.split(g,o.length,o),!f&&h&&r.node(c).type!=u){let v=p.mapping.map(r.before(c)),S=p.doc.resolve(v);u&&r.node(c-1).canReplaceWith(S.index(),S.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(c)),u)}return n&&n(p.scrollIntoView()),!0}}const PM=qM(),KM=(t,e)=>{let{$from:n,to:r}=t.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),e&&e(t.tr.setSelection(se.create(t.doc,s))),!0)};function GM(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||hi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Jv(t,e,n,r){let s=e.nodeBefore,o=e.nodeAfter,c,u,f=s.type.spec.isolating||o.type.spec.isolating;if(!f&&GM(t,e,n))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(c=(u=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&u.matchType(c[0]||o.type).validEnd){if(n){let v=e.pos+o.nodeSize,S=K.empty;for(let E=c.length-1;E>=0;E--)S=K.from(c[E].create(null,S));S=K.from(s.copy(S));let w=t.tr.step(new bt(e.pos-1,v,e.pos,v,new Z(S,1,0),c.length,!0)),k=w.doc.resolve(v+2*c.length);k.nodeAfter&&k.nodeAfter.type==s.type&&hi(w.doc,k.pos)&&w.join(k.pos),n(w.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&f?null:ue.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),x=g&&ol(g);if(x!=null&&x>=e.depth)return n&&n(t.tr.lift(g,x).scrollIntoView()),!0;if(h&&Zs(o,"start",!0)&&Zs(s,"end")){let v=s,S=[];for(;S.push(v),!v.isTextblock;)v=v.lastChild;let w=o,k=1;for(;!w.isTextblock;w=w.firstChild)k++;if(v.canReplace(v.childCount,v.childCount,w.content)){if(n){let E=K.empty;for(let B=S.length-1;B>=0;B--)E=K.from(S[B].copy(E));let O=t.tr.step(new bt(e.pos-S.length,e.pos+o.nodeSize,e.pos+k,e.pos+o.nodeSize-k,new Z(E,S.length,0),0,!0));n(O.scrollIntoView())}return!0}}return!1}function Xv(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(e.tr.setSelection(ae.create(e.doc,t<0?s.start(o):s.end(o)))),!0):!1}}const YM=Xv(-1),FM=Xv(1);function JM(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,c=s.blockRange(o),u=c&&Ip(c,t,e);return u?(r&&r(n.tr.wrap(c,u).scrollIntoView()),!0):!1}}function gx(t,e=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:c},$to:{pos:u}}=n.selection.ranges[o];n.doc.nodesBetween(c,u,(f,h)=>{if(s)return!1;if(!(!f.isTextblock||f.hasMarkup(t,e)))if(f.type==t)s=!0;else{let p=n.doc.resolve(h),g=p.index();s=p.parent.canReplaceWith(g,g+1,t)}})}if(!s)return!1;if(r){let o=n.tr;for(let c=0;c<n.selection.ranges.length;c++){let{$from:{pos:u},$to:{pos:f}}=n.selection.ranges[c];o.setBlockType(u,f,t,e)}r(o.scrollIntoView())}return!0}}function Jp(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}Jp(Kp,Vv,Iv);Jp(Kp,Pv,Kv);Jp(Gv,Yv,Fv,PM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function XM(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,c=s.blockRange(o);if(!c)return!1;let u=r?n.tr:null;return QM(u,c,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function QM(t,e,n,r=null){let s=!1,o=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=c.resolve(e.start-2);o=new Bc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Bc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=Ip(o,n,r,e);return u?(t&&WM(t,e,u,s,n),!0):!1}function WM(t,e,n,r,s){let o=K.empty;for(let p=n.length-1;p>=0;p--)o=K.from(n[p].type.create(n[p].attrs,o));t.step(new bt(e.start-(r?2:0),e.end,e.start,e.end,new Z(o,0,0),n.length,!0));let c=0;for(let p=0;p<n.length;p++)n[p].type==s&&(c=p+1);let u=n.length-c,f=e.start+n.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,x=!0;p<g;p++,x=!1)!x&&xr(t.doc,f,u)&&(t.split(f,u),f+=2*u),f+=h.child(p).nodeSize;return t}function ZM(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?eT(e,n,t,o):tT(e,n,o):!0:!1}}function eT(t,e,n,r){let s=t.tr,o=r.end,c=r.$to.end(r.depth);o<c&&(s.step(new bt(o-1,c,o,c,new Z(K.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Bc(s.doc.resolve(r.$from.pos),s.doc.resolve(c),r.depth));const u=ol(r);if(u==null)return!1;s.lift(r,u);let f=s.doc.resolve(s.mapping.map(o,-1)-1);return hi(s.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&s.join(f.pos),e(s.scrollIntoView()),!0}function tT(t,e,n){let r=t.tr,s=n.parent;for(let v=n.end,S=n.endIndex-1,w=n.startIndex;S>w;S--)v-=s.child(S).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(n.start),c=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,f=n.endIndex==s.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,c.content.append(f?K.empty:K.from(s))))return!1;let g=o.pos,x=g+c.nodeSize;return r.step(new bt(g-(u?1:0),x+(f?1:0),g+1,x-1,new Z((u?K.empty:K.from(s.copy(K.empty))).append(f?K.empty:K.from(s.copy(K.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function nT(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==t);if(!o)return!1;let c=o.startIndex;if(c==0)return!1;let u=o.parent,f=u.child(c-1);if(f.type!=t)return!1;if(n){let h=f.lastChild&&f.lastChild.type==u.type,p=K.from(h?t.create():null),g=new Z(K.from(t.create(null,K.from(u.type.create(null,p)))),h?3:1,0),x=o.start,v=o.end;n(e.tr.step(new bt(x-(h?3:1),v,x,v,g,1,!0)).scrollIntoView())}return!0}}const Mt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},el=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let tp=null;const gr=function(t,e,n){let r=tp||(tp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},rT=function(){tp=null},Ji=function(t,e,n,r){return n&&(yx(t,e,n,r,-1)||yx(t,e,n,r,1))},iT=/^(img|br|input|textarea|hr)$/i;function yx(t,e,n,r,s){for(var o;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Sn(t))){let c=t.parentNode;if(!c||c.nodeType!=1||Uo(t)||iT.test(t.nodeName)||t.contentEditable=="false")return!1;e=Mt(t)+(s<0?0:1),t=c}else if(t.nodeType==1){let c=t.childNodes[e+(s<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((o=c.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else t=c,e=s<0?Sn(t):0}else return!1}}function Sn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function sT(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Sn(t)}else if(t.parentNode&&!Uo(t))e=Mt(t),t=t.parentNode;else return null}}function lT(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Uo(t))e=Mt(t)+1,t=t.parentNode;else return null}}function oT(t,e,n){for(let r=e==0,s=e==Sn(t);r||s;){if(t==n)return!0;let o=Mt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,s=s&&o==Sn(t)}}function Uo(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Mu=function(t){return t.focusNode&&Ji(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Bi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function aT(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function cT(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Sn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Sn(r.startContainer),r.startOffset)}}}const Pn=typeof navigator<"u"?navigator:null,bx=typeof document<"u"?document:null,pi=Pn&&Pn.userAgent||"",np=/Edge\/(\d+)/.exec(pi),Qv=/MSIE \d/.exec(pi),rp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pi),Yt=!!(Qv||rp||np),oi=Qv?document.documentMode:rp?+rp[1]:np?+np[1]:0,Cn=!Yt&&/gecko\/(\d+)/i.test(pi);Cn&&+(/Firefox\/(\d+)/.exec(pi)||[0,0])[1];const ip=!Yt&&/Chrome\/(\d+)/.exec(pi),Ot=!!ip,Wv=ip?+ip[1]:0,Bt=!Yt&&!!Pn&&/Apple Computer/.test(Pn.vendor),tl=Bt&&(/Mobile\/\w+/.test(pi)||!!Pn&&Pn.maxTouchPoints>2),vn=tl||(Pn?/Mac/.test(Pn.platform):!1),uT=Pn?/Win/.test(Pn.platform):!1,yr=/Android \d/.test(pi),Vo=!!bx&&"webkitFontSmoothing"in bx.documentElement.style,dT=Vo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function fT(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function dr(t,e){return typeof t=="number"?t:t[e]}function hT(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function xx(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let c=n||t.dom;c;){if(c.nodeType!=1){c=el(c);continue}let u=c,f=u==o.body,h=f?fT(o):hT(u),p=0,g=0;if(e.top<h.top+dr(r,"top")?g=-(h.top-e.top+dr(s,"top")):e.bottom>h.bottom-dr(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+dr(s,"top")-h.top:e.bottom-h.bottom+dr(s,"bottom")),e.left<h.left+dr(r,"left")?p=-(h.left-e.left+dr(s,"left")):e.right>h.right-dr(r,"right")&&(p=e.right-h.right+dr(s,"right")),p||g)if(f)o.defaultView.scrollBy(p,g);else{let v=u.scrollLeft,S=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let w=u.scrollLeft-v,k=u.scrollTop-S;e={left:e.left-w,top:e.top-k,right:e.right-w,bottom:e.bottom-k}}let x=f?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(x))break;c=x=="absolute"?c.offsetParent:el(c)}}function pT(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,c=n+1;c<Math.min(innerHeight,e.bottom);c+=5){let u=t.root.elementFromPoint(o,c);if(!u||u==t.dom||!t.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=n-20){r=u,s=f.top;break}}return{refDOM:r,refTop:s,stack:Zv(t.dom)}}function Zv(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=el(r));return e}function mT({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;e2(n,r==0?0:r-e)}function e2(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:o}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Is=null;function gT(t){if(t.setActive)return t.setActive();if(Is)return t.focus(Is);let e=Zv(t);t.focus(Is==null?{get preventScroll(){return Is={preventScroll:!0},!0}}:void 0),Is||(Is=!1,e2(e,0))}function t2(t,e){let n,r=2e8,s,o=0,c=e.top,u=e.top,f,h;for(let p=t.firstChild,g=0;p;p=p.nextSibling,g++){let x;if(p.nodeType==1)x=p.getClientRects();else if(p.nodeType==3)x=gr(p).getClientRects();else continue;for(let v=0;v<x.length;v++){let S=x[v];if(S.top<=c&&S.bottom>=u){c=Math.max(S.bottom,c),u=Math.min(S.top,u);let w=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(w<r){n=p,r=w,s=w&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,p.nodeType==1&&w&&(o=g+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!f&&S.left<=e.left&&S.right>=e.left&&(f=p,h={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(o=g+1)}}return!n&&f&&(n=f,s=h,r=0),n&&n.nodeType==3?yT(n,s):!n||r&&n.nodeType==1?{node:t,offset:o}:t2(n,s)}function yT(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=Xr(r,1);if(o.top!=o.bottom&&Xp(e,o))return{node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Xp(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function bT(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function xT(t,e,n){let{node:r,offset:s}=t2(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let c=r.getBoundingClientRect();o=c.left!=c.right&&n.left>(c.left+c.right)/2?1:-1}return t.docView.posFromDOM(r,s,o)}function vT(t,e,n,r){let s=-1;for(let o=e,c=!1;o!=t.dom;){let u=t.docView.nearestDesc(o,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!c&&f.left>r.left||f.top>r.top?s=u.posBefore:(!c&&f.right<r.left||f.bottom<r.top)&&(s=u.posAfter),c=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function n2(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let c=t.childNodes[o];if(c.nodeType==1){let u=c.getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(Xp(e,h))return n2(c,e,h)}}if((o=(o+1)%r)==s)break}return t}function ST(t,e){let n=t.dom.ownerDocument,r,s=0,o=cT(n,e.left,e.top);o&&({node:r,offset:s}=o);let c=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!c||!t.dom.contains(c.nodeType!=1?c.parentNode:c)){let h=t.dom.getBoundingClientRect();if(!Xp(e,h)||(c=n2(t.dom,e,h),!c))return null}if(Bt)for(let h=c;r&&h;h=el(h))h.draggable&&(r=void 0);if(c=bT(c,e),r){if(Cn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&s++}let h;Vo&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=vT(t,r,s,e))}u==null&&(u=xT(t,c,e));let f=t.docView.nearestDesc(c,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function vx(t){return t.top<t.bottom||t.left<t.right}function Xr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(vx(r))return r}return Array.prototype.find.call(n,vx)||t.getBoundingClientRect()}const CT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function r2(t,e,n){let{node:r,offset:s,atom:o}=t.docView.domFromPos(e,n<0?-1:1),c=Vo||Cn;if(r.nodeType==3)if(c&&(CT.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let f=Xr(gr(r,s,s),n);if(Cn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Xr(gr(r,s-1,s-1),-1);if(h.top==f.top){let p=Xr(gr(r,s,s+1),-1);if(p.top!=f.top)return so(p,p.left<h.left)}}return f}else{let f=s,h=s,p=n<0?1:-1;return n<0&&!s?(h++,p=-1):n>=0&&s==r.nodeValue.length?(f--,p=1):n<0?f--:h++,so(Xr(gr(r,f,h),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==Sn(r))){let f=r.childNodes[s-1];if(f.nodeType==1)return wh(f.getBoundingClientRect(),!1)}if(o==null&&s<Sn(r)){let f=r.childNodes[s];if(f.nodeType==1)return wh(f.getBoundingClientRect(),!0)}return wh(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==Sn(r))){let f=r.childNodes[s-1],h=f.nodeType==3?gr(f,Sn(f)-(c?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return so(Xr(h,1),!1)}if(o==null&&s<Sn(r)){let f=r.childNodes[s];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?gr(f,0,c?0:1):f.nodeType==1?f:null:null;if(h)return so(Xr(h,-1),!0)}return so(Xr(r.nodeType==3?gr(r):r,-n),n>=0)}function so(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function wh(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function i2(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function wT(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return i2(t,e,()=>{let{node:o}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let c=r2(t,s.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=gr(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.bottom>p.top+1&&(n=="up"?c.top-p.top>(p.bottom-c.top)*2:p.bottom-c.bottom>(c.bottom-p.top)*2))return!1}}return!0})}const kT=/[\u0590-\u08ac]/;function NT(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,c=s==r.parent.content.size,u=t.domSelection();return u?!kT.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?o:c:i2(t,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:p,anchorOffset:g}=t.domSelectionRange(),x=u.caretBidiLevel;u.modify("move",n,"character");let v=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:S,focusOffset:w}=t.domSelectionRange(),k=S&&!v.contains(S.nodeType==1?S:S.parentNode)||f==S&&h==w;try{u.collapse(p,g),f&&(f!=p||h!=g)&&u.extend&&u.extend(f,h)}catch{}return x!=null&&(u.caretBidiLevel=x),k}):r.pos==r.start()||r.pos==r.end()}let Sx=null,Cx=null,wx=!1;function ET(t,e,n){return Sx==e&&Cx==n?wx:(Sx=e,Cx=n,wx=n=="up"||n=="down"?wT(t,e,n):NT(t,e,n))}const wn=0,kx=1,_i=2,Kn=3;class $o{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=wn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,c;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(c)+c.size:this.posAtStart}else{let o,c;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Mt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),c;if(o&&(!n||o.node))if(r&&(c=o.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let c=0;c<s.children.length;c++){let u=s.children[c];if(u.size){s=u;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let c=this.children[r],u=o+c.size;if(u>e||c instanceof l2){s=e-o;break}o=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof s2&&o.side>=0;r--);if(n<=0){let o,c=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,c=!1);return o&&n&&c&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Mt(o.dom)+1:0}}else{let o,c=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,c=!1);return o&&c&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Mt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let c=r,u=0;;u++){let f=this.children[u],h=c+f.size;if(s==-1&&e<=h){let p=c+f.border;if(e>=p&&n<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,n,p);e=c;for(let g=u;g>0;g--){let x=this.children[g-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){s=Mt(x.dom)+1;break}e-=x.size}s==-1&&(s=0)}if(s>-1&&(h>n||u==this.children.length-1)){n=h;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=Mt(g.dom);break}n+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}c=h}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let o=Math.min(e,n),c=Math.max(e,n);for(let v=0,S=0;v<this.children.length;v++){let w=this.children[v],k=S+w.size;if(o>S&&c<k)return w.setSelection(e-S-w.border,n-S-w.border,r,s);S=k}let u=this.domFromPos(e,e?-1:1),f=n==e?u:this.domFromPos(n,n?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((Cn||Bt)&&e==n){let{node:v,offset:S}=u;if(v.nodeType==3){if(g=!!(S&&v.nodeValue[S-1]==`
`),g&&S==v.nodeValue.length)for(let w=v,k;w;w=w.parentNode){if(k=w.nextSibling){k.nodeName=="BR"&&(u=f={node:k.parentNode,offset:Mt(k)+1});break}let E=w.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let w=v.childNodes[S-1];g=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Cn&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||g&&Bt)&&Ji(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Ji(f.node,f.offset,p.focusNode,p.focusOffset))return;let x=!1;if((h.extend||e==n)&&!(g&&Cn)){h.collapse(u.node,u.offset);try{e!=n&&h.extend(f.node,f.offset),x=!0}catch{}}if(!x){if(e>n){let S=u;u=f,f=S}let v=document.createRange();v.setEnd(f.node,f.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],c=r+o.size;if(r==c?e<=c&&n>=r:e<c&&n>r){let u=r+o.border,f=c-o.border;if(e>=u&&n<=f){this.dirty=e==r||n==c?_i:kx,e==u&&n==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Kn:o.markDirty(e-u,n-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?_i:Kn}r=c}this.dirty=_i}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?_i:kx;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class s2 extends $o{constructor(e,n,r,s){let o,c=n.type.toDOM;if(typeof c=="function"&&(c=c(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(c.nodeType!=1){let u=document.createElement("span");u.appendChild(c),c=u}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==wn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class MT extends $o{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xi extends $o{constructor(e,n,r,s,o){super(e,[],r,s),this.mark=n,this.spec=o}static create(e,n,r,s){let o=s.nodeViews[n.type.name],c=o&&o(n,s,r);return(!c||!c.dom)&&(c=es.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Xi(e,n,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Kn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Kn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=wn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=wn}}slice(e,n,r){let s=Xi.create(this.parent,this.mark,!0,r),o=this.children,c=this.size;n<c&&(o=lp(o,n,c,r)),e>0&&(o=lp(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ai extends $o{constructor(e,n,r,s,o,c,u,f,h){super(e,[],o,c),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,n,r,s,o,c){let u=o.nodeViews[n.type.name],f,h=u&&u(n,o,()=>{if(!f)return c;if(f.parent)return f.parent.posBeforeChild(f)},r,s),p=h&&h.dom,g=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=es.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!g&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let x=p;return p=c2(p,r,n),h?f=new TT(e,n,r,s,p,g||null,x,h,o,c+1):n.isText?new Tu(e,n,r,s,p,x,o):new ai(e,n,r,s,p,g||null,x,o,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>K.empty)}return e}matchesNode(e,n,r){return this.dirty==wn&&e.eq(this.node)&&Hc(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,o=e.composing?this.localCompositionInfo(e,n):null,c=o&&o.pos>-1?o:null,u=o&&o.pos<0,f=new jT(this,c&&c.node,e);RT(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&f.syncToMarks(p==this.node.childCount?Ue.none:this.node.child(p).marks,r,e),f.placeWidget(h,e,s)},(h,p,g,x)=>{f.syncToMarks(h.marks,r,e);let v;f.findNodeMatch(h,p,g,x)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(v=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(h,p,g,v,e)||f.updateNextNode(h,p,g,e,x,s)||f.addNode(h,p,g,e,s),s+=h.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==_i)&&(c&&this.protectLocalComposition(e,c),o2(this.contentDOM,this.children,e),tl&&zT(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof ae)||r<n||s>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let c=o.nodeValue,u=LT(this.node.content,c,r-n,s-n);return u<0?null:{node:o,pos:u,text:c}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let c=new MT(this,o,n,s);e.input.compositionNodes.push(c),this.children=lp(this.children,r,r+s.length,e,c)}update(e,n,r,s){return this.dirty==Kn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=wn}updateOuterDeco(e){if(Hc(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=a2(this.dom,this.nodeDOM,sp(this.outerDeco,this.node,n),sp(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Nx(t,e,n,r,s){c2(r,e,t);let o=new ai(void 0,t,e,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Tu extends ai{constructor(e,n,r,s,o,c,u){super(e,n,r,s,o,null,c,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Kn||this.dirty!=wn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=wn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=wn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),o=document.createTextNode(s.text);return new Tu(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Kn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class l2 extends $o{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==wn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class TT extends ai{constructor(e,n,r,s,o,c,u,f,h,p){super(e,n,r,s,o,c,u,h,p),this.spec=f}update(e,n,r,s){if(this.dirty==Kn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function o2(t,e,n){let r=t.firstChild,s=!1;for(let o=0;o<e.length;o++){let c=e[o],u=c.dom;if(u.parentNode==t){for(;u!=r;)r=Ex(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(u,r);if(c instanceof Xi){let f=r?r.previousSibling:t.lastChild;o2(c.contentDOM,c.children,n),r=f?f.nextSibling:t.firstChild}}for(;r;)r=Ex(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const po=function(t){t&&(this.nodeName=t)};po.prototype=Object.create(null);const Hi=[new po];function sp(t,e,n){if(t.length==0)return Hi;let r=n?Hi[0]:new po,s=[r];for(let o=0;o<t.length;o++){let c=t[o].type.attrs;if(c){c.nodeName&&s.push(r=new po(c.nodeName));for(let u in c){let f=c[u];f!=null&&(n&&s.length==1&&s.push(r=new po(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return s}function a2(t,e,n,r){if(n==Hi&&r==Hi)return e;let s=e;for(let o=0;o<r.length;o++){let c=r[o],u=n[o];if(o){let f;u&&u.nodeName==c.nodeName&&s!=t&&(f=s.parentNode)&&f.nodeName.toLowerCase()==c.nodeName||(f=document.createElement(c.nodeName),f.pmIsDeco=!0,f.appendChild(s),u=Hi[0]),s=f}AT(s,u||Hi[0],c)}return s}function AT(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&t.classList.add(s[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function c2(t,e,n){return a2(t,t,Hi,sp(e,n,t.nodeType!=1))}function Hc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ex(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class jT{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=OT(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,o=this.stack.length>>1,c=Math.min(o,e.length);for(;s<c&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=wn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let h=this.top.children[f];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=f;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let f=Xi.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let o=-1,c;if(s>=this.preMatch.index&&(c=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&c.matchesNode(e,n,r))o=this.top.children.indexOf(c,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let h=this.top.children[u];if(h.matchesNode(e,n,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,s,o){let c=this.top.children[s];return c.dirty==Kn&&c.dom==c.contentDOM&&(c.dirty=_i),c.update(e,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,o,c){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof ai){let h=this.preMatch.matched.get(f);if(h!=null&&h!=o)return!1;let p=f.dom,g,x=this.isLocked(p)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Kn&&Hc(n,f.outerDeco));if(!x&&f.update(e,n,r,s))return this.destroyBetween(this.index,u),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!x&&(g=this.recreateWrapper(f,e,n,r,s,c)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=_i,g.updateChildren(s,c+1),g.dirty=wn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,o,c){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Hc(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=ai.create(this.top,n,r,s,o,c);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,n,r,s,o){let c=ai.create(this.top,e,n,r,s,o);c.contentDOM&&c.updateChildren(s,o+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new s2(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Xi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Tu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Bt||Ot)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new l2(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function OT(t,e){let n=e,r=n.children.length,s=t.childCount,o=new Map,c=[];e:for(;s>0;){let u;for(;;)if(r){let h=n.children[r-1];if(h instanceof Xi)n=h,r=h.children.length;else{u=h,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let f=u.node;if(f){if(f!=t.child(s-1))break;--s,o.set(u,s),c.push(u)}}return{index:s,matched:o,matches:c.reverse()}}function DT(t,e){return t.type.side-e.type.side}function RT(t,e,n,r){let s=e.locals(t),o=0;if(s.length==0){for(let h=0;h<t.childCount;h++){let p=t.child(h);r(p,s,e.forChild(o,p),h),o+=p.nodeSize}return}let c=0,u=[],f=null;for(let h=0;;){let p,g;for(;c<s.length&&s[c].to==o;){let k=s[c++];k.widget&&(p?(g||(g=[p])).push(k):p=k)}if(p)if(g){g.sort(DT);for(let k=0;k<g.length;k++)n(g[k],h,!!f)}else n(p,h,!!f);let x,v;if(f)v=-1,x=f,f=null;else if(h<t.childCount)v=h,x=t.child(h++);else break;for(let k=0;k<u.length;k++)u[k].to<=o&&u.splice(k--,1);for(;c<s.length&&s[c].from<=o&&s[c].to>o;)u.push(s[c++]);let S=o+x.nodeSize;if(x.isText){let k=S;c<s.length&&s[c].from<k&&(k=s[c].from);for(let E=0;E<u.length;E++)u[E].to<k&&(k=u[E].to);k<S&&(f=x.cut(k-o),x=x.cut(0,k-o),S=k,v=-1)}else for(;c<s.length&&s[c].to<S;)c++;let w=x.isInline&&!x.isLeaf?u.filter(k=>!k.inline):u.slice();r(x,w,e.forChild(o,x),v),o=S}}function zT(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function LT(t,e,n,r){for(let s=0,o=0;s<t.childCount&&o<=r;){let c=t.child(s++),u=o;if(o+=c.nodeSize,!c.isText)continue;let f=c.text;for(;s<t.childCount;){let h=t.child(s++);if(o+=h.nodeSize,!h.isText)break;f+=h.text}if(o>=n){if(o>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?f.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=n)return u+h;if(n==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function lp(t,e,n,r,s){let o=[];for(let c=0,u=0;c<t.length;c++){let f=t[c],h=u,p=u+=f.size;h>=n||p<=e?o.push(f):(h<e&&o.push(f.slice(0,e-h,r)),s&&(o.push(s),s=void 0),p>n&&o.push(f.slice(n-h,f.size,r)))}return o}function Qp(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),o=s&&s.size==0,c=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(c<0)return null;let u=r.resolve(c),f,h;if(Mu(n)){for(f=c;s&&!s.node;)s=s.parent;let g=s.node;if(s&&g.isAtom&&se.isSelectable(g)&&s.parent&&!(g.isInline&&oT(n.focusNode,n.focusOffset,s.dom))){let x=s.posBefore;h=new se(c==x?u:r.resolve(x))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let g=c,x=c;for(let v=0;v<n.rangeCount;v++){let S=n.getRangeAt(v);g=Math.min(g,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),x=Math.max(x,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(g<0)return null;[f,c]=x==t.state.selection.anchor?[x,g]:[g,x],u=r.resolve(c)}else f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let g=e=="pointer"||t.state.selection.head<u.pos&&!o?1:-1;h=Wp(t,p,u,g)}return h}function u2(t){return t.editable?t.hasFocus():f2(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function vr(t,e=!1){let n=t.state.selection;if(d2(t,n),!!u2(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ot){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ji(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)_T(t);else{let{anchor:r,head:s}=n,o,c;Mx&&!(n instanceof ae)&&(n.$from.parent.inlineContent||(o=Tx(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(c=Tx(t,n.to))),t.docView.setSelection(r,s,t,e),Mx&&(o&&Ax(o),c&&Ax(c)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&BT(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Mx=Bt||Ot&&Wv<63;function Tx(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Bt&&s&&s.contentEditable=="false")return kh(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return kh(s);if(o)return kh(o)}}function kh(t){return t.contentEditable="true",Bt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Ax(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function BT(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!u2(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function _T(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Mt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Yt&&oi<=11&&(n.disabled=!0,n.disabled=!1)}function d2(t,e){if(e instanceof se){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(jx(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else jx(t)}function jx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Wp(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||ae.between(e,n,r)}function Ox(t){return t.editable&&!t.hasFocus()?!1:f2(t)}function f2(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function HT(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ji(e.node,e.offset,n.anchorNode,n.anchorOffset)}function op(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return o&&ue.findFrom(o,e)}function Qr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Dx(t,e,n){let r=t.state.selection;if(r instanceof ae)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let c=t.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return Qr(t,new ae(r.$anchor,c))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=op(t.state,e);return s&&s instanceof se?Qr(t,s):!1}else if(!(vn&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,c;if(!o||o.isText)return!1;let u=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(c=t.docView.descAt(u))&&!c.contentDOM?se.isSelectable(o)?Qr(t,new se(e<0?t.state.doc.resolve(s.pos-o.nodeSize):s)):Vo?Qr(t,new ae(t.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof se&&r.node.isInline)return Qr(t,new ae(e>0?r.$to:r.$from));{let s=op(t.state,e);return s?Qr(t,s):!1}}}function Uc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function mo(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function qs(t,e){return e<0?UT(t):VT(t)}function UT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,o,c=!1;for(Cn&&n.nodeType==1&&r<Uc(n)&&mo(n.childNodes[r],-1)&&(c=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(mo(u,-1))s=n,o=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(h2(n))break;{let u=n.previousSibling;for(;u&&mo(u,-1);)s=n.parentNode,o=Mt(u),u=u.previousSibling;if(u)n=u,r=Uc(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}c?ap(t,n,r):s&&ap(t,s,o)}function VT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Uc(n),o,c;for(;;)if(r<s){if(n.nodeType!=1)break;let u=n.childNodes[r];if(mo(u,1))o=n,c=++r;else break}else{if(h2(n))break;{let u=n.nextSibling;for(;u&&mo(u,1);)o=u.parentNode,c=Mt(u)+1,u=u.nextSibling;if(u)n=u,r=0,s=Uc(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}o&&ap(t,o,c)}function h2(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function $T(t,e){for(;t&&e==t.childNodes.length&&!Uo(t);)e=Mt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function IT(t,e){for(;t&&!e&&!Uo(t);)e=Mt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ap(t,e,n){if(e.nodeType!=3){let o,c;(c=$T(e,n))?(e=c,n=0):(o=IT(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Mu(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&vr(t)},50)}function Rx(t,e){let n=t.state.doc.resolve(e);if(!(Ot||uT)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),c=(o.top+o.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),c=(o.top+o.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function zx(t,e,n){let r=t.state.selection;if(r instanceof ae&&!r.empty||n.indexOf("s")>-1||vn&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let c=op(t.state,e);if(c&&c instanceof se)return Qr(t,c)}if(!s.parent.inlineContent){let c=e<0?s:o,u=r instanceof on?ue.near(c,e):ue.findFrom(c,e);return u?Qr(t,u):!1}return!1}function Lx(t,e){if(!(t.state.selection instanceof ae))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let c=t.state.tr;return e<0?c.delete(n.pos-o.nodeSize,n.pos):c.delete(n.pos,n.pos+o.nodeSize),t.dispatch(c),!0}return!1}function Bx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function qT(t){if(!Bt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Bx(t,r,"true"),setTimeout(()=>Bx(t,r,"false"),20)}return!1}function PT(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function KT(t,e){let n=e.keyCode,r=PT(e);if(n==8||vn&&n==72&&r=="c")return Lx(t,-1)||qs(t,-1);if(n==46&&!e.shiftKey||vn&&n==68&&r=="c")return Lx(t,1)||qs(t,1);if(n==13||n==27)return!0;if(n==37||vn&&n==66&&r=="c"){let s=n==37?Rx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Dx(t,s,r)||qs(t,s)}else if(n==39||vn&&n==70&&r=="c"){let s=n==39?Rx(t,t.state.selection.from)=="ltr"?1:-1:1;return Dx(t,s,r)||qs(t,s)}else{if(n==38||vn&&n==80&&r=="c")return zx(t,-1,r)||qs(t,-1);if(n==40||vn&&n==78&&r=="c")return qT(t)||zx(t,1,r)||qs(t,1);if(r==(vn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Zp(t,e){t.someProp("transformCopied",v=>{e=v(e,t)});let n=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let v=r.firstChild;n.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let c=t.someProp("clipboardSerializer")||es.fromSchema(t.state.schema),u=x2(),f=u.createElement("div");f.appendChild(c.serializeFragment(r,{document:u}));let h=f.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=b2[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let S=u.createElement(p[v]);for(;f.firstChild;)S.appendChild(f.firstChild);f.appendChild(S),g++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${o}${g?` -${g}`:""} ${JSON.stringify(n)}`);let x=t.someProp("clipboardTextSerializer",v=>v(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:x,slice:e}}function p2(t,e,n,r,s){let o=s.parent.type.spec.code,c,u;if(!n&&!e)return null;let f=!!e&&(r||o||!n);if(f){if(t.someProp("transformPastedText",x=>{e=x(e,o||r,t)}),o)return u=new Z(K.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",x=>{u=x(u,t,!0)}),u;let g=t.someProp("clipboardTextParser",x=>x(e,s,r,t));if(g)u=g;else{let x=s.marks(),{schema:v}=t.state,S=es.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let k=c.appendChild(document.createElement("p"));w&&k.appendChild(S.serializeNode(v.text(w,x)))})}}else t.someProp("transformPastedHTML",g=>{n=g(n,t)}),c=JT(n),Vo&&XT(c);let h=c&&c.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let x=c.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;c=x}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||li.fromSchema(t.state.schema)).parseSlice(c,{preserveWhitespace:!!(f||p),context:s,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!GT.test(x.parentNode.nodeName)?{ignore:!0}:null}})),p)u=QT(_x(u,+p[1],+p[2]),p[4]);else if(u=Z.maxOpen(YT(u.content,s),!0),u.openStart||u.openEnd){let g=0,x=0;for(let v=u.content.firstChild;g<u.openStart&&!v.type.spec.isolating;g++,v=v.firstChild);for(let v=u.content.lastChild;x<u.openEnd&&!v.type.spec.isolating;x++,v=v.lastChild);u=_x(u,g,x)}return t.someProp("transformPasted",g=>{u=g(u,t,f)}),u}const GT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function YT(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),o,c=[];if(t.forEach(u=>{if(!c)return;let f=s.findWrapping(u.type),h;if(!f)return c=null;if(h=c.length&&o.length&&g2(f,o,u,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=y2(c[c.length-1],o.length));let p=m2(u,f);c.push(p),s=s.matchType(p.type),o=f}}),c)return K.from(c)}return t}function m2(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,K.from(t));return t}function g2(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let o=g2(t,e,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(K.from(m2(n,t,s+1))))}}function y2(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,y2(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(K.empty,!0);return t.copy(n.append(r))}function cp(t,e,n,r,s,o){let c=e<0?t.firstChild:t.lastChild,u=c.content;return t.childCount>1&&(o=0),s<r-1&&(u=cp(u,e,n,r,s+1,o)),s>=n&&(u=e<0?c.contentMatchAt(0).fillBefore(u,o<=s).append(u):u.append(c.contentMatchAt(c.childCount).fillBefore(K.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,c.copy(u))}function _x(t,e,n){return e<t.openStart&&(t=new Z(cp(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Z(cp(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const b2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Hx=null;function x2(){return Hx||(Hx=document.implementation.createHTMLDocument("title"))}let Nh=null;function FT(t){let e=window.trustedTypes;return e?(Nh||(Nh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Nh.createHTML(t)):t}function JT(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=x2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&b2[r[1].toLowerCase()])&&(t=s.map(o=>"<"+o+">").join("")+t+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=FT(t),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function XT(t){let e=t.querySelectorAll(Ot?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function QT(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:o,openEnd:c}=t;for(let u=r.length-2;u>=0;u-=2){let f=n.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;s=K.from(f.create(r[u+1],s)),o++,c++}return new Z(s,o,c)}const _t={},Ht={},WT={touchstart:!0,touchmove:!0};class ZT{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function eA(t){for(let e in _t){let n=_t[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{nA(t,r)&&!em(t,r)&&(t.editable||!(r.type in Ht))&&n(t,r)},WT[e]?{passive:!0}:void 0)}Bt&&t.dom.addEventListener("input",()=>null),up(t)}function si(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function tA(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function up(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>em(t,r))})}function em(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function nA(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function rA(t,e){!em(t,e)&&_t[e.type]&&(t.editable||!(e.type in Ht))&&_t[e.type](t,e)}Ht.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!S2(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(yr&&Ot&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),tl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Bi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||KT(t,n)?n.preventDefault():si(t,"key")};Ht.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ht.keypress=(t,e)=>{let n=e;if(S2(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||vn&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ae)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",c=>c(t,r.$from.pos,r.$to.pos,s,o))&&t.dispatch(o()),n.preventDefault()}};function Au(t){return{left:t.clientX,top:t.clientY}}function iA(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function tm(t,e,n,r,s){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let c=o.depth+1;c>0;c--)if(t.someProp(e,u=>c>o.depth?u(t,n,o.nodeAfter,o.before(c),s,!0):u(t,n,o.node(c),o.before(c),s,!1)))return!0;return!1}function Xs(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function sA(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&se.isSelectable(r)?(Xs(t,new se(n)),!0):!1}function lA(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof se&&(r=n.node);let o=t.state.doc.resolve(e);for(let c=o.depth+1;c>0;c--){let u=c>o.depth?o.nodeAfter:o.node(c);if(se.isSelectable(u)){r&&n.$from.depth>0&&c>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(c);break}}return s!=null?(Xs(t,se.create(t.state.doc,s)),!0):!1}function oA(t,e,n,r,s){return tm(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(s?lA(t,n):sA(t,n))}function aA(t,e,n,r){return tm(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function cA(t,e,n,r){return tm(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||uA(t,n,r)}function uA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Xs(t,ae.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let c=o>s.depth?s.nodeAfter:s.node(o),u=s.before(o);if(c.inlineContent)Xs(t,ae.create(r,u+1,u+1+c.content.size));else if(se.isSelectable(c))Xs(t,se.create(r,u));else continue;return!0}}function nm(t){return Vc(t)}const v2=vn?"metaKey":"ctrlKey";_t.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=nm(t),s=Date.now(),o="singleClick";s-t.input.lastClick.time<500&&iA(n,t.input.lastClick)&&!n[v2]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o,button:n.button};let c=t.posAtCoords(Au(n));c&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new dA(t,c,n,!!r)):(o=="doubleClick"?aA:cA)(t,c.pos,c.inside,n)?n.preventDefault():si(t,"pointer"))};class dA{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[v2],this.allowDefault=r.shiftKey;let o,c;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),c=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,c=p.depth?p.before():0}const u=s?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.nodeDOM.nodeType==1?f.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof se&&h.from<=c&&h.to>c)&&(this.mightDrag={node:o,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),si(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>vr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Au(e))),this.updateAllowDefault(e),this.allowDefault||!n?si(this.view,"pointer"):oA(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Bt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ot&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Xs(this.view,ue.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):si(this.view,"pointer")}move(e){this.updateAllowDefault(e),si(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}_t.touchstart=t=>{t.input.lastTouch=Date.now(),nm(t),si(t,"pointer")};_t.touchmove=t=>{t.input.lastTouch=Date.now(),si(t,"pointer")};_t.contextmenu=t=>nm(t);function S2(t,e){return t.composing?!0:Bt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const fA=yr?5e3:-1;Ht.compositionstart=Ht.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ae&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Vc(t,!0),t.markCursor=null;else if(Vc(t,!e.selection.empty),Cn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let c=o<0?s.lastChild:s.childNodes[o-1];if(!c)break;if(c.nodeType==3){let u=t.domSelection();u&&u.collapse(c,c.nodeValue.length);break}else s=c,o=-1}}t.input.composing=!0}C2(t,fA)};Ht.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,C2(t,20))};function C2(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Vc(t),e))}function w2(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=pA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function hA(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=sT(e.focusNode,e.focusOffset),r=lT(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let c=n.pmViewDesc;if(!(!c||!c.isText(n.nodeValue)))return r}}return n||r}function pA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Vc(t,e=!1){if(!(yr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),w2(t),e||t.docView&&t.docView.dirty){let n=Qp(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function mA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Mo=Yt&&oi<15||tl&&dT<604;_t.copy=Ht.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let o=Mo?null:n.clipboardData,c=r.content(),{dom:u,text:f}=Zp(t,c);o?(n.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",f)):mA(t,u),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function gA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function yA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?To(t,r.value,null,s,e):To(t,r.textContent,r.innerHTML,s,e)},50)}function To(t,e,n,r,s){let o=p2(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",f=>f(t,s,o||Z.empty)))return!0;if(!o)return!1;let c=gA(o),u=c?t.state.tr.replaceSelectionWith(c,r):t.state.tr.replaceSelection(o);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function k2(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ht.paste=(t,e)=>{let n=e;if(t.composing&&!yr)return;let r=Mo?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&To(t,k2(r),r.getData("text/html"),s,n)?n.preventDefault():yA(t,n)};class N2{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const bA=vn?"altKey":"ctrlKey";function E2(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[bA]}_t.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,o=s.empty?null:t.posAtCoords(Au(n)),c;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof se?s.to-1:s.to))){if(r&&r.mightDrag)c=se.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=t.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=t.docView&&(c=se.create(t.state.doc,g.posBefore))}}let u=(c||t.state.selection).content(),{dom:f,text:h,slice:p}=Zp(t,u);(!n.dataTransfer.files.length||!Ot||Wv>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Mo?"Text":"text/html",f.innerHTML),n.dataTransfer.effectAllowed="copyMove",Mo||n.dataTransfer.setData("text/plain",h),t.dragging=new N2(p,E2(t,n),c)};_t.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ht.dragover=Ht.dragenter=(t,e)=>e.preventDefault();Ht.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(Au(n));if(!s)return;let o=t.state.doc.resolve(s.pos),c=r&&r.slice;c?t.someProp("transformPasted",S=>{c=S(c,t,!1)}):c=p2(t,k2(n.dataTransfer),Mo?null:n.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&E2(t,n));if(t.someProp("handleDrop",S=>S(t,n,c||Z.empty,u))){n.preventDefault();return}if(!c)return;n.preventDefault();let f=c?Ov(t.state.doc,o.pos,c):o.pos;f==null&&(f=o.pos);let h=t.state.tr;if(u){let{node:S}=r;S?S.replace(h):h.deleteSelection()}let p=h.mapping.map(f),g=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,x=h.doc;if(g?h.replaceRangeWith(p,p,c.content.firstChild):h.replaceRange(p,p,c),h.doc.eq(x))return;let v=h.doc.resolve(p);if(g&&se.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new se(v));else{let S=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((w,k,E,O)=>S=O),h.setSelection(Wp(t,v,h.doc.resolve(S)))}t.focus(),t.dispatch(h.setMeta("uiEvent","drop"))};_t.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&vr(t)},20))};_t.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};_t.beforeinput=(t,e)=>{if(Ot&&yr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Bi(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Ht)_t[t]=Ht[t];function Ao(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class $c{constructor(e,n){this.toDOM=e,this.spec=n||qi,this.side=this.spec.side||0}map(e,n,r,s){let{pos:o,deleted:c}=e.mapResult(n.from+s,this.side<0?-1:1);return c?null:new yt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof $c&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ao(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ci{constructor(e,n){this.attrs=e,this.spec=n||qi}map(e,n,r,s){let o=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,c=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=c?null:new yt(o,c,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ci&&Ao(this.attrs,e.attrs)&&Ao(this.spec,e.spec)}static is(e){return e.type instanceof ci}destroy(){}}class rm{constructor(e,n){this.attrs=e,this.spec=n||qi}map(e,n,r,s){let o=e.mapResult(n.from+s,1);if(o.deleted)return null;let c=e.mapResult(n.to+s,-1);return c.deleted||c.pos<=o.pos?null:new yt(o.pos-r,c.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),o;return s==n.from&&!(o=e.child(r)).isText&&s+o.nodeSize==n.to}eq(e){return this==e||e instanceof rm&&Ao(this.attrs,e.attrs)&&Ao(this.spec,e.spec)}destroy(){}}class yt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new yt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new yt(e,e,new $c(n,r))}static inline(e,n,r,s){return new yt(e,n,new ci(r,s))}static node(e,n,r,s){return new yt(e,n,new rm(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ci}get widget(){return this.type instanceof $c}}const Ks=[],qi={};class $e{constructor(e,n){this.local=e.length?e:Ks,this.children=n.length?n:Ks}static create(e,n){return n.length?Ic(n,e,0,qi):jt}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,o){for(let c=0;c<this.local.length;c++){let u=this.local[c];u.from<=n&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<n&&this.children[c+1]>e){let u=this.children[c]+1;this.children[c+2].findInner(e-u,n-u,r,s+u,o)}}map(e,n,r){return this==jt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||qi)}mapInner(e,n,r,s,o){let c;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,s);f&&f.type.valid(n,f)?(c||(c=[])).push(f):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?xA(this.children,c||[],e,n,r,s,o):c?new $e(c.sort(Pi),Ks):jt}add(e,n){return n.length?this==jt?$e.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,o=0;e.forEach((u,f)=>{let h=f+r,p;if(p=T2(n,u,h)){for(s||(s=this.children.slice());o<s.length&&s[o]<f;)o+=3;s[o]==f?s[o+2]=s[o+2].addInner(u,p,h+1):s.splice(o,0,f,f+u.nodeSize,Ic(p,u,h+1,qi)),o+=3}});let c=M2(o?A2(n):n,-r);for(let u=0;u<c.length;u++)c[u].type.valid(e,c[u])||c.splice(u--,1);return new $e(c.length?this.local.concat(c).sort(Pi):this.local,s||this.children)}remove(e){return e.length==0||this==jt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let c,u=r[o]+n,f=r[o+1]+n;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<f&&(e[p]=null,(c||(c=[])).push(g));if(!c)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(c,u+1);h!=jt?r[o+2]=h:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,c;o<e.length;o++)if(c=e[o])for(let u=0;u<s.length;u++)s[u].eq(c,n)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new $e(s,r):jt}forChild(e,n){if(this==jt)return this;if(n.isLeaf)return $e.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,c=o+n.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<c&&f.to>o&&f.type instanceof ci){let h=Math.max(o,f.from)-o,p=Math.min(c,f.to)-o;h<p&&(s||(s=[])).push(f.copy(h,p))}}if(s){let u=new $e(s.sort(Pi),Ks);return r?new ei([u,r]):u}return r||jt}eq(e){if(this==e)return!0;if(!(e instanceof $e)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return im(this.localsInner(e))}localsInner(e){if(this==jt)return Ks;if(e.inlineContent||!this.local.some(ci.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ci||n.push(this.local[r]);return n}forEachSet(e){e(this)}}$e.empty=new $e([],[]);$e.removeOverlap=im;const jt=$e.empty;class ei{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,qi));return ei.from(r)}forChild(e,n){if(n.isLeaf)return $e.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,n);o!=jt&&(o instanceof ei?r=r.concat(o.members):r.push(o))}return ei.from(r)}eq(e){if(!(e instanceof ei)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let c=0;c<o.length;c++)n.push(o[c])}}return n?im(r?n:n.sort(Pi)):Ks}static from(e){switch(e.length){case 0:return jt;case 1:return e[0];default:return new ei(e.every(n=>n instanceof $e)?e:e.reduce((n,r)=>n.concat(r instanceof $e?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function xA(t,e,n,r,s,o,c){let u=t.slice();for(let h=0,p=o;h<n.maps.length;h++){let g=0;n.maps[h].forEach((x,v,S,w)=>{let k=w-S-(v-x);for(let E=0;E<u.length;E+=3){let O=u[E+1];if(O<0||x>O+p-g)continue;let B=u[E]+p-g;v>=B?u[E+1]=x<=B?-2:-1:x>=p&&k&&(u[E]+=k,u[E+1]+=k)}g+=k}),p=n.maps[h].map(p,-1)}let f=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){f=!0,u[h+1]=-1;continue}let p=n.map(t[h]+o),g=p-s;if(g<0||g>=r.content.size){f=!0;continue}let x=n.map(t[h+1]+o,-1),v=x-s,{index:S,offset:w}=r.content.findIndex(g),k=r.maybeChild(S);if(k&&w==g&&w+k.nodeSize==v){let E=u[h+2].mapInner(n,k,p+1,t[h]+o+1,c);E!=jt?(u[h]=g,u[h+1]=v,u[h+2]=E):(u[h+1]=-2,f=!0)}else f=!0}if(f){let h=vA(u,t,e,n,s,o,c),p=Ic(h,r,0,c);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,x=0;g<p.children.length;g+=3){let v=p.children[g];for(;x<u.length&&u[x]<v;)x+=3;u.splice(x,0,p.children[g],p.children[g+1],p.children[g+2])}}return new $e(e.sort(Pi),u)}function M2(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new yt(s.from+e,s.to+e,s.type))}return n}function vA(t,e,n,r,s,o,c){function u(f,h){for(let p=0;p<f.local.length;p++){let g=f.local[p].map(r,s,h);g?n.push(g):c.onRemove&&c.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)u(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<t.length;f+=3)t[f+1]==-1&&u(t[f+2],e[f]+o+1);return n}function T2(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let o=0,c;o<t.length;o++)(c=t[o])&&c.from>n&&c.to<r&&((s||(s=[])).push(c),t[o]=null);return s}function A2(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ic(t,e,n,r){let s=[],o=!1;e.forEach((u,f)=>{let h=T2(t,u,f+n);if(h){o=!0;let p=Ic(h,u,n+f+1,r);p!=jt&&s.push(f,f+u.nodeSize,p)}});let c=M2(o?A2(t):t,-n).sort(Pi);for(let u=0;u<c.length;u++)c[u].type.valid(e,c[u])||(r.onRemove&&r.onRemove(c[u].spec),c.splice(u--,1));return c.length||s.length?new $e(c,s):jt}function Pi(t,e){return t.from-e.from||t.to-e.to}function im(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[s]=o.copy(o.from,r.to),Ux(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Ux(e,s,r.copy(o.from,r.to)));break}}}return e}function Ux(t,e,n){for(;e<t.length&&Pi(n,t[e])>0;)e++;t.splice(e,0,n)}function Eh(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=jt&&e.push(r)}),t.cursorWrapper&&e.push($e.create(t.state.doc,[t.cursorWrapper.deco])),ei.from(e)}const SA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CA=Yt&&oi<=11;class wA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class kA{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new wA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Yt&&oi<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),CA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,SA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ox(this.view)){if(this.suppressingSelectionUpdates)return vr(this.view);if(Yt&&oi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ji(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=el(o))n.add(o);for(let o=e.anchorNode;o;o=el(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Ox(e)&&!this.ignoreSelectionChange(r),o=-1,c=-1,u=!1,f=[];if(e.editable)for(let p=0;p<n.length;p++){let g=this.registerMutation(n[p],f);g&&(o=o<0?g.from:Math.min(g.from,o),c=c<0?g.to:Math.max(g.to,c),g.typeOver&&(u=!0))}if(Cn&&f.length){let p=f.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,x]=p;g.parentNode&&g.parentNode.parentNode==x.parentNode?x.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let x of p){let v=x.parentNode;v&&v.nodeName=="LI"&&(!g||MA(e,g)!=v)&&x.remove()}}}let h=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Mu(r)&&(h=Qp(e))&&h.eq(ue.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,vr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,c),NA(e)),this.handleDOMChange(o,c,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||vr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];n.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(Yt&&oi<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:x}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let c=s&&s.parentNode==e.target?Mt(s)+1:0,u=r.localPosFromDOM(e.target,c,-1),f=o&&o.parentNode==e.target?Mt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Vx=new WeakMap,$x=!1;function NA(t){if(!Vx.has(t)&&(Vx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Cn,$x)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$x=!0}}function Ix(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,c=t.domAtPos(t.state.selection.anchor);return Ji(c.node,c.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function EA(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Ix(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Ix(t,n):null}function MA(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function TA(t,e,n){let{node:r,fromOffset:s,toOffset:o,from:c,to:u}=t.docView.parseRange(e,n),f=t.domSelectionRange(),h,p=f.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],Mu(f)||h.push({node:f.focusNode,offset:f.focusOffset})),Ot&&t.input.lastKeyCode===8)for(let k=o;k>s;k--){let E=r.childNodes[k-1],O=E.pmViewDesc;if(E.nodeName=="BR"&&!O){o=k;break}if(!O||O.size)break}let g=t.state.doc,x=t.someProp("domParser")||li.fromSchema(t.state.schema),v=g.resolve(c),S=null,w=x.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:AA,context:v});if(h&&h[0].pos!=null){let k=h[0].pos,E=h[1]&&h[1].pos;E==null&&(E=k),S={anchor:k+c,head:E+c}}return{doc:w,sel:S,from:c,to:u}}function AA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Bt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Bt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const jA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function OA(t,e,n,r,s){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let $=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,te=Qp(t,$);if(te&&!t.state.selection.eq(te)){if(Ot&&yr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",J=>J(t,Bi(13,"Enter"))))return;let F=t.state.tr.setSelection(te);$=="pointer"?F.setMeta("pointer",!0):$=="key"&&F.scrollIntoView(),o&&F.setMeta("composition",o),t.dispatch(F)}return}let c=t.state.doc.resolve(e),u=c.sharedDepth(n);e=c.before(u+1),n=t.state.doc.resolve(n).after(u+1);let f=t.state.selection,h=TA(t,e,n),p=t.state.doc,g=p.slice(h.from,h.to),x,v;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(x=t.state.selection.to,v="end"):(x=t.state.selection.from,v="start"),t.input.lastKeyCode=null;let S=zA(g.content,h.doc.content,h.from,x,v);if(S&&t.input.domChangeCount++,(tl&&t.input.lastIOSEnter>Date.now()-225||yr)&&s.some($=>$.nodeType==1&&!jA.test($.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",$=>$(t,Bi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(r&&f instanceof ae&&!f.empty&&f.$head.sameParent(f.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))S={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let $=qx(t,t.state.doc,h.sel);if($&&!$.eq(t.state.selection)){let te=t.state.tr.setSelection($);o&&te.setMeta("composition",o),t.dispatch(te)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof ae&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),Yt&&oi<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>h.from&&h.doc.textBetween(S.start-h.from-1,S.start-h.from+1)==" "&&(S.start--,S.endA--,S.endB--);let w=h.doc.resolveNoCache(S.start-h.from),k=h.doc.resolveNoCache(S.endB-h.from),E=p.resolve(S.start),O=w.sameParent(k)&&w.parent.inlineContent&&E.end()>=S.endA;if((tl&&t.input.lastIOSEnter>Date.now()-225&&(!O||s.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!O&&w.pos<h.doc.content.size&&(!w.sameParent(k)||!w.parent.inlineContent)&&w.pos<k.pos&&!/\S/.test(h.doc.textBetween(w.pos,k.pos,"","")))&&t.someProp("handleKeyDown",$=>$(t,Bi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&RA(p,S.start,S.endA,w,k)&&t.someProp("handleKeyDown",$=>$(t,Bi(8,"Backspace")))){yr&&Ot&&t.domObserver.suppressSelectionUpdates();return}Ot&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),yr&&!O&&w.start()!=k.start()&&k.parentOffset==0&&w.depth==k.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==S.endA&&(S.endB-=2,k=h.doc.resolveNoCache(S.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function($){return $(t,Bi(13,"Enter"))})},20));let B=S.start,G=S.endA,U=$=>{let te=$||t.state.tr.replace(B,G,h.doc.slice(S.start-h.from,S.endB-h.from));if(h.sel){let F=qx(t,te.doc,h.sel);F&&!(Ot&&t.composing&&F.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(F.head==B||F.head==te.mapping.map(G)-1)||Yt&&F.empty&&F.head==B)&&te.setSelection(F)}return o&&te.setMeta("composition",o),te.scrollIntoView()},Y;if(O)if(w.pos==k.pos){Yt&&oi<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>vr(t),20));let $=U(t.state.tr.delete(B,G)),te=p.resolve(S.start).marksAcross(p.resolve(S.endA));te&&$.ensureMarks(te),t.dispatch($)}else if(S.endA==S.endB&&(Y=DA(w.parent.content.cut(w.parentOffset,k.parentOffset),E.parent.content.cut(E.parentOffset,S.endA-E.start())))){let $=U(t.state.tr);Y.type=="add"?$.addMark(B,G,Y.mark):$.removeMark(B,G,Y.mark),t.dispatch($)}else if(w.parent.child(w.index()).isText&&w.index()==k.index()-(k.textOffset?0:1)){let $=w.parent.textBetween(w.parentOffset,k.parentOffset),te=()=>U(t.state.tr.insertText($,B,G));t.someProp("handleTextInput",F=>F(t,B,G,$,te))||t.dispatch(te())}else t.dispatch(U());else t.dispatch(U())}function qx(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Wp(t,e.resolve(n.anchor),e.resolve(n.head))}function DA(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,o=r,c,u,f;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(s.length==1&&o.length==0)u=s[0],c="add",f=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&o.length==1)u=o[0],c="remove",f=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(f(e.child(p)));if(K.from(h).eq(t))return{mark:u,type:c}}function RA(t,e,n,r,s){if(n-e<=s.pos-r.pos||Mh(r,!0,!1)<s.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&n==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let c=t.resolve(Mh(o,!0,!0));return!c.parent.isTextblock||c.pos>n||Mh(c,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(c.parent.content)}function Mh(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function zA(t,e,n,r,s){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:c,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let f=Math.max(0,o-Math.min(c,u));r-=c+f-o}if(c<o&&t.size<e.size){let f=r<=o&&r>=c?o-r:0;o-=f,o&&o<e.size&&Px(e.textBetween(o-1,o+1))&&(o+=f?1:-1),u=o+(u-c),c=o}else if(u<o){let f=r<=o&&r>=u?o-r:0;o-=f,o&&o<t.size&&Px(t.textBetween(o-1,o+1))&&(o+=f?1:-1),c=o+(c-u),u=o}return{start:o,endA:c,endB:u}}function Px(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class j2{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ZT,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Jx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Yx(this),Gx(this),this.nodeViews=Fx(this),this.docView=Nx(this.state.doc,Kx(this),Eh(this),this.dom,this),this.domObserver=new kA(this,(r,s,o,c)=>OA(this,r,s,o,c)),this.domObserver.start(),eA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&up(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Jx),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,o=!1,c=!1;e.storedMarks&&this.composing&&(w2(this),c=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let v=Fx(this);BA(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&up(this),this.editable=Yx(this),Gx(this);let f=Eh(this),h=Kx(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",g=o||!this.docView.matchesNode(e.doc,h,f);(g||!e.selection.eq(s.selection))&&(c=!0);let x=p=="preserve"&&c&&this.dom.style.overflowAnchor==null&&pT(this);if(c){this.domObserver.stop();let v=g&&(Yt||Ot)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&LA(s.selection,e.selection);if(g){let S=Ot?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=hA(this)),(o||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Nx(e.doc,h,f,this.dom,this)),S&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&HT(this))?vr(this,v):(d2(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():x&&mT(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof se){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&xx(this,n.getBoundingClientRect(),e)}else xx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new N2(e.slice,e.move,s<0?void 0:se.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let c=0;c<this.directPlugins.length;c++){let u=this.directPlugins[c].props[e];if(u!=null&&(s=n?n(u):u))return s}let o=this.state.plugins;if(o)for(let c=0;c<o.length;c++){let u=o[c].props[e];if(u!=null&&(s=n?n(u):u))return s}}hasFocus(){if(Yt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&gT(this.dom),vr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return ST(this,e)}coordsAtPos(e,n=1){return r2(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return ET(this,n||this.state,e)}pasteHTML(e,n){return To(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return To(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Zp(this,e)}destroy(){this.docView&&(tA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Eh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,rT())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return rA(this,e)}domSelectionRange(){let e=this.domSelection();return e?Bt&&this.root.nodeType===11&&aT(this.dom.ownerDocument)==this.dom&&EA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}j2.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Kx(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[yt.node(0,t.state.doc.content.size,e)]}function Gx(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:yt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Yx(t){return!t.someProp("editable",e=>e(t.state)===!1)}function LA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Fx(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function BA(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Jx(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ui={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_A=typeof navigator<"u"&&/Mac/.test(navigator.platform),HA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tt=0;Tt<10;Tt++)ui[48+Tt]=ui[96+Tt]=String(Tt);for(var Tt=1;Tt<=24;Tt++)ui[Tt+111]="F"+Tt;for(var Tt=65;Tt<=90;Tt++)ui[Tt]=String.fromCharCode(Tt+32),qc[Tt]=String.fromCharCode(Tt);for(var Th in ui)qc.hasOwnProperty(Th)||(qc[Th]=ui[Th]);function UA(t){var e=_A&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||HA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?qc:ui)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const VA=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),$A=typeof navigator<"u"&&/Win/.test(navigator.platform);function IA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,o,c;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))VA?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),c&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function qA(t){let e=Object.create(null);for(let n in t)e[IA(n)]=t[n];return e}function Ah(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function PA(t){return new Ye({props:{handleKeyDown:sm(t)}})}function sm(t){let e=qA(t);return function(n,r){let s=UA(r),o,c=e[Ah(s,r)];if(c&&c(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[Ah(s,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!($A&&r.ctrlKey&&r.altKey)&&(o=ui[r.keyCode])&&o!=s){let u=e[Ah(o,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var KA=Object.defineProperty,lm=(t,e)=>{for(var n in e)KA(t,n,{get:e[n],enumerable:!0})};function ju(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var Ou=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([c,u])=>[c,(...h)=>{const p=u(...h)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,c=[],u=!!t,f=t||s.tr,h=()=>(!u&&e&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),c.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(n).map(([g,x])=>[g,(...S)=>{const w=this.buildProps(f,e),k=x(...S)(w);return c.push(k),p}])),run:h};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([u,f])=>[u,(...h)=>f(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,c={tr:t,editor:r,view:o,state:ju({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,f])=>[u,(...h)=>f(...h)(c)]))}};return c}},O2={};lm(O2,{blur:()=>GA,clearContent:()=>YA,clearNodes:()=>FA,command:()=>JA,createParagraphNear:()=>XA,cut:()=>QA,deleteCurrentNode:()=>WA,deleteNode:()=>ZA,deleteRange:()=>ej,deleteSelection:()=>tj,enter:()=>nj,exitCode:()=>rj,extendMarkRange:()=>ij,first:()=>sj,focus:()=>lj,forEach:()=>oj,insertContent:()=>aj,insertContentAt:()=>dj,joinBackward:()=>pj,joinDown:()=>hj,joinForward:()=>mj,joinItemBackward:()=>gj,joinItemForward:()=>yj,joinTextblockBackward:()=>bj,joinTextblockForward:()=>xj,joinUp:()=>fj,keyboardShortcut:()=>Sj,lift:()=>Cj,liftEmptyBlock:()=>wj,liftListItem:()=>kj,newlineInCode:()=>Nj,resetAttributes:()=>Ej,scrollIntoView:()=>Mj,selectAll:()=>Tj,selectNodeBackward:()=>Aj,selectNodeForward:()=>jj,selectParentNode:()=>Oj,selectTextblockEnd:()=>Dj,selectTextblockStart:()=>Rj,setContent:()=>zj,setMark:()=>Qj,setMeta:()=>Wj,setNode:()=>Zj,setNodeSelection:()=>e3,setTextSelection:()=>t3,sinkListItem:()=>n3,splitBlock:()=>r3,splitListItem:()=>i3,toggleList:()=>s3,toggleMark:()=>l3,toggleNode:()=>o3,toggleWrap:()=>a3,undoInputRule:()=>c3,unsetAllMarks:()=>u3,unsetMark:()=>d3,updateAttributes:()=>f3,wrapIn:()=>h3,wrapInList:()=>p3});var GA=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),YA=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),FA=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:c})=>{t.doc.nodesBetween(o.pos,c.pos,(u,f)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(f)),x=h.resolve(p.map(f+u.nodeSize)),v=g.blockRange(x);if(!v)return;const S=ol(v);if(u.type.isTextblock){const{defaultType:w}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(v.start,w)}(S||S===0)&&e.lift(v,S)})}),!0},JA=t=>e=>t(e),XA=()=>({state:t,dispatch:e})=>Yv(t,e),QA=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const c=r.mapping.map(e);return r.insert(c,o.content),r.setSelection(new ae(r.doc.resolve(Math.max(c-1,0)))),!0},WA=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const u=s.before(o),f=s.after(o);t.delete(u,f).scrollIntoView()}return!0}return!1};function ft(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var ZA=t=>({tr:e,state:n,dispatch:r})=>{const s=ft(t,n.schema),o=e.selection.$anchor;for(let c=o.depth;c>0;c-=1)if(o.node(c).type===s){if(r){const f=o.before(c),h=o.after(c);e.delete(f,h).scrollIntoView()}return!0}return!1},ej=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},tj=()=>({state:t,dispatch:e})=>Kp(t,e),nj=()=>({commands:t})=>t.keyboardShortcut("Enter"),rj=()=>({state:t,dispatch:e})=>IM(t,e);function om(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Pc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:om(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function D2(t,e,n={}){return t.find(r=>r.type===e&&Pc(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Xx(t,e,n={}){return!!D2(t,e,n)}function am(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!D2([...s.node.marks],e,n)))return;let c=s.index,u=t.start()+s.offset,f=c+1,h=u+s.node.nodeSize;for(;c>0&&Xx([...t.parent.child(c-1).marks],e,n);)c-=1,u-=t.parent.child(c).nodeSize;for(;f<t.parent.childCount&&Xx([...t.parent.child(f).marks],e,n);)h+=t.parent.child(f).nodeSize,f+=1;return{from:u,to:h}}function Cr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var ij=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const o=Cr(t,r.schema),{doc:c,selection:u}=n,{$from:f,from:h,to:p}=u;if(s){const g=am(f,o,e);if(g&&g.from<=h&&g.to>=p){const x=ae.create(c,g.from,g.to);n.setSelection(x)}}return!0},sj=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function R2(t){return t instanceof ae}function Ui(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function z2(t,e=null){if(!e)return null;const n=ue.atStart(t),r=ue.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,o=r.to;return e==="all"?ae.create(t,Ui(0,s,o),Ui(t.content.size,s,o)):ae.create(t,Ui(e,s,o),Ui(e,s,o))}function L2(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Du(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var lj=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const c=()=>{(Du()||L2())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!R2(n.state.selection))return c(),!0;const u=z2(s.doc,t)||n.state.selection,f=n.state.selection.eq(u);return o&&(f||s.setSelection(u),f&&s.storedMarks&&s.setStoredMarks(s.storedMarks),c()),!0},oj=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),aj=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),B2=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&B2(r)}return t};function dc(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return B2(n)}function jo(t,e,n){if(t instanceof jn||t instanceof K)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return K.fromArray(t.map(u=>e.nodeFromJSON(u)));const c=e.nodeFromJSON(t);return n.errorOnInvalidContent&&c.check(),c}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),jo("",e,n)}if(s){if(n.errorOnInvalidContent){let c=!1,u="";const f=new vv({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(c=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?li.fromSchema(f).parseSlice(dc(t),n.parseOptions):li.fromSchema(f).parse(dc(t),n.parseOptions),n.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=li.fromSchema(e);return n.slice?o.parseSlice(dc(t),n.parseOptions).content:o.parse(dc(t),n.parseOptions)}return jo("",e,n)}function cj(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof gt||s instanceof bt))return;const o=t.mapping.maps[r];let c=0;o.forEach((u,f,h,p)=>{c===0&&(c=p)}),t.setSelection(ue.near(t.doc.resolve(c),n))}var uj=t=>!("type"in t),dj=(t,e,n)=>({tr:r,dispatch:s,editor:o})=>{var c;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const f=k=>{o.emit("contentError",{editor:o,error:k,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{jo(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(k){f(k)}try{u=jo(e,o.schema,{parseOptions:h,errorOnInvalidContent:(c=n.errorOnInvalidContent)!=null?c:o.options.enableContentCheck})}catch(k){return f(k),!1}let{from:p,to:g}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},x=!0,v=!0;if((uj(u)?u:[u]).forEach(k=>{k.check(),x=x?k.isText&&k.marks.length===0:!1,v=v?k.isBlock:!1}),p===g&&v){const{parent:k}=r.doc.resolve(p);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(p-=1,g+=1)}let w;if(x){if(Array.isArray(e))w=e.map(k=>k.text||"").join("");else if(e instanceof K){let k="";e.forEach(E=>{E.text&&(k+=E.text)}),w=k}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,p,g)}else{w=u;const k=r.doc.resolve(p),E=k.node(),O=k.parentOffset===0,B=E.isText||E.isTextblock,G=E.content.size>0;O&&B&&G&&(p=Math.max(0,p-1)),r.replaceWith(p,g,w)}n.updateSelection&&cj(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:w})}return!0},fj=()=>({state:t,dispatch:e})=>UM(t,e),hj=()=>({state:t,dispatch:e})=>VM(t,e),pj=()=>({state:t,dispatch:e})=>Vv(t,e),mj=()=>({state:t,dispatch:e})=>Pv(t,e),gj=()=>({state:t,dispatch:e,tr:n})=>{try{const r=ku(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},yj=()=>({state:t,dispatch:e,tr:n})=>{try{const r=ku(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},bj=()=>({state:t,dispatch:e})=>_M(t,e),xj=()=>({state:t,dispatch:e})=>HM(t,e);function _2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function vj(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,o,c;for(let u=0;u<e.length-1;u+=1){const f=e[u];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))Du()||_2()?c=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),c&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var Sj=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const o=vj(t).split(/-(?!$)/),c=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,u))});return f?.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function di(t,e,n={}){const{from:r,to:s,empty:o}=t.selection,c=e?ft(e,t.schema):null,u=[];t.doc.nodesBetween(r,s,(g,x)=>{if(g.isText)return;const v=Math.max(r,x),S=Math.min(s,x+g.nodeSize);u.push({node:g,from:v,to:S})});const f=s-r,h=u.filter(g=>c?c.name===g.node.type.name:!0).filter(g=>Pc(g.node.attrs,n,{strict:!1}));return o?!!h.length:h.reduce((g,x)=>g+x.to-x.from,0)>=f}var Cj=(t,e={})=>({state:n,dispatch:r})=>{const s=ft(t,n.schema);return di(n,s,e)?$M(n,r):!1},wj=()=>({state:t,dispatch:e})=>Fv(t,e),kj=t=>({state:e,dispatch:n})=>{const r=ft(t,e.schema);return ZM(r)(e,n)},Nj=()=>({state:t,dispatch:e})=>Gv(t,e);function Ru(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Qx(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var Ej=(t,e)=>({tr:n,state:r,dispatch:s})=>{let o=null,c=null;const u=Ru(typeof t=="string"?t:t.name,r.schema);return u?(u==="node"&&(o=ft(t,r.schema)),u==="mark"&&(c=Cr(t,r.schema)),s&&n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(h,p)=>{o&&o===h.type&&n.setNodeMarkup(p,void 0,Qx(h.attrs,e)),c&&h.marks.length&&h.marks.forEach(g=>{c===g.type&&n.addMark(p,p+h.nodeSize,c.create(Qx(g.attrs,e)))})})}),!0):!1},Mj=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Tj=()=>({tr:t,dispatch:e})=>{if(e){const n=new on(t.doc);t.setSelection(n)}return!0},Aj=()=>({state:t,dispatch:e})=>Iv(t,e),jj=()=>({state:t,dispatch:e})=>Kv(t,e),Oj=()=>({state:t,dispatch:e})=>KM(t,e),Dj=()=>({state:t,dispatch:e})=>FM(t,e),Rj=()=>({state:t,dispatch:e})=>YM(t,e);function dp(t,e,n={},r={}){return jo(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var zj=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:c,commands:u})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const h=dp(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return c&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!n),!0}return c&&o.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:f.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function H2(t,e){const n=Cr(e,t.schema),{from:r,to:s,empty:o}=t.selection,c=[];o?(t.storedMarks&&c.push(...t.storedMarks),c.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,f=>{c.push(...f.marks)});const u=c.find(f=>f.type.name===n.name);return u?{...u.attrs}:{}}function U2(t,e){const n=new qp(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function Lj(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Bj(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function V2(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function zu(t){return e=>V2(e.$from,t)}function le(t,e,n){return t.config[e]===void 0&&t.parent?le(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?le(t.parent,e,n):null}):t.config[e]}function cm(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=le(e,"addExtensions",n);return r?[e,...cm(r())]:e}).flat(10)}function um(t,e){const n=es.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function $2(t){return typeof t=="function"}function Te(t,e=void 0,...n){return $2(t)?e?t.bind(e)(...n):t(...n):t}function _j(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Oo(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function I2(t){const e=[],{nodeExtensions:n,markExtensions:r}=Oo(t),s=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(c=>{const u={name:c.name,options:c.options,storage:c.storage,extensions:s},f=le(c,"addGlobalAttributes",u);if(!f)return;f().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([x,v])=>{e.push({type:g,name:x,attribute:{...o,...v}})})})})}),s.forEach(c=>{const u={name:c.name,options:c.options,storage:c.storage},f=le(c,"addAttributes",u);if(!f)return;const h=f();Object.entries(h).forEach(([p,g])=>{const x={...o,...g};typeof x?.default=="function"&&(x.default=x.default()),x?.isRequired&&x?.default===void 0&&delete x.default,e.push({type:c.name,name:p,attribute:x})})}),e}function Ve(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const u=o?String(o).split(" "):[],f=r[s]?r[s].split(" "):[],h=u.filter(p=>!f.includes(p));r[s]=[...f,...h].join(" ")}else if(s==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],f=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;f.forEach(p=>{const[g,x]=p.split(":").map(v=>v.trim());h.set(g,x)}),u.forEach(p=>{const[g,x]=p.split(":").map(v=>v.trim());h.set(g,x)}),r[s]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[s]=o}),r},{})}function Do(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ve(n,r),{})}function Hj(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Wx(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((o,c)=>{const u=c.attribute.parseHTML?c.attribute.parseHTML(n):Hj(n.getAttribute(c.name));return u==null?o:{...o,[c.name]:u}},{});return{...r,...s}}}}function Zx(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&_j(n)?!1:n!=null))}function Uj(t,e){var n;const r=I2(t),{nodeExtensions:s,markExtensions:o}=Oo(t),c=(n=s.find(h=>le(h,"topNode")))==null?void 0:n.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(E=>E.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},x=t.reduce((E,O)=>{const B=le(O,"extendNodeSchema",g);return{...E,...B?B(h):{}}},{}),v=Zx({...x,content:Te(le(h,"content",g)),marks:Te(le(h,"marks",g)),group:Te(le(h,"group",g)),inline:Te(le(h,"inline",g)),atom:Te(le(h,"atom",g)),selectable:Te(le(h,"selectable",g)),draggable:Te(le(h,"draggable",g)),code:Te(le(h,"code",g)),whitespace:Te(le(h,"whitespace",g)),linebreakReplacement:Te(le(h,"linebreakReplacement",g)),defining:Te(le(h,"defining",g)),isolating:Te(le(h,"isolating",g)),attrs:Object.fromEntries(p.map(E=>{var O,B;return[E.name,{default:(O=E?.attribute)==null?void 0:O.default,validate:(B=E?.attribute)==null?void 0:B.validate}]}))}),S=Te(le(h,"parseHTML",g));S&&(v.parseDOM=S.map(E=>Wx(E,p)));const w=le(h,"renderHTML",g);w&&(v.toDOM=E=>w({node:E,HTMLAttributes:Do(E,p)}));const k=le(h,"renderText",g);return k&&(v.toText=k),[h.name,v]})),f=Object.fromEntries(o.map(h=>{const p=r.filter(k=>k.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},x=t.reduce((k,E)=>{const O=le(E,"extendMarkSchema",g);return{...k,...O?O(h):{}}},{}),v=Zx({...x,inclusive:Te(le(h,"inclusive",g)),excludes:Te(le(h,"excludes",g)),group:Te(le(h,"group",g)),spanning:Te(le(h,"spanning",g)),code:Te(le(h,"code",g)),attrs:Object.fromEntries(p.map(k=>{var E,O;return[k.name,{default:(E=k?.attribute)==null?void 0:E.default,validate:(O=k?.attribute)==null?void 0:O.validate}]}))}),S=Te(le(h,"parseHTML",g));S&&(v.parseDOM=S.map(k=>Wx(k,p)));const w=le(h,"renderHTML",g);return w&&(v.toDOM=k=>w({mark:k,HTMLAttributes:Do(k,p)})),[h.name,v]}));return new vv({topNode:c,nodes:u,marks:f})}function Vj(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function dm(t){return t.sort((n,r)=>{const s=le(n,"priority")||100,o=le(r,"priority")||100;return s>o?-1:s<o?1:0})}function q2(t){const e=dm(cm(t)),n=Vj(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function P2(t,e,n){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:c={}}=n||{};let u="";return t.nodesBetween(r,s,(f,h,p,g)=>{var x;f.isBlock&&h>r&&(u+=o);const v=c?.[f.type.name];if(v)return p&&(u+=v({node:f,pos:h,parent:p,index:g,range:e})),!1;f.isText&&(u+=(x=f?.text)==null?void 0:x.slice(Math.max(r,h)-h,s-h))}),u}function $j(t,e){const n={from:0,to:t.content.size};return P2(t,n,e)}function K2(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Ij(t,e){const n=ft(e,t.schema),{from:r,to:s}=t.selection,o=[];t.doc.nodesBetween(r,s,u=>{o.push(u)});const c=o.reverse().find(u=>u.type.name===n.name);return c?{...c.attrs}:{}}function G2(t,e){const n=Ru(typeof e=="string"?e:e.name,t.schema);return n==="node"?Ij(t,e):n==="mark"?H2(t,e):{}}function qj(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function Pj(t){const e=qj(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,c)=>c!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Y2(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,o)=>{const c=[];if(s.ranges.length)s.forEach((u,f)=>{c.push({from:u,to:f})});else{const{from:u,to:f}=n[o];if(u===void 0||f===void 0)return;c.push({from:u,to:f})}c.forEach(({from:u,to:f})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(f),g=e.invert().map(h,-1),x=e.invert().map(p);r.push({oldRange:{from:g,to:x},newRange:{from:h,to:p}})})}),Pj(r)}function fm(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const o=n.resolve(t),c=am(o,s.type);c&&r.push({mark:s,...c})}):n.nodesBetween(t,e,(s,o)=>{!s||s?.nodeSize===void 0||r.push(...s.marks.map(c=>({from:o,to:o+s.nodeSize,mark:c})))}),r}var Kj=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let o=r,c=null;for(;o>0&&c===null;){const u=s.node(o);u?.type.name===e?c=u:o-=1}return[c,o]};function jh(t,e){return e.nodes[t]||e.marks[t]||null}function Mc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var Gj=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,o,c,u)=>{var f,h;const p=((h=(f=s.type.spec).toText)==null?void 0:h.call(f,{node:s,pos:o,parent:c,index:u}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-o))}),n};function fp(t,e,n={}){const{empty:r,ranges:s}=t.selection,o=e?Cr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(g=>o?o.name===g.type.name:!0).find(g=>Pc(g.attrs,n,{strict:!1}));let c=0;const u=[];if(s.forEach(({$from:g,$to:x})=>{const v=g.pos,S=x.pos;t.doc.nodesBetween(v,S,(w,k)=>{if(!w.isText&&!w.marks.length)return;const E=Math.max(v,k),O=Math.min(S,k+w.nodeSize),B=O-E;c+=B,u.push(...w.marks.map(G=>({mark:G,from:E,to:O})))})}),c===0)return!1;const f=u.filter(g=>o?o.name===g.mark.type.name:!0).filter(g=>Pc(g.mark.attrs,n,{strict:!1})).reduce((g,x)=>g+x.to-x.from,0),h=u.filter(g=>o?g.mark.type!==o&&g.mark.type.excludes(o):!0).reduce((g,x)=>g+x.to-x.from,0);return(f>0?f+h:f)>=c}function Yj(t,e,n={}){if(!e)return di(t,null,n)||fp(t,null,n);const r=Ru(e,t.schema);return r==="node"?di(t,e,n):r==="mark"?fp(t,e,n):!1}var Fj=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const o=zu(u=>u.type.name===e)(t.selection);if(!o)return!1;const c=t.doc.resolve(o.pos+1);return s.pos+1===c.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},Jj=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function e1(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function t1(t,e){const{nodeExtensions:n}=Oo(e),r=n.find(c=>c.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=Te(le(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Lu(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(o=>{s!==!1&&(Lu(o,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function F2(t){return t instanceof se}function Xj(t,e,n){var r;const{selection:s}=e;let o=null;if(R2(s)&&(o=s.$cursor),o){const u=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(h=>h.type.excludes(n)))}const{ranges:c}=s;return c.some(({$from:u,$to:f})=>{let h=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,f.pos,(p,g,x)=>{if(h)return!1;if(p.isInline){const v=!x||x.type.allowsMarkType(n),S=!!n.isInSet(p.marks)||!p.marks.some(w=>w.type.excludes(n));h=v&&S}return!h}),h})}var Qj=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:c,ranges:u}=o,f=Cr(t,r.schema);if(s)if(c){const h=H2(r,f);n.addStoredMark(f.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(x,v)=>{const S=Math.max(v,p),w=Math.min(v+x.nodeSize,g);x.marks.find(E=>E.type===f)?x.marks.forEach(E=>{f===E.type&&n.addMark(S,w,f.create({...E.attrs,...e}))}):n.addMark(S,w,f.create(e))})});return Xj(r,n,f)},Wj=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Zj=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const o=ft(t,n.schema);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:u})=>gx(o,{...c,...e})(n)?!0:u.clearNodes()).command(({state:u})=>gx(o,{...c,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},e3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Ui(t,0,r.content.size),o=se.create(r,s);e.setSelection(o)}return!0},t3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:o}=typeof t=="number"?{from:t,to:t}:t,c=ae.atStart(r).from,u=ae.atEnd(r).to,f=Ui(s,c,u),h=Ui(o,c,u),p=ae.create(r,f,h);e.setSelection(p)}return!0},n3=t=>({state:e,dispatch:n})=>{const r=ft(t,e.schema);return nT(r)(e,n)};function n1(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e?.includes(s.type.name));t.tr.ensureMarks(r)}}var r3=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:c}=e,{$from:u,$to:f}=o,h=s.extensionManager.attributes,p=Mc(h,u.node().type.name,u.node().attrs);if(o instanceof se&&o.node.isBlock)return!u.parentOffset||!xr(c,u.pos)?!1:(r&&(t&&n1(n,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=f.parentOffset===f.parent.content.size,x=u.depth===0?void 0:Lj(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=g&&x?[{type:x,attrs:p}]:void 0,S=xr(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!S&&xr(e.doc,e.mapping.map(u.pos),1,x?[{type:x}]:void 0)&&(S=!0,v=x?[{type:x,attrs:p}]:void 0),r){if(S&&(o instanceof ae&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),x&&!g&&!u.parentOffset&&u.parent.type!==x)){const w=e.mapping.map(u.before()),k=e.doc.resolve(w);u.node(-1).canReplaceWith(k.index(),k.index()+1,x)&&e.setNodeMarkup(e.mapping.map(u.before()),x)}t&&n1(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return S},i3=(t,e={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var c;const u=ft(t,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const g=f.node(-1);if(g.type!==u)return!1;const x=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==u||f.index(-2)!==f.node(-2).childCount-1)return!1;if(s){let E=K.empty;const O=f.index(-1)?1:f.index(-2)?2:3;for(let te=f.depth-O;te>=f.depth-3;te-=1)E=K.from(f.node(te).copy(E));const B=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,G={...Mc(x,f.node().type.name,f.node().attrs),...e},U=((c=u.contentMatch.defaultType)==null?void 0:c.createAndFill(G))||void 0;E=E.append(K.from(u.createAndFill(null,U)||void 0));const Y=f.before(f.depth-(O-1));n.replace(Y,f.after(-B),new Z(E,4-O,0));let $=-1;n.doc.nodesBetween(Y,n.doc.content.size,(te,F)=>{if($>-1)return!1;te.isTextblock&&te.content.size===0&&($=F+1)}),$>-1&&n.setSelection(ae.near(n.doc.resolve($))),n.scrollIntoView()}return!0}const v=h.pos===f.end()?g.contentMatchAt(0).defaultType:null,S={...Mc(x,g.type.name,g.attrs),...e},w={...Mc(x,f.node().type.name,f.node().attrs),...e};n.delete(f.pos,h.pos);const k=v?[{type:u,attrs:S},{type:v,attrs:w}]:[{type:u,attrs:S}];if(!xr(n.doc,f.pos,2))return!1;if(s){const{selection:E,storedMarks:O}=r,{splittableMarks:B}=o.extensionManager,G=O||E.$to.parentOffset&&E.$from.marks();if(n.split(f.pos,2,k).scrollIntoView(),!G||!s)return!0;const U=G.filter(Y=>B.includes(Y.type.name));n.ensureMarks(U)}return!0},Oh=(t,e)=>{const n=zu(c=>c.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&hi(t.doc,n.pos)&&t.join(n.pos),!0},Dh=(t,e)=>{const n=zu(c=>c.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&hi(t.doc,r)&&t.join(r),!0},s3=(t,e,n,r={})=>({editor:s,tr:o,state:c,dispatch:u,chain:f,commands:h,can:p})=>{const{extensions:g,splittableMarks:x}=s.extensionManager,v=ft(t,c.schema),S=ft(e,c.schema),{selection:w,storedMarks:k}=c,{$from:E,$to:O}=w,B=E.blockRange(O),G=k||w.$to.parentOffset&&w.$from.marks();if(!B)return!1;const U=zu(Y=>t1(Y.type.name,g))(w);if(B.depth>=1&&U&&B.depth-U.depth<=1){if(U.node.type===v)return h.liftListItem(S);if(t1(U.node.type.name,g)&&v.validContent(U.node.content)&&u)return f().command(()=>(o.setNodeMarkup(U.pos,v),!0)).command(()=>Oh(o,v)).command(()=>Dh(o,v)).run()}return!n||!G||!u?f().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>Oh(o,v)).command(()=>Dh(o,v)).run():f().command(()=>{const Y=p().wrapInList(v,r),$=G.filter(te=>x.includes(te.type.name));return o.ensureMarks($),Y?!0:h.clearNodes()}).wrapInList(v,r).command(()=>Oh(o,v)).command(()=>Dh(o,v)).run()},l3=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,c=Cr(t,r.schema);return fp(r,c,e)?s.unsetMark(c,{extendEmptyMarkRange:o}):s.setMark(c,e)},o3=(t,e,n={})=>({state:r,commands:s})=>{const o=ft(t,r.schema),c=ft(e,r.schema),u=di(r,o,n);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),u?s.setNode(c,f):s.setNode(o,{...f,...n})},a3=(t,e={})=>({state:n,commands:r})=>{const s=ft(t,n.schema);return di(n,s,e)?r.lift(s):r.wrapIn(s,e)},c3=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(t))){if(e){const c=t.tr,u=o.transform;for(let f=u.steps.length-1;f>=0;f-=1)c.step(u.steps[f].invert(u.docs[f]));if(o.text){const f=c.doc.resolve(o.from).marks();c.replaceWith(o.from,o.to,t.schema.text(o.text,f))}else c.delete(o.from,o.to)}return!0}}return!1},u3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},d3=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:c=!1}=e,{selection:u}=n,f=Cr(t,r.schema),{$from:h,empty:p,ranges:g}=u;if(!s)return!0;if(p&&c){let{from:x,to:v}=u;const S=(o=h.marks().find(k=>k.type===f))==null?void 0:o.attrs,w=am(h,f,S);w&&(x=w.from,v=w.to),n.removeMark(x,v,f)}else g.forEach(x=>{n.removeMark(x.$from.pos,x.$to.pos,f)});return n.removeStoredMark(f),!0},f3=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let o=null,c=null;const u=Ru(typeof t=="string"?t:t.name,r.schema);return u?(u==="node"&&(o=ft(t,r.schema)),u==="mark"&&(c=Cr(t,r.schema)),s&&n.selection.ranges.forEach(f=>{const h=f.$from.pos,p=f.$to.pos;let g,x,v,S;n.selection.empty?r.doc.nodesBetween(h,p,(w,k)=>{o&&o===w.type&&(v=Math.max(k,h),S=Math.min(k+w.nodeSize,p),g=k,x=w)}):r.doc.nodesBetween(h,p,(w,k)=>{k<h&&o&&o===w.type&&(v=Math.max(k,h),S=Math.min(k+w.nodeSize,p),g=k,x=w),k>=h&&k<=p&&(o&&o===w.type&&n.setNodeMarkup(k,void 0,{...w.attrs,...e}),c&&w.marks.length&&w.marks.forEach(E=>{if(c===E.type){const O=Math.max(k,h),B=Math.min(k+w.nodeSize,p);n.addMark(O,B,c.create({...E.attrs,...e}))}}))}),x&&(g!==void 0&&n.setNodeMarkup(g,void 0,{...x.attrs,...e}),c&&x.marks.length&&x.marks.forEach(w=>{c===w.type&&n.addMark(v,S,c.create({...w.attrs,...e}))}))}),!0):!1},h3=(t,e={})=>({state:n,dispatch:r})=>{const s=ft(t,n.schema);return JM(s,e)(n,r)},p3=(t,e={})=>({state:n,dispatch:r})=>{const s=ft(t,n.schema);return XM(s,e)(n,r)},m3=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Bu=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},g3=(t,e)=>{if(om(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function fc(t){var e;const{editor:n,from:r,to:s,text:o,rules:c,plugin:u}=t,{view:f}=n;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let p=!1;const g=Gj(h)+o;return c.forEach(x=>{if(p)return;const v=g3(g,x.find);if(!v)return;const S=f.state.tr,w=ju({state:f.state,transaction:S}),k={from:r-(v[0].length-o.length),to:s},{commands:E,chain:O,can:B}=new Ou({editor:n,state:w});x.handler({state:w,range:k,match:v,commands:E,chain:O,can:B})===null||!S.steps.length||(x.undoable&&S.setMeta(u,{transform:S,from:r,to:s,text:o}),f.dispatch(S),p=!0)}),p}function y3(t){const{editor:e,rules:n}=t,r=new Ye({state:{init(){return null},apply(s,o,c){const u=s.getMeta(r);if(u)return u;const f=s.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:p}=f;typeof p=="string"?p=p:p=um(K.from(p),c.schema);const{from:g}=f,x=g+p.length;fc({editor:e,from:g,to:x,text:p,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,c,u){return fc({editor:e,from:o,to:c,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&fc({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:c}=s.state.selection;return c?fc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function b3(t){return Object.prototype.toString.call(t).slice(8,-1)}function hc(t){return b3(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function J2(t,e){const n={...t};return hc(t)&&hc(e)&&Object.keys(e).forEach(r=>{hc(e[r])&&hc(t[r])?n[r]=J2(t[r],e[r]):n[r]=e[r]}),n}var hm=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Te(le(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Te(le(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>J2(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},wr=class X2 extends hm{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new X2(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const c=s.marks();if(!!!c.find(h=>h?.type.name===n.name))return!1;const f=c.find(h=>h?.type.name===n.name);return f&&r.removeStoredMark(f),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function x3(t){return typeof t=="number"}var v3=class{constructor(t){this.find=t.find,this.handler=t.handler}},S3=(t,e,n)=>{if(om(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=t,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function C3(t){const{editor:e,state:n,from:r,to:s,rule:o,pasteEvent:c,dropEvent:u}=t,{commands:f,chain:h,can:p}=new Ou({editor:e,state:n}),g=[];return n.doc.nodesBetween(r,s,(v,S)=>{var w,k,E,O,B;if((k=(w=v.type)==null?void 0:w.spec)!=null&&k.code||!(v.isText||v.isTextblock||v.isInline))return;const G=(B=(O=(E=v.content)==null?void 0:E.size)!=null?O:v.nodeSize)!=null?B:0,U=Math.max(r,S),Y=Math.min(s,S+G);if(U>=Y)return;const $=v.isText?v.text||"":v.textBetween(U-S,Y-S,void 0,"");S3($,o.find,c).forEach(F=>{if(F.index===void 0)return;const J=U+F.index+1,qe=J+F[0].length,Se={from:n.tr.mapping.map(J),to:n.tr.mapping.map(qe)},lt=o.handler({state:n,range:Se,match:F,commands:f,chain:h,can:p,pasteEvent:c,dropEvent:u});g.push(lt)})}),g.every(v=>v!==null)}var pc=null,w3=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function k3(t){const{editor:e,rules:n}=t;let r=null,s=!1,o=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const f=({state:p,from:g,to:x,rule:v,pasteEvt:S})=>{const w=p.tr,k=ju({state:p,transaction:w});if(!(!C3({editor:e,state:k,from:Math.max(g-1,0),to:x.b-1,rule:v,pasteEvent:S,dropEvent:u})||!w.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(p=>new Ye({view(g){const x=S=>{var w;r=(w=g.dom.parentElement)!=null&&w.contains(S.target)?g.dom.parentElement:null,r&&(pc=e)},v=()=>{pc&&(pc=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(g,x)=>{if(o=r===g.dom.parentElement,u=x,!o){const v=pc;v?.isEditable&&setTimeout(()=>{const S=v.state.selection;S&&v.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(g,x)=>{var v;const S=(v=x.clipboardData)==null?void 0:v.getData("text/html");return c=x,s=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(g,x,v)=>{const S=g[0],w=S.getMeta("uiEvent")==="paste"&&!s,k=S.getMeta("uiEvent")==="drop"&&!o,E=S.getMeta("applyPasteRules"),O=!!E;if(!w&&!k&&!O)return;if(O){let{text:U}=E;typeof U=="string"?U=U:U=um(K.from(U),v.schema);const{from:Y}=E,$=Y+U.length,te=w3(U);return f({rule:p,state:v,from:Y,to:{b:$},pasteEvt:te})}const B=x.doc.content.findDiffStart(v.doc.content),G=x.doc.content.findDiffEnd(v.doc.content);if(!(!x3(B)||!G||B===G.b))return f({rule:p,state:v,from:B,to:G,pasteEvt:c})}}))}var _u=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=q2(t),this.schema=Uj(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:jh(e.name,this.schema)},r=le(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return dm([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:jh(r.name,this.schema)},o=[],c=le(r,"addKeyboardShortcuts",s);let u={};if(r.type==="mark"&&le(r,"exitable",s)&&(u.ArrowRight=()=>wr.handleExit({editor:t,mark:r})),c){const x=Object.fromEntries(Object.entries(c()).map(([v,S])=>[v,()=>S({editor:t})]));u={...u,...x}}const f=PA(u);o.push(f);const h=le(r,"addInputRules",s);if(e1(r,t.options.enableInputRules)&&h){const x=h();if(x&&x.length){const v=y3({editor:t,rules:x}),S=Array.isArray(v)?v:[v];o.push(...S)}}const p=le(r,"addPasteRules",s);if(e1(r,t.options.enablePasteRules)&&p){const x=p();if(x&&x.length){const v=k3({editor:t,rules:x});o.push(...v)}}const g=le(r,"addProseMirrorPlugins",s);if(g){const x=g();o.push(...x)}return o})}get attributes(){return I2(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Oo(this.extensions);return Object.fromEntries(e.filter(n=>!!le(n,"addNodeView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ft(n.name,this.schema)},o=le(n,"addNodeView",s);if(!o)return[];const c=(u,f,h,p,g)=>{const x=Do(u,r);return o()({node:u,view:f,getPos:h,decorations:p,innerDecorations:g,editor:t,extension:n,HTMLAttributes:x})};return[n.name,c]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Oo(this.extensions);return Object.fromEntries(e.filter(n=>!!le(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Cr(n.name,this.schema)},o=le(n,"addMarkView",s);if(!o)return[];const c=(u,f,h)=>{const p=Do(u,r);return o()({mark:u,view:f,inline:h,editor:t,extension:n,HTMLAttributes:p,updateAttributes:g=>{H3(u,t,g)}})};return[n.name,c]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:jh(e.name,this.schema)};e.type==="mark"&&((n=Te(le(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=le(e,"onBeforeCreate",r),o=le(e,"onCreate",r),c=le(e,"onUpdate",r),u=le(e,"onSelectionUpdate",r),f=le(e,"onTransaction",r),h=le(e,"onFocus",r),p=le(e,"onBlur",r),g=le(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),c&&this.editor.on("update",c),u&&this.editor.on("selectionUpdate",u),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}};_u.resolve=q2;_u.sort=dm;_u.flatten=cm;var N3={};lm(N3,{ClipboardTextSerializer:()=>W2,Commands:()=>Z2,Delete:()=>eS,Drop:()=>tS,Editable:()=>nS,FocusEvents:()=>iS,Keymap:()=>sS,Paste:()=>lS,Tabindex:()=>oS,focusEventsPluginKey:()=>rS});var Be=class Q2 extends hm{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Q2(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},W2=Be.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ye({key:new tt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:o}=s,c=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),f=K2(n);return P2(r,{from:c,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),Z2=Be.create({name:"commands",addCommands(){return{...O2}}}),eS=Be.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const o=()=>{var c,u,f,h;if((h=(f=(u=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:u.filterTransaction)==null?void 0:f.call(u,t))!=null?h:t.getMeta("y-sync$"))return;const p=U2(t.before,[t,...e]);Y2(p).forEach(v=>{p.mapping.mapResult(v.oldRange.from).deletedAfter&&p.mapping.mapResult(v.oldRange.to).deletedBefore&&p.before.nodesBetween(v.oldRange.from,v.oldRange.to,(S,w)=>{const k=w+S.nodeSize-2,E=v.oldRange.from<=w&&k<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:w,to:k,newFrom:p.mapping.map(w),newTo:p.mapping.map(k),deletedRange:v.oldRange,newRange:v.newRange,partial:!E,editor:this.editor,transaction:t,combinedTransform:p})})});const x=p.mapping;p.steps.forEach((v,S)=>{var w,k;if(v instanceof An){const E=x.slice(S).map(v.from,-1),O=x.slice(S).map(v.to),B=x.invert().map(E,-1),G=x.invert().map(O),U=(w=p.doc.nodeAt(E-1))==null?void 0:w.marks.some($=>$.eq(v.mark)),Y=(k=p.doc.nodeAt(O))==null?void 0:k.marks.some($=>$.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:B,to:G},newRange:{from:E,to:O},partial:!!(Y||U),editor:this.editor,transaction:t,combinedTransform:p})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),tS=Be.create({name:"drop",addProseMirrorPlugins(){return[new Ye({key:new tt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),nS=Be.create({name:"editable",addProseMirrorPlugins(){return[new Ye({key:new tt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),rS=new tt("focusEvents"),iS=Be.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ye({key:rS,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),sS=Be.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:u})=>{const{selection:f,doc:h}=u,{empty:p,$anchor:g}=f,{pos:x,parent:v}=g,S=g.parent.isTextblock&&x>0?u.doc.resolve(x-1):g,w=S.parent.type.spec.isolating,k=g.pos-g.parentOffset,E=w&&S.parent.childCount===1?k===g.pos:ue.atStart(h).from===x;return!p||!v.type.isTextblock||v.textContent.length||!E||E&&g.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Du()||_2()?o:s},addProseMirrorPlugins(){return[new Ye({key:new tt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const r=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),s=t.some(w=>w.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:c,to:u}=e.selection,f=ue.atStart(e.doc).from,h=ue.atEnd(e.doc).to;if(o||!(c===f&&u===h)||!Lu(n.doc))return;const x=n.tr,v=ju({state:n,transaction:x}),{commands:S}=new Ou({editor:this.editor,state:v});if(S.clearNodes(),!!x.steps.length)return x}})]}}),lS=Be.create({name:"paste",addProseMirrorPlugins(){return[new Ye({key:new tt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),oS=Be.create({name:"tabindex",addProseMirrorPlugins(){return[new Ye({key:new tt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),E3=class Gs{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Gs(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Gs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Gs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,c=this.pos+r+(o?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(c);if(!s&&u.depth<=this.depth)return;const f=new Gs(u,this.editor,s,s?n:null);s&&(f.actualDepth=this.depth+1),e.push(new Gs(u,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const o=s.node.attrs,c=Object.keys(n);for(let u=0;u<c.length;u+=1){const f=c[u];if(o[f]!==n[f])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(c=>{r&&s.length>0||(c.node.type.name===e&&o.every(f=>n[f]===c.node.attrs[f])&&s.push(c),!(r&&s.length>0)&&(s=s.concat(c.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},M3=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function T3(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var A3=class extends m3{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:o})=>this.options.onDrop(r,s,o)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=z2(e,this.options.autofocus);this.editorState=Fs.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=T3(M3,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=$2(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;n=n.filter(c=>!c.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[nS,W2.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Z2,iS,sS,oS,tS,lS,eS].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new _u(r,this)}createCommandManager(){this.commandManager=new Ou({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=dp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=dp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new j2(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const c=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=c?.getMeta("focus"),f=c?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:c}),f&&this.emit("blur",{editor:this,event:f.event,transaction:c}),!(t.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return G2(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Yj(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return um(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return $j(this.state.doc,{blockSeparator:e,textSerializers:{...K2(this.schema),...n}})}get isEmpty(){return Lu(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new E3(e,this)}get $doc(){return this.$pos(0)}};function Qi(t){return new Bu({find:t.find,handler:({state:e,range:n,match:r})=>{const s=Te(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,c=r[r.length-1],u=r[0];if(c){const f=u.search(/\S/),h=n.from+u.indexOf(c),p=h+c.length;if(fm(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(w=>w===t.type&&w!==v.mark.type)).filter(v=>v.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+f,h);const x=n.from+f+c.length;o.addMark(n.from+f,x,t.type.create(s||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function j3(t){return new Bu({find:t.find,handler:({state:e,range:n,match:r})=>{const s=Te(t.getAttributes,void 0,r)||{},{tr:o}=e,c=n.from;let u=n.to;const f=t.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=c+h;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];o.insertText(g,c+r[0].length-1),o.replaceWith(p,u,f)}else if(r[0]){const h=t.type.isInline?c:c-1;o.insert(h,t.type.create(s)).delete(o.mapping.map(c),o.mapping.map(u))}o.scrollIntoView()},undoable:t.undoable})}function hp(t){return new Bu({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),o=Te(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function nl(t){return new Bu({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const o=Te(t.getAttributes,void 0,r)||{},c=e.tr.delete(n.from,n.to),f=c.doc.resolve(n.from).blockRange(),h=f&&Ip(f,t.type,o);if(!h)return null;if(c.wrap(f,h),t.keepMarks&&t.editor){const{selection:g,storedMarks:x}=e,{splittableMarks:v}=t.editor.extensionManager,S=x||g.$to.parentOffset&&g.$from.marks();if(S){const w=S.filter(k=>v.includes(k.type.name));c.ensureMarks(w)}}if(t.keepAttributes){const g=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(g,o).run()}const p=c.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&hi(c.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&c.join(n.from-1)},undoable:t.undoable})}function O3(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof se){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}var D3={};lm(D3,{createAtomBlockMarkdownSpec:()=>R3,createBlockMarkdownSpec:()=>z3,createInlineMarkdownSpec:()=>_3,parseAttributes:()=>pm,parseIndentedBlocks:()=>pp,renderNestedMarkdownContent:()=>gm,serializeAttributes:()=>mm});function pm(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const h=s.map(p=>p.trim().slice(1));e.class=h.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(c)).forEach(([,h,p])=>{var g;const x=parseInt(((g=p.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),v=n[x];v&&(e[h]=v.slice(1,-1))});const f=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return f&&f.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function mm(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function R3(t){const{nodeName:e,name:n,parseAttributes:r=pm,serializeAttributes:s=mm,defaultAttributes:o={},requiredAttributes:c=[],allowedAttributes:u}=t,f=n||e,h=p=>{if(!u)return p;const g={};return u.forEach(x=>{x in p&&(g[x]=p[x])}),g};return{parseMarkdown:(p,g)=>{const x={...o,...p.attributes};return g.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(p){var g;const x=new RegExp(`^:::${f}(?:\\s|$)`,"m"),v=(g=p.match(x))==null?void 0:g.index;return v!==void 0?v:-1},tokenize(p,g,x){const v=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=p.match(v);if(!S)return;const w=S[1]||"",k=r(w);if(!c.find(O=>!(O in k)))return{type:e,raw:S[0],attributes:k}}},renderMarkdown:p=>{const g=h(p.attrs||{}),x=s(g),v=x?` {${x}}`:"";return`:::${f}${v} :::`}}}function z3(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=pm,serializeAttributes:o=mm,defaultAttributes:c={},content:u="block",allowedAttributes:f}=t,h=n||e,p=g=>{if(!f)return g;const x={};return f.forEach(v=>{v in g&&(x[v]=g[v])}),x};return{parseMarkdown:(g,x)=>{let v;if(r){const w=r(g);v=typeof w=="string"?[{type:"text",text:w}]:w}else u==="block"?v=x.parseChildren(g.tokens||[]):v=x.parseInline(g.tokens||[]);const S={...c,...g.attributes};return x.createNode(e,S,v)},markdownTokenizer:{name:e,level:"block",start(g){var x;const v=new RegExp(`^:::${h}`,"m"),S=(x=g.match(v))==null?void 0:x.index;return S!==void 0?S:-1},tokenize(g,x,v){var S;const w=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),k=g.match(w);if(!k)return;const[E,O=""]=k,B=s(O);let G=1;const U=E.length;let Y="";const $=/^:::([\w-]*)(\s.*)?/gm,te=g.slice(U);for($.lastIndex=0;;){const F=$.exec(te);if(F===null)break;const J=F.index,qe=F[1];if(!((S=F[2])!=null&&S.endsWith(":::"))){if(qe)G+=1;else if(G-=1,G===0){const Se=te.slice(0,J);Y=Se.trim();const lt=g.slice(0,U+J+F[0].length);let Oe=[];if(Y)if(u==="block")for(Oe=v.blockTokens(Se),Oe.forEach(De=>{De.text&&(!De.tokens||De.tokens.length===0)&&(De.tokens=v.inlineTokens(De.text))});Oe.length>0;){const De=Oe[Oe.length-1];if(De.type==="paragraph"&&(!De.text||De.text.trim()===""))Oe.pop();else break}else Oe=v.inlineTokens(Y);return{type:e,raw:lt,attributes:B,content:Y,tokens:Oe}}}}}},renderMarkdown:(g,x)=>{const v=p(g.attrs||{}),S=o(v),w=S?` {${S}}`:"",k=x.renderChildren(g.content||[],`

`);return`:::${h}${w}

${k}

:::`}}}function L3(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,o,c]=r;e[s]=o||c,r=n.exec(t)}return e}function B3(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function _3(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=L3,serializeAttributes:o=B3,defaultAttributes:c={},selfClosing:u=!1,allowedAttributes:f}=t,h=n||e,p=x=>{if(!f)return x;const v={};return f.forEach(S=>{S in x&&(v[S]=x[S])}),v},g=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,v)=>{const S={...c,...x.attributes};if(u)return v.createNode(e,S);const w=r?r(x):x.content||"";return w?v.createNode(e,S,[v.createTextNode(w)]):v.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(x){const v=u?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),S=x.match(v),w=S?.index;return w!==void 0?w:-1},tokenize(x,v,S){const w=u?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),k=x.match(w);if(!k)return;let E="",O="";if(u){const[,G]=k;O=G}else{const[,G,U]=k;O=G,E=U||""}const B=s(O.trim());return{type:e,raw:k[0],content:E.trim(),attributes:B}}},renderMarkdown:x=>{let v="";r?v=r(x):x.content&&x.content.length>0&&(v=x.content.filter(E=>E.type==="text").map(E=>E.text).join(""));const S=p(x.attrs||{}),w=o(S),k=w?` ${w}`:"";return u?`[${h}${k}]`:`[${h}${k}]${v}[/${h}]`}}}function pp(t,e,n){var r,s,o,c;const u=t.split(`
`),f=[];let h="",p=0;const g=e.baseIndentSize||2;for(;p<u.length;){const x=u[p],v=x.match(e.itemPattern);if(!v){if(f.length>0)break;if(x.trim()===""){p+=1;continue}else return}const S=e.extractItemData(v),{indentLevel:w,mainContent:k}=S;h=`${h}${x}
`;const E=[k];for(p+=1;p<u.length;){const U=u[p];if(U.trim()===""){const $=u.slice(p+1).findIndex(J=>J.trim()!=="");if($===-1)break;if((((s=(r=u[p+1+$].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>w){E.push(U),h=`${h}${U}
`,p+=1;continue}else break}if((((c=(o=U.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:c.length)||0)>w)E.push(U),h=`${h}${U}
`,p+=1;else break}let O;const B=E.slice(1);if(B.length>0){const U=B.map(Y=>Y.slice(w+g)).join(`
`);U.trim()&&(e.customNestedParser?O=e.customNestedParser(U):O=n.blockTokens(U))}const G=e.createToken(S,O);f.push(G)}if(f.length!==0)return{items:f,raw:h.trim()}}function gm(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[o,...c]=t.content,u=e.renderChildren([o]),f=[`${s}${u}`];return c&&c.length>0&&c.forEach(h=>{const p=e.renderChildren([h]);if(p){const g=p.split(`
`).map(x=>x?e.indent(x):"").join(`
`);f.push(g)}}),f.join(`
`)}function H3(t,e,n={}){const{state:r}=e,{doc:s,tr:o}=r,c=t;s.descendants((u,f)=>{const h=o.mapping.map(f),p=o.mapping.map(f)+u.nodeSize;let g=null;if(u.marks.forEach(v=>{if(v!==c)return!1;g=v}),!g)return;let x=!1;if(Object.keys(n).forEach(v=>{n[v]!==g.attrs[v]&&(x=!0)}),x){const v=t.type.create({...t.attrs,...n});o.removeMark(h,p,t.type),o.addMark(h,p,v)}}),o.docChanged&&e.view.dispatch(o)}var vt=class aS extends hm{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new aS(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},U3=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,s,o,c,u;const{view:f}=this.editor,h=t.target,p=h.nodeType===3?(e=h.parentElement)==null?void 0:e.closest("[data-drag-handle]"):h.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(h)||!p)return;let g=0,x=0;if(this.dom!==p){const O=this.dom.getBoundingClientRect(),B=p.getBoundingClientRect(),G=(s=t.offsetX)!=null?s:(r=t.nativeEvent)==null?void 0:r.offsetX,U=(c=t.offsetY)!=null?c:(o=t.nativeEvent)==null?void 0:o.offsetY;g=B.x-O.x+G,x=B.y-O.y+U}const v=this.dom.cloneNode(!0);try{const O=this.dom.getBoundingClientRect();v.style.width=`${Math.round(O.width)}px`,v.style.height=`${Math.round(O.height)}px`,v.style.boxSizing="border-box",v.style.pointerEvents="none"}catch{}let S=null;try{S=document.createElement("div"),S.style.position="absolute",S.style.top="-9999px",S.style.left="-9999px",S.style.pointerEvents="none",S.appendChild(v),document.body.appendChild(S),(u=t.dataTransfer)==null||u.setDragImage(v,g,x)}finally{S&&setTimeout(()=>{try{S?.remove()}catch{}},0)}const w=this.getPos();if(typeof w!="number")return;const k=se.create(f.state.doc,w),E=f.state.tr.setSelection(k);f.dispatch(E)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const s=t.type.startsWith("drag"),o=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!s)return!0;const{isEditable:u}=this.editor,{isDragging:f}=this,h=!!this.node.type.spec.draggable,p=se.isSelectable(this.node),g=t.type==="copy",x=t.type==="paste",v=t.type==="cut",S=t.type==="mousedown";if(!h&&p&&s&&t.target===this.dom&&t.preventDefault(),h&&s&&!f&&t.target===this.dom)return t.preventDefault(),!1;if(h&&u&&!f&&S){const w=n.closest("[data-drag-handle]");w&&(this.dom===w||this.dom.contains(w))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(f||o||g||x||v||S&&p)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(Du()||L2())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function fi(t){return new v3({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const o=Te(t.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:c}=e,u=r[r.length-1],f=r[0];let h=n.to;if(u){const p=f.search(/\S/),g=n.from+f.indexOf(u),x=g+u.length;if(fm(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(k=>k===t.type&&k!==S.mark.type)).filter(S=>S.to>g).length)return null;x<n.to&&c.delete(x,n.to),g>n.from&&c.delete(n.from+p,g),h=n.from+p+u.length,c.addMark(n.from+p,h,t.type.create(o||{})),c.removeStoredMark(t.type)}}})}var Rh,r1;function V3(){return r1||(r1=1,Rh=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;s--!==0;){var c=o[s];if(!(c==="_owner"&&e.$$typeof)&&!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n}),Rh}var $3=V3();const I3=Dp($3);var zh={exports:{}},Lh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function q3(){if(i1)return Lh;i1=1;var t=Bo(),e=rv();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return Lh.useSyncExternalStoreWithSelector=function(h,p,g,x,v){var S=o(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=u(function(){function E(Y){if(!O){if(O=!0,B=Y,Y=x(Y),v!==void 0&&w.hasValue){var $=w.value;if(v($,Y))return G=$}return G=Y}if($=G,r(B,Y))return $;var te=x(Y);return v!==void 0&&v($,te)?(B=Y,$):(B=Y,G=te)}var O=!1,B,G,U=g===void 0?null:g;return[function(){return E(p())},U===null?void 0:function(){return E(U())}]},[p,g,x,v]);var k=s(h,S[0],S[1]);return c(function(){w.hasValue=!0,w.value=k},[k]),f(k),k},Lh}var s1;function P3(){return s1||(s1=1,zh.exports=q3()),zh.exports}var K3=P3(),G3=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Y3=({contentComponent:t})=>{const e=iv.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return b.jsx(b.Fragment,{children:Object.values(e)})};function F3(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:ME.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var J3=class extends Gi.Component{constructor(t){var e;super(t),this.editorContentRef=Gi.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=F3(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:G3(e,this.editorContentRef),...n}),t?.contentComponent&&b.jsx(Y3,{contentComponent:t.contentComponent})]})}},X3=A.forwardRef((t,e)=>{const n=Gi.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Gi.createElement(J3,{key:n,innerRef:e,...t})}),cS=Gi.memo(X3),Q3=typeof window<"u"?A.useLayoutEffect:A.useEffect,W3=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function Z3(t){var e;const[n]=A.useState(()=>new W3(t.editor)),r=K3.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:I3);return Q3(()=>n.watch(t.editor),[t.editor,n]),A.useDebugValue(r),r}var eO=!1,mp=typeof window>"u",tO=mp||!!(typeof window<"u"&&window.next),nO=class uS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?mp||tO?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)==null?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)==null?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)==null?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)==null?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)==null?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)==null?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)==null?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)==null?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)==null?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)==null?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)==null?void 0:o.call(s,...r)},onDelete:(...r)=>{var s,o;return(o=(s=this.options.current).onDelete)==null?void 0:o.call(s,...r)}};return new A3(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,o)=>{var c;return s===((c=n.extensions)==null?void 0:c[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?uS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function dS(t={},e=[]){const n=A.useRef(t);n.current=t;const[r]=A.useState(()=>new nO(n)),s=iv.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return A.useDebugValue(s),A.useEffect(r.onRender(e)),Z3({editor:s,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),s}var rO=A.createContext({editor:null});rO.Consumer;var fS=A.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),iO=()=>A.useContext(fS),sO=Gi.forwardRef((t,e)=>{const{onDragStart:n}=iO(),r=t.as||"div";return b.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function l1(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function o1(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function lO(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function oO(t){if(l1(t)||o1(t))return!0;if(lO(t)){const e=t.type;if(e)return l1(e)||o1(e)}return!1}function aO(){try{if(A.version)return parseInt(A.version.split(".")[0],10)>=19}catch{}return!1}var cO=class{constructor(t,{editor:e,props:n={},as:r="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?ev.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const e=this.component,n=this.props,r=this.editor,s=aO(),o=oO(e),c={...n};c.ref&&!(s||o)&&delete c.ref,!c.ref&&(s||o)&&(c.ref=u=>{this.ref=u}),this.reactElement=b.jsx(e,{...c}),(t=r?.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;(t=e?.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};Gi.createContext({markViewContentRef:()=>{}});var uO=class extends U3{constructor(t,e,n){if(super(t,e,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(f={})=>this.updateAttributes(f),deleteNode:()=>this.deleteNode(),ref:A.createRef()};if(!this.component.displayName){const f=h=>h.charAt(0).toUpperCase()+h.substring(1);this.component.displayName=f(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:f=>{f&&this.contentDOMElement&&f.firstChild!==this.contentDOMElement&&(f.hasAttribute("data-node-view-wrapper")&&f.removeAttribute("data-node-view-wrapper"),f.appendChild(this.contentDOMElement))}},s=this.component,o=A.memo(f=>b.jsx(fS.Provider,{value:r,children:A.createElement(s,f)}));o.displayName="ReactNodeView";let c=this.node.isInline?"span":"div";this.options.as&&(c=this.options.as);const{className:u=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new cO(o,{editor:this.editor,props:t,as:c,className:`node-${this.node.type.name} ${u}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e,n){const r=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,o=this.decorations,c=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:s,oldDecorations:o,newNode:t,newDecorations:e,oldInnerDecorations:c,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=Do(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function dO(t,e){return n=>n.editor.contentComponent?new uO(t,n,e):{}}var Kc=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},fO=/^\s*>\s$/,hO=vt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Kc("blockquote",{...Ve(this.options.HTMLAttributes,t),children:Kc("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=[];return t.content.forEach(s=>{const c=e.renderChildren(s).split(`
`).map(u=>`> ${u}`).join(`
`);n.push(c)}),n.flatMap(s=>[s,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[nl({find:fO,type:this.type})]}}),pO=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,mO=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,gO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,yO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,bO=wr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Kc("strong",{...Ve(this.options.HTMLAttributes,t),children:Kc("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Qi({find:pO,type:this.type}),Qi({find:gO,type:this.type})]},addPasteRules(){return[fi({find:mO,type:this.type}),fi({find:yO,type:this.type})]}}),xO=/(^|[^`])`([^`]+)`(?!`)$/,vO=/(^|[^`])`([^`]+)`(?!`)/g,SO=wr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ve(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Qi({find:xO,type:this.type})]},addPasteRules(){return[fi({find:vO,type:this.type})]}}),Bh=4,CO=/^```([a-z]+)?[\s\n]$/,wO=/^~~~([a-z]+)?[\s\n]$/,kO=vt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Bh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(n)).map(c=>c.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ve(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Bh,{state:r}=t,{selection:s}=r,{$from:o,empty:c}=s;if(o.parent.type!==this.type)return!1;const u=" ".repeat(n);return c?t.commands.insertContent(u):t.commands.command(({tr:f})=>{const{from:h,to:p}=s,v=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(S=>u+S).join(`
`);return f.replaceWith(h,p,r.schema.text(v)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Bh,{state:r}=t,{selection:s}=r,{$from:o,empty:c}=s;return o.parent.type!==this.type?!1:c?t.commands.command(({tr:u})=>{var f;const{pos:h}=o,p=o.start(),g=o.end(),v=r.doc.textBetween(p,g,`
`,`
`).split(`
`);let S=0,w=0;const k=h-p;for(let Y=0;Y<v.length;Y+=1){if(w+v[Y].length>=k){S=Y;break}w+=v[Y].length+1}const O=((f=v[S].match(/^ */))==null?void 0:f[0])||"",B=Math.min(O.length,n);if(B===0)return!0;let G=p;for(let Y=0;Y<S;Y+=1)G+=v[Y].length+1;return u.delete(G,G+B),h-G<=B&&u.setSelection(ae.create(u.doc,G)),!0}):t.commands.command(({tr:u})=>{const{from:f,to:h}=s,x=r.doc.textBetween(f,h,`
`,`
`).split(`
`).map(v=>{var S;const w=((S=v.match(/^ */))==null?void 0:S[0])||"",k=Math.min(w.length,n);return v.slice(k)}).join(`
`);return u.replaceWith(f,h,r.schema.text(x)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,c=r.parent.textContent.endsWith(`

`);return!o||!c?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:h})=>(h.setSelection(ue.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[hp({find:CO,type:this.type,getAttributes:t=>({language:t[1]})}),hp({find:wO,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ye({key:new tt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s?.mode;if(!n||!o)return!1;const{tr:c,schema:u}=t.state,f=u.text(n.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:o},f)),c.selection.$from.parent.type!==this.type&&c.setSelection(ae.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),t.dispatch(c),!0}}})]}}),NO=vt.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),EO=vt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ve(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:(t,e)=>e.indent(`
`),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:u}=r.extensionManager,f=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&f&&c){const g=f.filter(x=>u.includes(x.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),MO=vt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ve(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>hp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),TO=vt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ve(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!O3(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return F2(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:o,tr:c,dispatch:u})=>{if(u){const{$to:f}=c.selection,h=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?c.setSelection(ae.create(c.doc,f.pos+1)):f.nodeAfter.isBlock?c.setSelection(se.create(c.doc,f.pos)):c.setSelection(ae.create(c.doc,f.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||f.parent.type.contentMatch.defaultType,g=p?.create();g&&(c.insert(h,g),c.setSelection(ae.create(c.doc,h+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[j3({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),AO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,jO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,OO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,DO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,RO=wr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Qi({find:AO,type:this.type}),Qi({find:OO,type:this.type})]},addPasteRules(){return[fi({find:jO,type:this.type}),fi({find:DO,type:this.type})]}});const zO="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",LO="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",gp="numeric",yp="ascii",bp="alpha",go="asciinumeric",uo="alphanumeric",xp="domain",hS="emoji",BO="scheme",_O="slashscheme",_h="whitespace";function HO(t,e){return t in e||(e[t]=[]),e[t]}function Vi(t,e,n){e[gp]&&(e[go]=!0,e[uo]=!0),e[yp]&&(e[go]=!0,e[bp]=!0),e[go]&&(e[uo]=!0),e[bp]&&(e[uo]=!0),e[uo]&&(e[xp]=!0),e[hS]&&(e[xp]=!0);for(const r in e){const s=HO(r,n);s.indexOf(t)<0&&s.push(t)}}function UO(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Gt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Gt.groups={};Gt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||Gt.groups;let s;return e&&e.j?s=e:(s=new Gt(e),n&&r&&Vi(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const o=t.length;if(!o)return s;for(let c=0;c<o-1;c++)s=s.tt(t[c]);return s.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Gt.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const o=e;let c,u=s.go(t);if(u?(c=new Gt,Object.assign(c.j,u.j),c.jr.push.apply(c.jr,u.jr),c.jd=u.jd,c.t=u.t):c=new Gt,o){if(r)if(c.t&&typeof c.t=="string"){const f=Object.assign(UO(c.t,r),n);Vi(o,f,r)}else n&&Vi(o,n,r);c.t=o}return s.j[t]=c,c}};const me=(t,e,n,r,s)=>t.ta(e,n,r,s),We=(t,e,n,r,s)=>t.tr(e,n,r,s),a1=(t,e,n,r,s)=>t.ts(e,n,r,s),X=(t,e,n,r,s)=>t.tt(e,n,r,s),pr="WORD",vp="UWORD",pS="ASCIINUMERICAL",mS="ALPHANUMERICAL",Ro="LOCALHOST",Sp="TLD",Cp="UTLD",Tc="SCHEME",Ys="SLASH_SCHEME",ym="NUM",wp="WS",bm="NL",yo="OPENBRACE",bo="CLOSEBRACE",Gc="OPENBRACKET",Yc="CLOSEBRACKET",Fc="OPENPAREN",Jc="CLOSEPAREN",Xc="OPENANGLEBRACKET",Qc="CLOSEANGLEBRACKET",Wc="FULLWIDTHLEFTPAREN",Zc="FULLWIDTHRIGHTPAREN",eu="LEFTCORNERBRACKET",tu="RIGHTCORNERBRACKET",nu="LEFTWHITECORNERBRACKET",ru="RIGHTWHITECORNERBRACKET",iu="FULLWIDTHLESSTHAN",su="FULLWIDTHGREATERTHAN",lu="AMPERSAND",ou="APOSTROPHE",au="ASTERISK",Wr="AT",cu="BACKSLASH",uu="BACKTICK",du="CARET",ti="COLON",xm="COMMA",fu="DOLLAR",$n="DOT",hu="EQUALS",vm="EXCLAMATION",xn="HYPHEN",xo="PERCENT",pu="PIPE",mu="PLUS",gu="POUND",vo="QUERY",Sm="QUOTE",gS="FULLWIDTHMIDDLEDOT",Cm="SEMI",In="SLASH",So="TILDE",yu="UNDERSCORE",yS="EMOJI",bu="SYM";var bS=Object.freeze({__proto__:null,ALPHANUMERICAL:mS,AMPERSAND:lu,APOSTROPHE:ou,ASCIINUMERICAL:pS,ASTERISK:au,AT:Wr,BACKSLASH:cu,BACKTICK:uu,CARET:du,CLOSEANGLEBRACKET:Qc,CLOSEBRACE:bo,CLOSEBRACKET:Yc,CLOSEPAREN:Jc,COLON:ti,COMMA:xm,DOLLAR:fu,DOT:$n,EMOJI:yS,EQUALS:hu,EXCLAMATION:vm,FULLWIDTHGREATERTHAN:su,FULLWIDTHLEFTPAREN:Wc,FULLWIDTHLESSTHAN:iu,FULLWIDTHMIDDLEDOT:gS,FULLWIDTHRIGHTPAREN:Zc,HYPHEN:xn,LEFTCORNERBRACKET:eu,LEFTWHITECORNERBRACKET:nu,LOCALHOST:Ro,NL:bm,NUM:ym,OPENANGLEBRACKET:Xc,OPENBRACE:yo,OPENBRACKET:Gc,OPENPAREN:Fc,PERCENT:xo,PIPE:pu,PLUS:mu,POUND:gu,QUERY:vo,QUOTE:Sm,RIGHTCORNERBRACKET:tu,RIGHTWHITECORNERBRACKET:ru,SCHEME:Tc,SEMI:Cm,SLASH:In,SLASH_SCHEME:Ys,SYM:bu,TILDE:So,TLD:Sp,UNDERSCORE:yu,UTLD:Cp,UWORD:vp,WORD:pr,WS:wp});const fr=/[a-z]/,lo=new RegExp("\\p{L}","u"),Hh=new RegExp("\\p{Emoji}","u"),hr=/\d/,Uh=/\s/,c1="\r",Vh=`
`,VO="",$O="",$h="";let mc=null,gc=null;function IO(t=[]){const e={};Gt.groups=e;const n=new Gt;mc==null&&(mc=u1(zO)),gc==null&&(gc=u1(LO)),X(n,"'",ou),X(n,"{",yo),X(n,"}",bo),X(n,"[",Gc),X(n,"]",Yc),X(n,"(",Fc),X(n,")",Jc),X(n,"<",Xc),X(n,">",Qc),X(n,"",Wc),X(n,"",Zc),X(n,"",eu),X(n,"",tu),X(n,"",nu),X(n,"",ru),X(n,"",iu),X(n,"",su),X(n,"&",lu),X(n,"*",au),X(n,"@",Wr),X(n,"`",uu),X(n,"^",du),X(n,":",ti),X(n,",",xm),X(n,"$",fu),X(n,".",$n),X(n,"=",hu),X(n,"!",vm),X(n,"-",xn),X(n,"%",xo),X(n,"|",pu),X(n,"+",mu),X(n,"#",gu),X(n,"?",vo),X(n,'"',Sm),X(n,"/",In),X(n,";",Cm),X(n,"~",So),X(n,"_",yu),X(n,"\\",cu),X(n,"",gS);const r=We(n,hr,ym,{[gp]:!0});We(r,hr,r);const s=We(r,fr,pS,{[go]:!0}),o=We(r,lo,mS,{[uo]:!0}),c=We(n,fr,pr,{[yp]:!0});We(c,hr,s),We(c,fr,c),We(s,hr,s),We(s,fr,s);const u=We(n,lo,vp,{[bp]:!0});We(u,fr),We(u,hr,o),We(u,lo,u),We(o,hr,o),We(o,fr),We(o,lo,o);const f=X(n,Vh,bm,{[_h]:!0}),h=X(n,c1,wp,{[_h]:!0}),p=We(n,Uh,wp,{[_h]:!0});X(n,$h,p),X(h,Vh,f),X(h,$h,p),We(h,Uh,p),X(p,c1),X(p,Vh),We(p,Uh,p),X(p,$h,p);const g=We(n,Hh,yS,{[hS]:!0});X(g,"#"),We(g,Hh,g),X(g,VO,g);const x=X(g,$O);X(x,"#"),We(x,Hh,g);const v=[[fr,c],[hr,s]],S=[[fr,null],[lo,u],[hr,o]];for(let w=0;w<mc.length;w++)Jr(n,mc[w],Sp,pr,v);for(let w=0;w<gc.length;w++)Jr(n,gc[w],Cp,vp,S);Vi(Sp,{tld:!0,ascii:!0},e),Vi(Cp,{utld:!0,alpha:!0},e),Jr(n,"file",Tc,pr,v),Jr(n,"mailto",Tc,pr,v),Jr(n,"http",Ys,pr,v),Jr(n,"https",Ys,pr,v),Jr(n,"ftp",Ys,pr,v),Jr(n,"ftps",Ys,pr,v),Vi(Tc,{scheme:!0,ascii:!0},e),Vi(Ys,{slashscheme:!0,ascii:!0},e),t=t.sort((w,k)=>w[0]>k[0]?1:-1);for(let w=0;w<t.length;w++){const k=t[w][0],O=t[w][1]?{[BO]:!0}:{[_O]:!0};k.indexOf("-")>=0?O[xp]=!0:fr.test(k)?hr.test(k)?O[go]=!0:O[yp]=!0:O[gp]=!0,a1(n,k,k,O)}return a1(n,"localhost",Ro,{ascii:!0}),n.jd=new Gt(bu),{start:n,tokens:Object.assign({groups:e},bS)}}function xS(t,e){const n=qO(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,s=[];let o=0,c=0;for(;c<r;){let u=t,f=null,h=0,p=null,g=-1,x=-1;for(;c<r&&(f=u.go(n[c]));)u=f,u.accepts()?(g=0,x=0,p=u):g>=0&&(g+=n[c].length,x++),h+=n[c].length,o+=n[c].length,c++;o-=g,c-=x,h-=g,s.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return s}function qO(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),o,c=s<55296||s>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(c),r+=c.length}return e}function Jr(t,e,n,r,s){let o;const c=e.length;for(let u=0;u<c-1;u++){const f=e[u];t.j[f]?o=t.j[f]:(o=new Gt(r),o.jr=s.slice(),t.j[f]=o),t=o}return o=new Gt(n),o.jr=s.slice(),t.j[e[c-1]]=o,o}function u1(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let o=0;for(;s.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let c=parseInt(t.substring(r,r+o),10);c>0;c--)n.pop();r+=o}else n.push(t[r]),r++}return e}const zo={defaultProtocol:"http",events:null,format:d1,formatHref:d1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function wm(t,e=null){let n=Object.assign({},zo);t&&(n=Object.assign(n,t instanceof wm?t.o:t));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}wm.prototype={o:zo,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:zo[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function d1(t){return t}function vS(t,e){this.t="token",this.v=t,this.tk=e}vS.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=zo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),o=this.toFormattedString(t),c={},u=t.get("className",n,e),f=t.get("target",n,e),h=t.get("rel",n,e),p=t.getObj("attributes",n,e),g=t.getObj("events",n,e);return c.href=r,u&&(c.class=u),f&&(c.target=f),h&&(c.rel=h),p&&Object.assign(c,p),{tagName:s,attributes:c,content:o,eventListeners:g}}};function Hu(t,e){class n extends vS{constructor(s,o){super(s,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const f1=Hu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),h1=Hu("text"),PO=Hu("nl"),yc=Hu("url",{isLink:!0,toHref(t=zo.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ro&&t[1].t===ti}}),bn=t=>new Gt(t);function KO({groups:t}){const e=t.domain.concat([lu,au,Wr,cu,uu,du,fu,hu,xn,ym,xo,pu,mu,gu,In,bu,So,yu]),n=[ou,ti,xm,$n,vm,xo,vo,Sm,Cm,Xc,Qc,yo,bo,Yc,Gc,Fc,Jc,Wc,Zc,eu,tu,nu,ru,iu,su],r=[lu,ou,au,cu,uu,du,fu,hu,xn,yo,bo,xo,pu,mu,gu,vo,In,bu,So,yu],s=bn(),o=X(s,So);me(o,r,o),me(o,t.domain,o);const c=bn(),u=bn(),f=bn();me(s,t.domain,c),me(s,t.scheme,u),me(s,t.slashscheme,f),me(c,r,o),me(c,t.domain,c);const h=X(c,Wr);X(o,Wr,h),X(u,Wr,h),X(f,Wr,h);const p=X(o,$n);me(p,r,o),me(p,t.domain,o);const g=bn();me(h,t.domain,g),me(g,t.domain,g);const x=X(g,$n);me(x,t.domain,g);const v=bn(f1);me(x,t.tld,v),me(x,t.utld,v),X(h,Ro,v);const S=X(g,xn);X(S,xn,S),me(S,t.domain,g),me(v,t.domain,g),X(v,$n,x),X(v,xn,S);const w=X(v,ti);me(w,t.numeric,f1);const k=X(c,xn),E=X(c,$n);X(k,xn,k),me(k,t.domain,c),me(E,r,o),me(E,t.domain,c);const O=bn(yc);me(E,t.tld,O),me(E,t.utld,O),me(O,t.domain,c),me(O,r,o),X(O,$n,E),X(O,xn,k),X(O,Wr,h);const B=X(O,ti),G=bn(yc);me(B,t.numeric,G);const U=bn(yc),Y=bn();me(U,e,U),me(U,n,Y),me(Y,e,U),me(Y,n,Y),X(O,In,U),X(G,In,U);const $=X(u,ti),te=X(f,ti),F=X(te,In),J=X(F,In);me(u,t.domain,c),X(u,$n,E),X(u,xn,k),me(f,t.domain,c),X(f,$n,E),X(f,xn,k),me($,t.domain,U),X($,In,U),X($,vo,U),me(J,t.domain,U),me(J,e,U),X(J,In,U);const qe=[[yo,bo],[Gc,Yc],[Fc,Jc],[Xc,Qc],[Wc,Zc],[eu,tu],[nu,ru],[iu,su]];for(let Se=0;Se<qe.length;Se++){const[lt,Oe]=qe[Se],De=X(U,lt);X(Y,lt,De),X(De,Oe,U);const H=bn(yc);me(De,e,H);const W=bn();me(De,n),me(H,e,H),me(H,n,W),me(W,e,H),me(W,n,W),X(H,Oe,U),X(W,Oe,U)}return X(s,Ro,O),X(s,bm,PO),{start:s,tokens:bS}}function GO(t,e,n){let r=n.length,s=0,o=[],c=[];for(;s<r;){let u=t,f=null,h=null,p=0,g=null,x=-1;for(;s<r&&!(f=u.go(n[s].t));)c.push(n[s++]);for(;s<r&&(h=f||u.go(n[s].t));)f=null,u=h,u.accepts()?(x=0,g=u):x>=0&&x++,s++,p++;if(x<0)s-=p,s<r&&(c.push(n[s]),s++);else{c.length>0&&(o.push(Ih(h1,e,c)),c=[]),s-=x,p-=x;const v=g.t,S=n.slice(s-p,s);o.push(Ih(v,e,S))}}return c.length>0&&o.push(Ih(h1,e,c)),o}function Ih(t,e,n){const r=n[0].s,s=n[n.length-1].e,o=e.slice(r,s);return new t(o,n)}const YO=typeof console<"u"&&console&&console.warn||(()=>{}),FO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ge={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function JO(){return Gt.groups={},Ge.scanner=null,Ge.parser=null,Ge.tokenQueue=[],Ge.pluginQueue=[],Ge.customSchemes=[],Ge.initialized=!1,Ge}function p1(t,e=!1){if(Ge.initialized&&YO(`linkifyjs: already initialized - will not register custom scheme "${t}" ${FO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ge.customSchemes.push([t,e])}function XO(){Ge.scanner=IO(Ge.customSchemes);for(let t=0;t<Ge.tokenQueue.length;t++)Ge.tokenQueue[t][1]({scanner:Ge.scanner});Ge.parser=KO(Ge.scanner.tokens);for(let t=0;t<Ge.pluginQueue.length;t++)Ge.pluginQueue[t][1]({scanner:Ge.scanner,parser:Ge.parser});return Ge.initialized=!0,Ge}function km(t){return Ge.initialized||XO(),GO(Ge.parser.start,t,xS(Ge.scanner.start,t))}km.scan=xS;function SS(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new wm(n),s=km(t),o=[];for(let c=0;c<s.length;c++){const u=s[c];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}var Nm="[\0- -\u2029]",QO=new RegExp(Nm),WO=new RegExp(`${Nm}$`),ZO=new RegExp(Nm,"g");function eD(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function tD(t){return new Ye({key:new tt("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!s||o)return;const{tr:c}=r,u=U2(n.doc,[...e]);if(Y2(u).forEach(({newRange:h})=>{const p=Bj(r.doc,h,v=>v.isTextblock);let g,x;if(p.length>1)g=p[0],x=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!WO.test(v))return;g=p[0],x=r.doc.textBetween(g.pos,h.to,void 0," ")}if(g&&x){const v=x.split(QO).filter(Boolean);if(v.length<=0)return!1;const S=v[v.length-1],w=g.pos+x.lastIndexOf(S);if(!S)return!1;const k=km(S).map(E=>E.toObject(t.defaultProtocol));if(!eD(k))return!1;k.filter(E=>E.isLink).map(E=>({...E,from:w+E.start+1,to:w+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>t.validate(E.value)).filter(E=>t.shouldAutoLink(E.value)).forEach(E=>{fm(E.from,E.to,r.doc).some(O=>O.mark.type===t.type)||c.addMark(E.from,E.to,t.type.create({href:E.href}))})}}),!!c.steps.length)return c}})}function nD(t){return new Ye({key:new tt("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let c=null;if(r.target instanceof HTMLAnchorElement)c=r.target;else{let p=r.target;const g=[];for(;p.nodeName!=="DIV";)g.push(p),p=p.parentNode;c=g.find(x=>x.nodeName==="A")}if(!c)return!1;const u=G2(e.state,t.type.name),f=(s=c?.href)!=null?s:u.href,h=(o=c?.target)!=null?o:u.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),c&&f?(window.open(f,h),!0):!1}}})}function rD(t){return new Ye({key:new tt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:o}=e,{selection:c}=o,{empty:u}=c;if(u)return!1;let f="";r.content.forEach(p=>{f+=p.textContent});const h=SS(f,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===f);return!f||!h||s!==void 0&&!s(h.href)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function zi(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(ZO,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var CS=wr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){p1(t);return}p1(t.scheme,t.optionalSlashes)})},onDestroy(){JO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!zi(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!zi(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!zi(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ve(this.options.HTMLAttributes,t),0]:["a",Ve(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!zi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!zi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[fi({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=SS(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:c=>!!zi(c,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(tD({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!zi(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(nD({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(rD({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),wS=CS,iD=Object.defineProperty,sD=(t,e)=>{for(var n in e)iD(t,n,{get:e[n],enumerable:!0})},lD="listItem",m1="textStyle",g1=/^\s*([-+*])\s$/,kS=vt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ve(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lD,this.editor.getAttributes(m1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=nl({find:g1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=nl({find:g1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(m1),editor:this.editor})),[t]}}),NS=vt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ve(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const c=t.tokens.slice(1),u=e.parseChildren(c);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>gm(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),oD={};sD(oD,{findListItemPos:()=>Io,getNextListDepth:()=>Em,handleBackspace:()=>kp,handleDelete:()=>Np,hasListBefore:()=>ES,hasListItemAfter:()=>aD,hasListItemBefore:()=>MS,listItemHasSubList:()=>TS,nextListIsDeeper:()=>AS,nextListIsHigher:()=>jS});var Io=(t,e)=>{const{$from:n}=e.selection,r=ft(t,e.schema);let s=null,o=n.depth,c=n.pos,u=null;for(;o>0&&u===null;)s=n.node(o),s.type===r?u=o:(o-=1,c-=1);return u===null?null:{$pos:e.doc.resolve(c),depth:u}},Em=(t,e)=>{const n=Io(t,e);if(!n)return!1;const[,r]=Kj(e,t,n.$pos.pos+4);return r},ES=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),o=t.doc.resolve(s).node();return!(!o||!n.includes(o.type.name))},MS=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},TS=(t,e,n)=>{if(!n)return!1;const r=ft(t,e.schema);let s=!1;return n.descendants(o=>{o.type===r&&(s=!0)}),s},kp=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!di(t.state,e)&&ES(t.state,e,n)){const{$anchor:u}=t.state.selection,f=t.state.doc.resolve(u.before()-1),h=[];f.node().descendants((x,v)=>{x.type.name===e&&h.push({node:x,pos:v})});const p=h.at(-1);if(!p)return!1;const g=t.state.doc.resolve(f.start()+p.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},g.end()).joinForward().run()}if(!di(t.state,e)||!Jj(t.state))return!1;const r=Io(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),c=TS(e,t.state,o);return MS(e,t.state)&&!c?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},AS=(t,e)=>{const n=Em(t,e),r=Io(t,e);return!r||!n?!1:n>r.depth},jS=(t,e)=>{const n=Em(t,e),r=Io(t,e);return!r||!n?!1:n<r.depth},Np=(t,e)=>{if(!di(t.state,e)||!Fj(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:AS(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():jS(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},aD=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},OS=Be.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Np(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Np(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&kp(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&kp(t,n,r)&&(e=!0)}),e}}}}),y1=/^(\s*)(\d+)\.\s+(.*)$/,cD=/^\s/;function uD(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],o=s.match(y1);if(!o)break;const[,c,u,f]=o,h=c.length;let p=f,g=n+1;const x=[s];for(;g<t.length;){const v=t[g];if(v.match(y1))break;if(v.trim()==="")x.push(v),p+=`
`,g+=1;else if(v.match(cD))x.push(v),p+=`
${v.slice(h+2)}`,g+=1;else break}e.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:x.join(`
`)}),r=g,n=g}return[e,r]}function DS(t,e,n){var r;const s=[];let o=0;for(;o<t.length;){const c=t[o];if(c.indent===e){const u=c.content.split(`
`),f=((r=u[0])==null?void 0:r.trim())||"",h=[];f&&h.push({type:"paragraph",raw:f,tokens:n.inlineTokens(f)});const p=u.slice(1).join(`
`).trim();if(p){const v=n.blockTokens(p);h.push(...v)}let g=o+1;const x=[];for(;g<t.length&&t[g].indent>e;)x.push(t[g]),g+=1;if(x.length>0){const v=Math.min(...x.map(w=>w.indent)),S=DS(x,v,n);h.push({type:"list",ordered:!0,start:x[0].number,items:S,raw:x.map(w=>w.raw).join(`
`)})}s.push({type:"list_item",raw:c.raw,tokens:h}),o=g}else o+=1}return s}function dD(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const o=e.parseChildren([s]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([s]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var fD="listItem",b1="textStyle",x1=/^(\d+)\.\s$/,RS=vt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ve(this.options.HTMLAttributes,n),0]:["ol",Ve(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?dD(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[o,c]=uD(s);if(o.length===0)return;const u=DS(o,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:u,raw:s.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fD,this.editor.getAttributes(b1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=nl({find:x1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=nl({find:x1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(b1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),hD=/^\s*(\[([( |x])?\])\s$/,pD=vt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ve(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return gm(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),c=document.createElement("span"),u=document.createElement("input"),f=document.createElement("div"),h=p=>{var g,x;u.ariaLabel=((x=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:x.call(g,p,u.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};return h(t),o.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",p=>p.preventDefault()),u.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:g}=p.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const v=n();if(typeof v!="number")return!1;const S=x.doc.nodeAt(v);return x.setNodeMarkup(v,void 0,{...S?.attrs,checked:g}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,g)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,g])=>{s.setAttribute(p,g)}),s.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,o.append(u,c),s.append(o,f),Object.entries(e).forEach(([p,g])=>{s.setAttribute(p,g)}),{dom:s,contentDOM:f,update:p=>p.type!==this.type?!1:(s.dataset.checked=p.attrs.checked,u.checked=p.attrs.checked,h(p),!0)}}},addInputRules(){return[nl({find:hD,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),mD=vt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ve(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const c=pp(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,f)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:f}),customNestedParser:r},n);return c?[{type:"taskList",raw:c.raw,items:c.items}]:n.blockTokens(o)},s=pp(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Be.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(kS.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(NS.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(OS.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(RS.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(pD.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(mD.configure(this.options.taskList)),t}});var gD=vt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ve(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),yD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,bD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,xD=wr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ve(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Qi({find:yD,type:this.type})]},addPasteRules(){return[fi({find:bD,type:this.type})]}}),vD=vt.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),zS=wr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ve(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const o=s[2].trim();return{type:"underline",raw:s[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),LS=zS;function SD(t={}){return new Ye({view(e){return new CD(e,t)}})}class CD{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=c=>{this[s](c)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),c=o.width/s.offsetWidth,u=o.height/s.offsetHeight;if(n){let g=e.nodeBefore,x=e.nodeAfter;if(g||x){let v=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(v){let S=v.getBoundingClientRect(),w=g?S.bottom:S.top;g&&x&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*u;r={left:S.left,right:S.right,top:w-k,bottom:w+k}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*c;r={left:g.left-x,right:g.left+x,top:g.top,bottom:g.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,p=-pageYOffset;else{let g=f.getBoundingClientRect(),x=g.width/f.offsetWidth,v=g.height/f.offsetHeight;h=g.left-f.scrollLeft*x,p=g.top-f.scrollTop*v}this.element.style.left=(r.left-h)/c+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/c+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!o){let c=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=Ov(this.editorView.state.doc,c,this.editorView.dragging.slice);u!=null&&(c=u)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ze extends ue{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ze.valid(r)?new Ze(r):ue.near(r)}content(){return Z.empty}eq(e){return e instanceof Ze&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ze(e.resolve(n.pos))}getBookmark(){return new Mm(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!wD(e)||!kD(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ze.valid(e))return e;let s=e.pos,o=null;for(let c=e.depth;;c--){let u=e.node(c);if(n>0?e.indexAfter(c)<u.childCount:e.index(c)>0){o=u.child(n>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;s+=n;let f=e.doc.resolve(s);if(Ze.valid(f))return f}for(;;){let c=n>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!se.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=c,s+=n;let u=e.doc.resolve(s);if(Ze.valid(u))return u}return null}}}Ze.prototype.visible=!1;Ze.findFrom=Ze.findGapCursorFrom;ue.jsonID("gapcursor",Ze);class Mm{constructor(e){this.pos=e}map(e){return new Mm(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ze.valid(n)?new Ze(n):ue.near(n)}}function BS(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function wD(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||BS(s.type))return!0;if(s.inlineContent)return!1}}return!0}function kD(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||BS(s.type))return!0;if(s.inlineContent)return!1}}return!0}function ND(){return new Ye({props:{decorations:AD,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ze.valid(n)?new Ze(n):null},handleClick:MD,handleKeyDown:ED,handleDOMEvents:{beforeinput:TD}}})}const ED=sm({ArrowLeft:bc("horiz",-1),ArrowRight:bc("horiz",1),ArrowUp:bc("vert",-1),ArrowDown:bc("vert",1)});function bc(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let c=r.selection,u=e>0?c.$to:c.$from,f=c.empty;if(c instanceof ae){if(!o.endOfTextblock(n)||u.depth==0)return!1;f=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Ze.findGapCursorFrom(u,e,f);return h?(s&&s(r.tr.setSelection(new Ze(h))),!0):!1}}function MD(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ze.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&se.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ze(r))),!0)}function TD(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ze))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=K.empty;for(let c=r.length-1;c>=0;c--)s=K.from(r[c].createAndFill(null,s));let o=t.state.tr.replace(n.pos,n.pos,new Z(s,0,0));return o.setSelection(ae.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function AD(t){if(!(t.selection instanceof Ze))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",$e.create(t.doc,[yt.widget(t.selection.head,e,{key:"gapcursor"})])}var xu=200,xt=function(){};xt.prototype.append=function(e){return e.length?(e=xt.from(e),!this.length&&e||e.length<xu&&this.leafAppend(e)||this.length<xu&&e.leafPrepend(this)||this.appendInner(e)):this};xt.prototype.prepend=function(e){return e.length?xt.from(e).append(this):this};xt.prototype.appendInner=function(e){return new jD(this,e)};xt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?xt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};xt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};xt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};xt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,c){return s.push(e(o,c))},n,r),s};xt.from=function(e){return e instanceof xt?e:e&&e.length?new _S(e):xt.empty};var _S=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,c,u){for(var f=o;f<c;f++)if(s(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,c,u){for(var f=o-1;f>=c;f--)if(s(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=xu)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=xu)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(xt);xt.empty=new _S([]);var jD=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,c){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(o,u),c)===!1||o>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,o)-u,c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,c){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(o,u)-u,c+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(s,u),o,c)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(xt);const OD=500;class Tn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let c=e.tr,u,f,h=[],p=[];return this.items.forEach((g,x)=>{if(!g.step){s||(s=this.remapping(r,x+1),o=s.maps.length),o--,p.push(g);return}if(s){p.push(new qn(g.map));let v=g.step.map(s.slice(o)),S;v&&c.maybeStep(v).doc&&(S=c.mapping.maps[c.mapping.maps.length-1],h.push(new qn(S,void 0,void 0,h.length+p.length))),o--,S&&s.appendMap(S,o)}else c.maybeStep(g.step);if(g.selection)return u=s?g.selection.map(s.slice(o)):g.selection,f=new Tn(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:c,selection:u}}addTransform(e,n,r,s){let o=[],c=this.eventCount,u=this.items,f=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),x=new qn(e.mapping.maps[p],g,n),v;(v=f&&f.merge(x))&&(x=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(x),n&&(c++,n=void 0),s||(f=x)}let h=c-r.depth;return h>RD&&(u=DD(u,h),c-=h),new Tn(u.append(o),c)}remapping(e,n){let r=new No;return this.items.forEach((s,o)=>{let c=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,c)},e,n),r}addMaps(e){return this.eventCount==0?this:new Tn(this.items.append(e.map(n=>new qn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=e.mapping,c=e.steps.length,u=this.eventCount;this.items.forEach(x=>{x.selection&&u--},s);let f=n;this.items.forEach(x=>{let v=o.getMirror(--f);if(v==null)return;c=Math.min(c,v);let S=o.maps[v];if(x.step){let w=e.steps[v].invert(e.docs[v]),k=x.selection&&x.selection.map(o.slice(f+1,v));k&&u++,r.push(new qn(S,w,k))}else r.push(new qn(S))},s);let h=[];for(let x=n;x<c;x++)h.push(new qn(o.maps[x]));let p=this.items.slice(0,s).append(h).append(r),g=new Tn(p,u);return g.emptyItemCount()>OD&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],o=0;return this.items.forEach((c,u)=>{if(u>=e)s.push(c),c.selection&&o++;else if(c.step){let f=c.step.map(n.slice(r)),h=f&&f.getMap();if(r--,h&&n.appendMap(h,r),f){let p=c.selection&&c.selection.map(n.slice(r));p&&o++;let g=new qn(h.invert(),f,p),x,v=s.length-1;(x=s.length&&s[v].merge(g))?s[v]=x:s.push(g)}}else c.map&&r--},this.items.length,0),new Tn(xt.from(s.reverse()),o)}}Tn.empty=new Tn(xt.empty,0);function DD(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class qn{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new qn(n.getMap().invert(),n,this.selection)}}}class Zr{constructor(e,n,r,s,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const RD=20;function zD(t,e,n,r){let s=n.getMeta(Ki),o;if(s)return s.historyState;n.getMeta(_D)&&(t=new Zr(t.done,t.undone,null,0,-1));let c=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(c&&c.getMeta(Ki))return c.getMeta(Ki).redo?new Zr(t.done.addTransform(n,void 0,r,Ac(e)),t.undone,v1(n.mapping.maps),t.prevTime,t.prevComposition):new Zr(t.done,t.undone.addTransform(n,void 0,r,Ac(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),f=t.prevTime==0||!c&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!LD(n,t.prevRanges)),h=c?qh(t.prevRanges,n.mapping):v1(n.mapping.maps);return new Zr(t.done.addTransform(n,f?e.selection.getBookmark():void 0,r,Ac(e)),Tn.empty,h,n.time,u??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Zr(t.done.rebased(n,o),t.undone.rebased(n,o),qh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Zr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),qh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function LD(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(n=!0)}),n}function v1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,o,c)=>e.push(o,c));return e}function qh(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),o=e.map(t[r+1],-1);s<=o&&n.push(s,o)}return n}function BD(t,e,n){let r=Ac(e),s=Ki.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let c=o.selection.resolve(o.transform.doc),u=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),f=new Zr(n?u:o.remaining,n?o.remaining:u,null,0,-1);return o.transform.setSelection(c).setMeta(Ki,{redo:n,historyState:f})}let Ph=!1,S1=null;function Ac(t){let e=t.plugins;if(S1!=e){Ph=!1,S1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ph=!0;break}}return Ph}const Ki=new tt("history"),_D=new tt("closeHistory");function HD(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ye({key:Ki,state:{init(){return new Zr(Tn.empty,Tn.empty,null,0,-1)},apply(e,n,r){return zD(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?US:r=="historyRedo"?VS:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function HS(t,e){return(n,r)=>{let s=Ki.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let o=BD(s,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const US=HS(!1,!0),VS=HS(!0,!0);Be.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ye({key:new tt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const c=o-s,u=0,f=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,f);return t=!0,h}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,f=o-r,h=u-f,p=u;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var UD=Be.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[SD(this.options)]}});Be.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ye({key:new tt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,o=[];if(!n||!r)return $e.create(t,[]);let c=0;this.options.mode==="deepest"&&t.descendants((f,h)=>{if(f.isText)return;if(!(s>=h&&s<=h+f.nodeSize-1))return!1;c+=1});let u=0;return t.descendants((f,h)=>{if(f.isText||!(s>=h&&s<=h+f.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&c-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";o.push(yt.node(h,h+f.nodeSize,{class:this.options.className}))}),$e.create(t,o)}}})]}});var VD=Be.create({name:"gapCursor",addProseMirrorPlugins(){return[ND()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Te(le(t,"allowGapCursor",n)))!=null?e:null}}});Be.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ye({key:new tt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((c,u)=>{const f=r>=u&&r<=u+c.nodeSize,h=!c.isLeaf&&Lu(c);if((f||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const g=yt.node(u,u+c.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:u,hasAnchor:f}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),$e.create(t,s)}}})]}});Be.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ye({key:new tt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||F2(n.selection)||t.view.dragging?null:$e.create(n.doc,[yt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function C1({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var $D=Be.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new tt(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Ye({key:e,appendTransaction:(s,o,c)=>{const{doc:u,tr:f,schema:h}=c,p=e.getState(c),g=u.content.size,x=h.nodes[n];if(p)return f.insert(g,x.create())},state:{init:(s,o)=>{const c=o.tr.doc.lastChild;return!C1({node:c,types:r})},apply:(s,o)=>{if(!s.docChanged)return o;const c=s.doc.lastChild;return!C1({node:c,types:r})}}})]}}),ID=Be.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>US(t,e),redo:()=>({state:t,dispatch:e})=>VS(t,e)}},addProseMirrorPlugins(){return[HD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),qD=Be.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(bO.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(hO.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(kS.configure(this.options.bulletList)),this.options.code!==!1&&s.push(SO.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(kO.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(NO.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(UD.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(VD.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(EO.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(MO.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(ID.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(TO.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(RO.configure(this.options.italic)),this.options.listItem!==!1&&s.push(NS.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(OS.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(CS.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(RS.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(gD.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(xD.configure(this.options.strike)),this.options.text!==!1&&s.push(vD.configure(this.options.text)),this.options.underline!==!1&&s.push(zS.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push($D.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),$S=qD,PD=Be.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),IS=PD,KD=20,qS=(t,e=0)=>{const n=[];return!t.children.length||e>KD||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...qS(r,e+1))}),n},GD=t=>{if(!t.children.length)return;const e=qS(t);e&&e.forEach(n=>{var r,s;const o=n.getAttribute("style"),c=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${c};${o}`)})},YD=wr.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&GD(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ve(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),FD=Be.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const c=o[0].trim().toLowerCase(),u=o.slice(1).join(":").trim();if(c==="background-color")return u.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),PS=Be.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const c=o[0].trim().toLowerCase(),u=o.slice(1).join(":").trim();if(c==="color")return u.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),JD=Be.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),XD=Be.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),QD=Be.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Be.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(FD.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(PS.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(JD.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(XD.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(QD.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(YD.configure(this.options.textStyle)),t}});var KS=PS,WD=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,ZD=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,e4=wr.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ve(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const s=/^(==)([^=]+)(==)/.exec(t);if(s){const o=s[2].trim(),c=n.inlineTokens(o);return{type:"highlight",raw:s[0],text:o,tokens:c}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Qi({find:WD,type:this.type})]},addPasteRules(){return[fi({find:ZD,type:this.type})]}}),GS=e4,Ep,Mp;if(typeof WeakMap<"u"){let t=new WeakMap;Ep=e=>t.get(e),Mp=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;Ep=r=>{for(let s=0;s<t.length;s+=2)if(t[s]==r)return t[s+1]},Mp=(r,s)=>(n==10&&(n=0),t[n++]=r,t[n++]=s)}var et=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,s=e/this.width|0;let o=r+1,c=s+1;for(let u=1;o<this.width&&this.map[e+u]==n;u++)o++;for(let u=1;c<this.height&&this.map[e+this.width*u]==n;u++)c++;return{left:r,top:s,right:o,bottom:c}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:s,top:o,bottom:c}=this.findCell(t);return e=="horiz"?(n<0?r==0:s==this.width)?null:this.map[o*this.width+(n<0?r-1:s)]:(n<0?o==0:c==this.height)?null:this.map[r+this.width*(n<0?o-1:c)]}rectBetween(t,e){const{left:n,right:r,top:s,bottom:o}=this.findCell(t),{left:c,right:u,top:f,bottom:h}=this.findCell(e);return{left:Math.min(n,c),top:Math.min(s,f),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let s=t.left;s<t.right;s++){const o=r*this.width+s,c=this.map[o];n[c]||(n[c]=!0,!(s==t.left&&s&&this.map[o-1]==c||r==t.top&&r&&this.map[o-this.width]==c)&&e.push(c))}return e}positionAt(t,e,n){for(let r=0,s=0;;r++){const o=s+n.child(r).nodeSize;if(r==t){let c=e+t*this.width;const u=(t+1)*this.width;for(;c<u&&this.map[c]<s;)c++;return c==u?o-1:this.map[c]}s=o}}static get(t){return Ep(t)||Mp(t,t4(t))}};function t4(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=n4(t),n=t.childCount,r=[];let s=0,o=null;const c=[];for(let h=0,p=e*n;h<p;h++)r[h]=0;for(let h=0,p=0;h<n;h++){const g=t.child(h);p++;for(let S=0;;S++){for(;s<r.length&&r[s]!=0;)s++;if(S==g.childCount)break;const w=g.child(S),{colspan:k,rowspan:E,colwidth:O}=w.attrs;for(let B=0;B<E;B++){if(B+h>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:E-B});break}const G=s+B*e;for(let U=0;U<k;U++){r[G+U]==0?r[G+U]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:k-U});const Y=O&&O[U];if(Y){const $=(G+U)%e*2,te=c[$];te==null||te!=Y&&c[$+1]==1?(c[$]=Y,c[$+1]=1):te==Y&&c[$+1]++}}}s+=k,p+=w.nodeSize}const x=(h+1)*e;let v=0;for(;s<x;)r[s++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new et(e,n,r,o);let f=!1;for(let h=0;!f&&h<c.length;h+=2)c[h]!=null&&c[h+1]<n&&(f=!0);return f&&r4(u,c,t),u}function n4(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const s=t.child(r);let o=0;if(n)for(let c=0;c<r;c++){const u=t.child(c);for(let f=0;f<u.childCount;f++){const h=u.child(f);c+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let c=0;c<s.childCount;c++){const u=s.child(c);o+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function r4(t,e,n){t.problems||(t.problems=[]);const r={};for(let s=0;s<t.map.length;s++){const o=t.map[s];if(r[o])continue;r[o]=!0;const c=n.nodeAt(o);if(!c)throw new RangeError(`No cell with offset ${o} found`);let u=null;const f=c.attrs;for(let h=0;h<f.colspan;h++){const p=(s+h)%t.width,g=e[p*2];g!=null&&(!f.colwidth||f.colwidth[h]!=g)&&((u||(u=i4(f)))[h]=g)}u&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function i4(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Dt(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var ni=new tt("selectingCells");function al(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function s4(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Bn(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Uu(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=al(e.$head)||l4(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function l4(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function Tp(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function o4(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function Tm(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function YS(t,e,n){const r=t.node(-1),s=et.get(r),o=t.start(-1),c=s.nextCell(t.pos-o,e,n);return c==null?null:t.node(0).resolve(o+c)}function Wi(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function FS(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<n;s++)r.colwidth.splice(e,0,0)}return r}function a4(t,e,n){const r=Dt(e.type.schema).header_cell;for(let s=0;s<t.height;s++)if(e.nodeAt(t.map[n+s*t.width]).type!=r)return!1;return!0}var Ie=class mr extends ue{constructor(e,n=e){const r=e.node(-1),s=et.get(r),o=e.start(-1),c=s.rectBetween(e.pos-o,n.pos-o),u=e.node(0),f=s.cellsInRect(c).filter(p=>p!=n.pos-o);f.unshift(n.pos-o);const h=f.map(p=>{const g=r.nodeAt(p);if(!g)throw RangeError(`No cell with offset ${p} found`);const x=o+p+1;return new Bv(u.resolve(x),u.resolve(x+g.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),s=e.resolve(n.map(this.$headCell.pos));if(Tp(r)&&Tp(s)&&Tm(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?mr.rowSelection(r,s):o&&this.isColSelection()?mr.colSelection(r,s):new mr(r,s)}return ae.between(r,s)}content(){const e=this.$anchorCell.node(-1),n=et.get(e),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},c=[];for(let f=s.top;f<s.bottom;f++){const h=[];for(let p=f*n.width+s.left,g=s.left;g<s.right;g++,p++){const x=n.map[p];if(o[x])continue;o[x]=!0;const v=n.findCell(x);let S=e.nodeAt(x);if(!S)throw RangeError(`No cell with offset ${x} found`);const w=s.left-v.left,k=v.right-s.right;if(w>0||k>0){let E=S.attrs;if(w>0&&(E=Wi(E,0,w)),k>0&&(E=Wi(E,E.colspan-k,k)),v.left<s.left){if(S=S.type.createAndFill(E),!S)throw RangeError(`Could not create cell with attrs ${JSON.stringify(E)}`)}else S=S.type.create(E,S.content)}if(v.top<s.top||v.bottom>s.bottom){const E={...S.attrs,rowspan:Math.min(v.bottom,s.bottom)-Math.max(v.top,s.top)};v.top<s.top?S=S.type.createAndFill(E):S=S.type.create(E,S.content)}h.push(S)}c.push(e.child(f).copy(K.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:c;return new Z(K.from(u),1,1)}replace(e,n=Z.empty){const r=e.steps.length,s=this.ranges;for(let c=0;c<s.length;c++){const{$from:u,$to:f}=s[c],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(f.pos),c?Z.empty:n)}const o=ue.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new Z(K.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=et.get(n),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let c=0;c<o.length;c++)e(n.nodeAt(o[c]),s+o[c])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),s=et.get(r),o=e.start(-1),c=s.findCell(e.pos-o),u=s.findCell(n.pos-o),f=e.node(0);return c.top<=u.top?(c.top>0&&(e=f.resolve(o+s.map[c.left])),u.bottom<s.height&&(n=f.resolve(o+s.map[s.width*(s.height-1)+u.right-1]))):(u.top>0&&(n=f.resolve(o+s.map[u.left])),c.bottom<s.height&&(e=f.resolve(o+s.map[s.width*(s.height-1)+c.right-1]))),new mr(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=et.get(e),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const c=s+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(c,u)==n.width}eq(e){return e instanceof mr&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),s=et.get(r),o=e.start(-1),c=s.findCell(e.pos-o),u=s.findCell(n.pos-o),f=e.node(0);return c.left<=u.left?(c.left>0&&(e=f.resolve(o+s.map[c.top*s.width])),u.right<s.width&&(n=f.resolve(o+s.map[s.width*(u.top+1)-1]))):(u.left>0&&(n=f.resolve(o+s.map[u.top*s.width])),c.right<s.width&&(e=f.resolve(o+s.map[s.width*(c.top+1)-1]))),new mr(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new mr(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new mr(e.resolve(n),e.resolve(r))}getBookmark(){return new c4(this.$anchorCell.pos,this.$headCell.pos)}};Ie.prototype.visible=!1;ue.jsonID("cell",Ie);var c4=class JS{constructor(e,n){this.anchor=e,this.head=n}map(e){return new JS(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Tm(n,r)?new Ie(n,r):ue.near(r,1)}};function u4(t){if(!(t.selection instanceof Ie))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(yt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),$e.create(t.doc,e)}function d4({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,s=t.depth;for(;s>=0&&!(t.after(s+1)<t.end(s));s--,n++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return n==r&&/row|table/.test(t.node(s).type.spec.tableRole)}function f4({$from:t,$to:e}){let n,r;for(let s=t.depth;s>0;s--){const o=t.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){n=o;break}}for(let s=e.depth;s>0;s--){const o=e.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return n!==r&&e.parentOffset===0}function h4(t,e,n){const r=(e||t).selection,s=(e||t).doc;let o,c;if(r instanceof se&&(c=r.node.type.spec.tableRole)){if(c=="cell"||c=="header_cell")o=Ie.create(s,r.from);else if(c=="row"){const u=s.resolve(r.from+1);o=Ie.rowSelection(u,u)}else if(!n){const u=et.get(r.node),f=r.from+1,h=f+u.map[u.width*u.height-1];o=Ie.create(s,f+1,h)}}else r instanceof ae&&d4(r)?o=ae.create(s,r.from):r instanceof ae&&f4(r)&&(o=ae.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}var p4=new tt("fix-tables");function XS(t,e,n,r){const s=t.childCount,o=e.childCount;e:for(let c=0,u=0;c<o;c++){const f=e.child(c);for(let h=u,p=Math.min(s,c+3);h<p;h++)if(t.child(h)==f){u=h+1,n+=f.nodeSize;continue e}r(f,n),u<s&&t.child(u).sameMarkup(f)?XS(t.child(u),f,n+1,r):f.nodesBetween(0,f.content.size,r,n+1),n+=f.nodeSize}}function QS(t,e){let n;const r=(s,o)=>{s.type.spec.tableRole=="table"&&(n=m4(t,s,o,n))};return e?e.doc!=t.doc&&XS(e.doc,t.doc,0,r):t.doc.descendants(r),n}function m4(t,e,n,r){const s=et.get(e);if(!s.problems)return r;r||(r=t.tr);const o=[];for(let f=0;f<s.height;f++)o.push(0);for(let f=0;f<s.problems.length;f++){const h=s.problems[f];if(h.type=="collision"){const p=e.nodeAt(h.pos);if(!p)continue;const g=p.attrs;for(let x=0;x<g.rowspan;x++)o[h.row+x]+=h.n;r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,Wi(g,g.colspan-h.n,h.n))}else if(h.type=="missing")o[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(n+1+h.pos),null,{...p.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const p=r.mapping.map(n);r.delete(p,p+e.nodeSize)}}let c,u;for(let f=0;f<o.length;f++)o[f]&&(c==null&&(c=f),u=f);for(let f=0,h=n+1;f<s.height;f++){const p=e.child(f),g=h+p.nodeSize,x=o[f];if(x>0){let v="cell";p.firstChild&&(v=p.firstChild.type.spec.tableRole);const S=[];for(let k=0;k<x;k++){const E=Dt(t.schema)[v].createAndFill();E&&S.push(E)}const w=(f==0||c==f-1)&&u==f?h+1:g-1;r.insert(r.mapping.map(w),S)}h=g}return r.setMeta(p4,{fixTables:!0})}function Gn(t){const e=t.selection,n=Uu(t),r=n.node(-1),s=n.start(-1),o=et.get(r);return{...e instanceof Ie?o.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):o.findCell(n.pos-s),tableStart:s,map:o,table:r}}function WS(t,{map:e,tableStart:n,table:r},s){let o=s>0?-1:0;a4(e,r,s+o)&&(o=s==0||s==e.width?null:0);for(let c=0;c<e.height;c++){const u=c*e.width+s;if(s>0&&s<e.width&&e.map[u-1]==e.map[u]){const f=e.map[u],h=r.nodeAt(f);t.setNodeMarkup(t.mapping.map(n+f),null,FS(h.attrs,s-e.colCount(f))),c+=h.attrs.rowspan-1}else{const f=o==null?Dt(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,h=e.positionAt(c,s,r);t.insert(t.mapping.map(n+h),f.createAndFill())}}return t}function g4(t,e){if(!Bn(t))return!1;if(e){const n=Gn(t);e(WS(t.tr,n,n.left))}return!0}function y4(t,e){if(!Bn(t))return!1;if(e){const n=Gn(t);e(WS(t.tr,n,n.right))}return!0}function b4(t,{map:e,table:n,tableStart:r},s){const o=t.mapping.maps.length;for(let c=0;c<e.height;){const u=c*e.width+s,f=e.map[u],h=n.nodeAt(f),p=h.attrs;if(s>0&&e.map[u-1]==f||s<e.width-1&&e.map[u+1]==f)t.setNodeMarkup(t.mapping.slice(o).map(r+f),null,Wi(p,s-e.colCount(f)));else{const g=t.mapping.slice(o).map(r+f);t.delete(g,g+h.nodeSize)}c+=p.rowspan}}function x4(t,e){if(!Bn(t))return!1;if(e){const n=Gn(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let s=n.right-1;b4(r,n,s),s!=n.left;s--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=et.get(o)}e(r)}return!0}function v4(t,e,n){var r;const s=Dt(e.type.schema).header_cell;for(let o=0;o<t.width;o++)if(((r=e.nodeAt(t.map[o+n*t.width]))==null?void 0:r.type)!=s)return!1;return!0}function ZS(t,{map:e,tableStart:n,table:r},s){var o;let c=n;for(let h=0;h<s;h++)c+=r.child(h).nodeSize;const u=[];let f=s>0?-1:0;v4(e,r,s+f)&&(f=s==0||s==e.height?null:0);for(let h=0,p=e.width*s;h<e.width;h++,p++)if(s>0&&s<e.height&&e.map[p]==e.map[p-e.width]){const g=e.map[p],x=r.nodeAt(g).attrs;t.setNodeMarkup(n+g,null,{...x,rowspan:x.rowspan+1}),h+=x.colspan-1}else{const g=f==null?Dt(r.type.schema).cell:(o=r.nodeAt(e.map[p+f*e.width]))==null?void 0:o.type,x=g?.createAndFill();x&&u.push(x)}return t.insert(c,Dt(r.type.schema).row.create(null,u)),t}function S4(t,e){if(!Bn(t))return!1;if(e){const n=Gn(t);e(ZS(t.tr,n,n.top))}return!0}function C4(t,e){if(!Bn(t))return!1;if(e){const n=Gn(t);e(ZS(t.tr,n,n.bottom))}return!0}function w4(t,{map:e,table:n,tableStart:r},s){let o=0;for(let h=0;h<s;h++)o+=n.child(h).nodeSize;const c=o+n.child(s).nodeSize,u=t.mapping.maps.length;t.delete(o+r,c+r);const f=new Set;for(let h=0,p=s*e.width;h<e.width;h++,p++){const g=e.map[p];if(!f.has(g)){if(f.add(g),s>0&&g==e.map[p-e.width]){const x=n.nodeAt(g).attrs;t.setNodeMarkup(t.mapping.slice(u).map(g+r),null,{...x,rowspan:x.rowspan-1}),h+=x.colspan-1}else if(s<e.height&&g==e.map[p+e.width]){const x=n.nodeAt(g),v=x.attrs,S=x.type.create({...v,rowspan:x.attrs.rowspan-1},x.content),w=e.positionAt(s+1,h,n);t.insert(t.mapping.slice(u).map(r+w),S),h+=v.colspan-1}}}}function k4(t,e){if(!Bn(t))return!1;if(e){const n=Gn(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let s=n.bottom-1;w4(r,n,s),s!=n.top;s--){const o=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!o)throw RangeError("No table found");n.table=o,n.map=et.get(n.table)}e(r)}return!0}function w1(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function N4({width:t,height:e,map:n},r){let s=r.top*t+r.left,o=s,c=(r.bottom-1)*t+r.left,u=s+(r.right-r.left-1);for(let f=r.top;f<r.bottom;f++){if(r.left>0&&n[o]==n[o-1]||r.right<t&&n[u]==n[u+1])return!0;o+=t,u+=t}for(let f=r.left;f<r.right;f++){if(r.top>0&&n[s]==n[s-t]||r.bottom<e&&n[c]==n[c+t])return!0;s++,c++}return!1}function k1(t,e){const n=t.selection;if(!(n instanceof Ie)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Gn(t),{map:s}=r;if(N4(s,r))return!1;if(e){const o=t.tr,c={};let u=K.empty,f,h;for(let p=r.top;p<r.bottom;p++)for(let g=r.left;g<r.right;g++){const x=s.map[p*s.width+g],v=r.table.nodeAt(x);if(!(c[x]||!v))if(c[x]=!0,f==null)f=x,h=v;else{w1(v)||(u=u.append(v.content));const S=o.mapping.map(x+r.tableStart);o.delete(S,S+v.nodeSize)}}if(f==null||h==null)return!0;if(o.setNodeMarkup(f+r.tableStart,null,{...FS(h.attrs,h.attrs.colspan,r.right-r.left-h.attrs.colspan),rowspan:r.bottom-r.top}),u.size){const p=f+1+h.content.size,g=w1(h)?f+1:p;o.replaceWith(g+r.tableStart,p+r.tableStart,u)}o.setSelection(new Ie(o.doc.resolve(f+r.tableStart))),e(o)}return!0}function N1(t,e){const n=Dt(t.schema);return E4(({node:r})=>n[r.type.spec.tableRole])(t,e)}function E4(t){return(e,n)=>{var r;const s=e.selection;let o,c;if(s instanceof Ie){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;o=s.$anchorCell.nodeAfter,c=s.$anchorCell.pos}else{if(o=s4(s.$from),!o)return!1;c=(r=al(s.$from))==null?void 0:r.pos}if(o==null||c==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let u=o.attrs;const f=[],h=u.colwidth;u.rowspan>1&&(u={...u,rowspan:1}),u.colspan>1&&(u={...u,colspan:1});const p=Gn(e),g=e.tr;for(let v=0;v<p.right-p.left;v++)f.push(h?{...u,colwidth:h&&h[v]?[h[v]]:null}:u);let x;for(let v=p.top;v<p.bottom;v++){let S=p.map.positionAt(v,p.left,p.table);v==p.top&&(S+=o.nodeSize);for(let w=p.left,k=0;w<p.right;w++,k++)w==p.left&&v==p.top||g.insert(x=g.mapping.map(S+p.tableStart,1),t({node:o,row:v,col:w}).createAndFill(f[k]))}g.setNodeMarkup(c,t({node:o,row:p.top,col:p.left}),f[0]),s instanceof Ie&&g.setSelection(new Ie(g.doc.resolve(s.$anchorCell.pos),x?g.doc.resolve(x):void 0)),n(g)}return!0}}function M4(t,e){return function(n,r){if(!Bn(n))return!1;const s=Uu(n);if(s.nodeAfter.attrs[t]===e)return!1;if(r){const o=n.tr;n.selection instanceof Ie?n.selection.forEachCell((c,u)=>{c.attrs[t]!==e&&o.setNodeMarkup(u,null,{...c.attrs,[t]:e})}):o.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[t]:e}),r(o)}return!0}}function T4(t){return function(e,n){if(!Bn(e))return!1;if(n){const r=Dt(e.schema),s=Gn(e),o=e.tr,c=s.map.cellsInRect(t=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:t=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),u=c.map(f=>s.table.nodeAt(f));for(let f=0;f<c.length;f++)u[f].type==r.header_cell&&o.setNodeMarkup(s.tableStart+c[f],r.cell,u[f].attrs);if(o.steps.length==0)for(let f=0;f<c.length;f++)o.setNodeMarkup(s.tableStart+c[f],r.header_cell,u[f].attrs);n(o)}return!0}}function E1(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const o=e.table.nodeAt(r[s]);if(o&&o.type!==n.header_cell)return!1}return!0}function Lo(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?T4(t):function(n,r){if(!Bn(n))return!1;if(r){const s=Dt(n.schema),o=Gn(n),c=n.tr,u=E1("row",o,s),f=E1("column",o,s),p=(t==="column"?u:t==="row"?f:!1)?1:0,g=t=="column"?{left:0,top:p,right:1,bottom:o.map.height}:t=="row"?{left:p,top:0,right:o.map.width,bottom:1}:o,x=t=="column"?f?s.cell:s.header_cell:t=="row"?u?s.cell:s.header_cell:s.cell;o.map.cellsInRect(g).forEach(v=>{const S=v+o.tableStart,w=c.doc.nodeAt(S);w&&c.setNodeMarkup(S,x,w.attrs)}),r(c)}return!0}}Lo("row",{useDeprecatedLogic:!0});Lo("column",{useDeprecatedLogic:!0});var A4=Lo("cell",{useDeprecatedLogic:!0});function j4(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,s=t.before();r>=0;r--){const o=t.node(-1).child(r),c=o.lastChild;if(c)return s-1-c.nodeSize;s-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),s=t.after();r<n.childCount;r++){const o=n.child(r);if(o.childCount)return s+1;s+=o.nodeSize}}return null}function M1(t){return function(e,n){if(!Bn(e))return!1;const r=j4(Uu(e),t);if(r==null)return!1;if(n){const s=e.doc.resolve(r);n(e.tr.setSelection(ae.between(s,o4(s))).scrollIntoView())}return!0}}function O4(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function xc(t,e){const n=t.selection;if(!(n instanceof Ie))return!1;if(e){const r=t.tr,s=Dt(t.schema).cell.createAndFill().content;n.forEachCell((o,c)=>{o.content.eq(s)||r.replace(r.mapping.map(c+1),r.mapping.map(c+o.nodeSize-1),new Z(s,0,0))}),r.docChanged&&e(r)}return!0}function D4(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const s=e.child(0),o=s.type.spec.tableRole,c=s.type.schema,u=[];if(o=="row")for(let f=0;f<e.childCount;f++){let h=e.child(f).content;const p=f?0:Math.max(0,n-1),g=f<e.childCount-1?0:Math.max(0,r-1);(p||g)&&(h=Ap(Dt(c).row,new Z(h,p,g)).content),u.push(h)}else if(o=="cell"||o=="header_cell")u.push(n||r?Ap(Dt(c).row,new Z(e,n,r)).content:e);else return null;return R4(c,u)}function R4(t,e){const n=[];for(let s=0;s<e.length;s++){const o=e[s];for(let c=o.childCount-1;c>=0;c--){const{rowspan:u,colspan:f}=o.child(c).attrs;for(let h=s;h<s+u;h++)n[h]=(n[h]||0)+f}}let r=0;for(let s=0;s<n.length;s++)r=Math.max(r,n[s]);for(let s=0;s<n.length;s++)if(s>=e.length&&e.push(K.empty),n[s]<r){const o=Dt(t).cell.createAndFill(),c=[];for(let u=n[s];u<r;u++)c.push(o);e[s]=e[s].append(K.from(c))}return{height:e.length,width:r,rows:e}}function Ap(t,e){const n=t.createAndFill();return new qp(n).replace(0,n.content.size,e).doc}function z4({width:t,height:e,rows:n},r,s){if(t!=r){const o=[],c=[];for(let u=0;u<n.length;u++){const f=n[u],h=[];for(let p=o[u]||0,g=0;p<r;g++){let x=f.child(g%f.childCount);p+x.attrs.colspan>r&&(x=x.type.createChecked(Wi(x.attrs,x.attrs.colspan,p+x.attrs.colspan-r),x.content)),h.push(x),p+=x.attrs.colspan;for(let v=1;v<x.attrs.rowspan;v++)o[u+v]=(o[u+v]||0)+x.attrs.colspan}c.push(K.from(h))}n=c,t=r}if(e!=s){const o=[];for(let c=0,u=0;c<s;c++,u++){const f=[],h=n[u%e];for(let p=0;p<h.childCount;p++){let g=h.child(p);c+g.attrs.rowspan>s&&(g=g.type.create({...g.attrs,rowspan:Math.max(1,s-g.attrs.rowspan)},g.content)),f.push(g)}o.push(K.from(f))}n=o,e=s}return{width:t,height:e,rows:n}}function L4(t,e,n,r,s,o,c){const u=t.doc.type.schema,f=Dt(u);let h,p;if(s>e.width)for(let g=0,x=0;g<e.height;g++){const v=n.child(g);x+=v.nodeSize;const S=[];let w;v.lastChild==null||v.lastChild.type==f.cell?w=h||(h=f.cell.createAndFill()):w=p||(p=f.header_cell.createAndFill());for(let k=e.width;k<s;k++)S.push(w);t.insert(t.mapping.slice(c).map(x-1+r),S)}if(o>e.height){const g=[];for(let S=0,w=(e.height-1)*e.width;S<Math.max(e.width,s);S++){const k=S>=e.width?!1:n.nodeAt(e.map[w+S]).type==f.header_cell;g.push(k?p||(p=f.header_cell.createAndFill()):h||(h=f.cell.createAndFill()))}const x=f.row.create(null,K.from(g)),v=[];for(let S=e.height;S<o;S++)v.push(x);t.insert(t.mapping.slice(c).map(r+n.nodeSize-2),v)}return!!(h||p)}function T1(t,e,n,r,s,o,c,u){if(c==0||c==e.height)return!1;let f=!1;for(let h=s;h<o;h++){const p=c*e.width+h,g=e.map[p];if(e.map[p-e.width]==g){f=!0;const x=n.nodeAt(g),{top:v,left:S}=e.findCell(g);t.setNodeMarkup(t.mapping.slice(u).map(g+r),null,{...x.attrs,rowspan:c-v}),t.insert(t.mapping.slice(u).map(e.positionAt(c,S,n)),x.type.createAndFill({...x.attrs,rowspan:v+x.attrs.rowspan-c})),h+=x.attrs.colspan-1}}return f}function A1(t,e,n,r,s,o,c,u){if(c==0||c==e.width)return!1;let f=!1;for(let h=s;h<o;h++){const p=h*e.width+c,g=e.map[p];if(e.map[p-1]==g){f=!0;const x=n.nodeAt(g),v=e.colCount(g),S=t.mapping.slice(u).map(g+r);t.setNodeMarkup(S,null,Wi(x.attrs,c-v,x.attrs.colspan-(c-v))),t.insert(S+x.nodeSize,x.type.createAndFill(Wi(x.attrs,0,c-v))),h+=x.attrs.rowspan-1}}return f}function j1(t,e,n,r,s){let o=n?t.doc.nodeAt(n-1):t.doc;if(!o)throw new Error("No table found");let c=et.get(o);const{top:u,left:f}=r,h=f+s.width,p=u+s.height,g=t.tr;let x=0;function v(){if(o=n?g.doc.nodeAt(n-1):g.doc,!o)throw new Error("No table found");c=et.get(o),x=g.mapping.maps.length}L4(g,c,o,n,h,p,x)&&v(),T1(g,c,o,n,f,h,u,x)&&v(),T1(g,c,o,n,f,h,p,x)&&v(),A1(g,c,o,n,u,p,f,x)&&v(),A1(g,c,o,n,u,p,h,x)&&v();for(let S=u;S<p;S++){const w=c.positionAt(S,f,o),k=c.positionAt(S,h,o);g.replace(g.mapping.slice(x).map(w+n),g.mapping.slice(x).map(k+n),new Z(s.rows[S-u],0,0))}v(),g.setSelection(new Ie(g.doc.resolve(n+c.positionAt(u,f,o)),g.doc.resolve(n+c.positionAt(p-1,h-1,o)))),e(g)}var B4=sm({ArrowLeft:vc("horiz",-1),ArrowRight:vc("horiz",1),ArrowUp:vc("vert",-1),ArrowDown:vc("vert",1),"Shift-ArrowLeft":Sc("horiz",-1),"Shift-ArrowRight":Sc("horiz",1),"Shift-ArrowUp":Sc("vert",-1),"Shift-ArrowDown":Sc("vert",1),Backspace:xc,"Mod-Backspace":xc,Delete:xc,"Mod-Delete":xc});function jc(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function vc(t,e){return(n,r,s)=>{if(!s)return!1;const o=n.selection;if(o instanceof Ie)return jc(n,r,ue.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const c=eC(s,t,e);if(c==null)return!1;if(t=="horiz")return jc(n,r,ue.near(n.doc.resolve(o.head+e),e));{const u=n.doc.resolve(c),f=YS(u,t,e);let h;return f?h=ue.near(f,1):e<0?h=ue.near(n.doc.resolve(u.before(-1)),-1):h=ue.near(n.doc.resolve(u.after(-1)),1),jc(n,r,h)}}}function Sc(t,e){return(n,r,s)=>{if(!s)return!1;const o=n.selection;let c;if(o instanceof Ie)c=o;else{const f=eC(s,t,e);if(f==null)return!1;c=new Ie(n.doc.resolve(f))}const u=YS(c.$headCell,t,e);return u?jc(n,r,new Ie(c.$anchorCell,u)):!1}}function _4(t,e){const n=t.state.doc,r=al(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ie(r))),!0):!1}function H4(t,e,n){if(!Bn(t.state))return!1;let r=D4(n);const s=t.state.selection;if(s instanceof Ie){r||(r={width:1,height:1,rows:[K.from(Ap(Dt(t.state.schema).cell,n))]});const o=s.$anchorCell.node(-1),c=s.$anchorCell.start(-1),u=et.get(o).rectBetween(s.$anchorCell.pos-c,s.$headCell.pos-c);return r=z4(r,u.right-u.left,u.bottom-u.top),j1(t.state,t.dispatch,c,u,r),!0}else if(r){const o=Uu(t.state),c=o.start(-1);return j1(t.state,t.dispatch,c,et.get(o.node(-1)).findCell(o.pos-c),r),!0}else return!1}function U4(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=O1(t,e.target);let s;if(e.shiftKey&&t.state.selection instanceof Ie)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=al(t.state.selection.$anchor))!=null&&((n=Kh(t,e))==null?void 0:n.pos)!=s.pos)o(s,e),e.preventDefault();else if(!r)return;function o(f,h){let p=Kh(t,h);const g=ni.getState(t.state)==null;if(!p||!Tm(f,p))if(g)p=f;else return;const x=new Ie(f,p);if(g||!t.state.selection.eq(x)){const v=t.state.tr.setSelection(x);g&&v.setMeta(ni,f.pos),t.dispatch(v)}}function c(){t.root.removeEventListener("mouseup",c),t.root.removeEventListener("dragstart",c),t.root.removeEventListener("mousemove",u),ni.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(ni,-1))}function u(f){const h=f,p=ni.getState(t.state);let g;if(p!=null)g=t.state.doc.resolve(p);else if(O1(t,h.target)!=r&&(g=Kh(t,e),!g))return c();g&&o(g,h)}t.root.addEventListener("mouseup",c),t.root.addEventListener("dragstart",c),t.root.addEventListener("mousemove",u)}function eC(t,e,n){if(!(t.state.selection instanceof ae))return null;const{$head:r}=t.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(s),f=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(f)?u:null}}return null}function O1(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Kh(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?al(t.state.doc.resolve(n.pos)):null}var V4=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),jp(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,jp(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function jp(t,e,n,r,s,o){var c;let u=0,f=!0,h=e.firstChild;const p=t.firstChild;if(p){for(let g=0,x=0;g<p.childCount;g++){const{colspan:v,colwidth:S}=p.child(g).attrs;for(let w=0;w<v;w++,x++){const k=s==x?o:S&&S[w],E=k?k+"px":"";if(u+=k||r,k||(f=!1),h)h.style.width!=E&&(h.style.width=E),h=h.nextSibling;else{const O=document.createElement("col");O.style.width=E,e.appendChild(O)}}}for(;h;){const g=h.nextSibling;(c=h.parentNode)==null||c.removeChild(h),h=g}f?(n.style.width=u+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=u+"px")}}var ln=new tt("tableColumnResizing");function $4({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=V4,lastColumnResizable:s=!0}={}){const o=new Ye({key:ln,state:{init(c,u){var f,h;const p=(h=(f=o.spec)==null?void 0:f.props)==null?void 0:h.nodeViews,g=Dt(u.schema).table.name;return r&&p&&(p[g]=(x,v)=>new r(x,n,v)),new I4(-1,!1)},apply(c,u){return u.apply(c)}},props:{attributes:c=>{const u=ln.getState(c);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(c,u)=>{q4(c,u,t,s)},mouseleave:c=>{P4(c)},mousedown:(c,u)=>{K4(c,u,e,n)}},decorations:c=>{const u=ln.getState(c);if(u&&u.activeHandle>-1)return X4(c,u.activeHandle)},nodeViews:{}}});return o}var I4=class Oc{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(ln);if(r&&r.setHandle!=null)return new Oc(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Oc(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let s=e.mapping.map(n.activeHandle,-1);return Tp(e.doc.resolve(s))||(s=-1),new Oc(s,n.dragging)}return n}};function q4(t,e,n,r){if(!t.editable)return;const s=ln.getState(t.state);if(s&&!s.dragging){const o=Y4(e.target);let c=-1;if(o){const{left:u,right:f}=o.getBoundingClientRect();e.clientX-u<=n?c=D1(t,e,"left",n):f-e.clientX<=n&&(c=D1(t,e,"right",n))}if(c!=s.activeHandle){if(!r&&c!==-1){const u=t.state.doc.resolve(c),f=u.node(-1),h=et.get(f),p=u.start(-1);if(h.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==h.width-1)return}tC(t,c)}}}function P4(t){if(!t.editable)return;const e=ln.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&tC(t,-1)}function K4(t,e,n,r){var s;if(!t.editable)return!1;const o=(s=t.dom.ownerDocument.defaultView)!=null?s:window,c=ln.getState(t.state);if(!c||c.activeHandle==-1||c.dragging)return!1;const u=t.state.doc.nodeAt(c.activeHandle),f=G4(t,c.activeHandle,u.attrs);t.dispatch(t.state.tr.setMeta(ln,{setDragging:{startX:e.clientX,startWidth:f}}));function h(g){o.removeEventListener("mouseup",h),o.removeEventListener("mousemove",p);const x=ln.getState(t.state);x?.dragging&&(F4(t,x.activeHandle,R1(x.dragging,g,n)),t.dispatch(t.state.tr.setMeta(ln,{setDragging:null})))}function p(g){if(!g.which)return h(g);const x=ln.getState(t.state);if(x&&x.dragging){const v=R1(x.dragging,g,n);z1(t,x.activeHandle,v,r)}}return z1(t,c.activeHandle,f,r),o.addEventListener("mouseup",h),o.addEventListener("mousemove",p),e.preventDefault(),!0}function G4(t,e,{colspan:n,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const o=t.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,f=n;if(r)for(let h=0;h<n;h++)r[h]&&(u-=r[h],f--);return u/f}function Y4(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function D1(t,e,n,r){const s=n=="right"?-r:r,o=t.posAtCoords({left:e.clientX+s,top:e.clientY});if(!o)return-1;const{pos:c}=o,u=al(t.state.doc.resolve(c));if(!u)return-1;if(n=="right")return u.pos;const f=et.get(u.node(-1)),h=u.start(-1),p=f.map.indexOf(u.pos-h);return p%f.width==0?-1:h+f.map[p-1]}function R1(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function tC(t,e){t.dispatch(t.state.tr.setMeta(ln,{setHandle:e}))}function F4(t,e,n){const r=t.state.doc.resolve(e),s=r.node(-1),o=et.get(s),c=r.start(-1),u=o.colCount(r.pos-c)+r.nodeAfter.attrs.colspan-1,f=t.state.tr;for(let h=0;h<o.height;h++){const p=h*o.width+u;if(h&&o.map[p]==o.map[p-o.width])continue;const g=o.map[p],x=s.nodeAt(g).attrs,v=x.colspan==1?0:u-o.colCount(g);if(x.colwidth&&x.colwidth[v]==n)continue;const S=x.colwidth?x.colwidth.slice():J4(x.colspan);S[v]=n,f.setNodeMarkup(c+g,null,{...x,colwidth:S})}f.docChanged&&t.dispatch(f)}function z1(t,e,n,r){const s=t.state.doc.resolve(e),o=s.node(-1),c=s.start(-1),u=et.get(o).colCount(s.pos-c)+s.nodeAfter.attrs.colspan-1;let f=t.domAtPos(s.start(-1)).node;for(;f&&f.nodeName!="TABLE";)f=f.parentNode;f&&jp(o,f.firstChild,f,r,u,n)}function J4(t){return Array(t).fill(0)}function X4(t,e){var n;const r=[],s=t.doc.resolve(e),o=s.node(-1);if(!o)return $e.empty;const c=et.get(o),u=s.start(-1),f=c.colCount(s.pos-u)+s.nodeAfter.attrs.colspan-1;for(let h=0;h<c.height;h++){const p=f+h*c.width;if((f==c.width-1||c.map[p]!=c.map[p+1])&&(h==0||c.map[p]!=c.map[p-c.width])){const g=c.map[p],x=u+g+o.nodeAt(g).nodeSize-1,v=document.createElement("div");v.className="column-resize-handle",(n=ln.getState(t))!=null&&n.dragging&&r.push(yt.node(u+g,u+g+o.nodeAt(g).nodeSize,{class:"column-resize-dragging"})),r.push(yt.widget(x,v))}}return $e.create(t.doc,r)}function Q4({allowTableNodeSelection:t=!1}={}){return new Ye({key:ni,state:{init(){return null},apply(e,n){const r=e.getMeta(ni);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:s,pos:o}=e.mapping.mapResult(n);return s?null:o}},props:{decorations:u4,handleDOMEvents:{mousedown:U4},createSelectionBetween(e){return ni.getState(e.state)!=null?e.state.selection:null},handleTripleClick:_4,handleKeyDown:B4,handlePaste:H4},appendTransaction(e,n,r){return h4(r,QS(r,n),t)}})}var Am=vt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),s=r?r.split(",").map(o=>parseInt(o,10)):null;if(!s){const o=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),c=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(c&&c>-1&&o&&o[c]){const u=o[c].getAttribute("width");return u?[parseInt(u,10)]:null}}return s}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ve(this.options.HTMLAttributes,t),0]}}),jm=vt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ve(this.options.HTMLAttributes,t),0]}}),Om=vt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ve(this.options.HTMLAttributes,t),0]}});function Op(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function L1(t,e,n,r,s,o){var c;let u=0,f=!0,h=e.firstChild;const p=t.firstChild;if(p!==null)for(let g=0,x=0;g<p.childCount;g+=1){const{colspan:v,colwidth:S}=p.child(g).attrs;for(let w=0;w<v;w+=1,x+=1){const k=s===x?o:S&&S[w],E=k?`${k}px`:"";if(u+=k||r,k||(f=!1),h){if(h.style.width!==E){const[O,B]=Op(r,k);h.style.setProperty(O,B)}h=h.nextSibling}else{const O=document.createElement("col"),[B,G]=Op(r,k);O.style.setProperty(B,G),e.appendChild(O)}}}for(;h;){const g=h.nextSibling;(c=h.parentNode)==null||c.removeChild(h),h=g}f?(n.style.width=`${u}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${u}px`)}var W4=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),L1(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,L1(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function Z4(t,e,n,r){let s=0,o=!0;const c=[],u=t.firstChild;if(!u)return{};for(let g=0,x=0;g<u.childCount;g+=1){const{colspan:v,colwidth:S}=u.child(g).attrs;for(let w=0;w<v;w+=1,x+=1){const k=n===x?r:S&&S[w];s+=k||e,k||(o=!1);const[E,O]=Op(e,k);c.push(["col",{style:`${E}: ${O}`}])}}const f=o?`${s}px`:"",h=o?"":`${s}px`;return{colgroup:["colgroup",{},...c],tableWidth:f,tableMinWidth:h}}function B1(t,e){return t.createAndFill()}function eR(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function tR(t,e,n,r,s){const o=eR(t),c=[],u=[];for(let h=0;h<n;h+=1){const p=B1(o.cell);if(p&&u.push(p),r){const g=B1(o.header_cell);g&&c.push(g)}}const f=[];for(let h=0;h<e;h+=1)f.push(o.row.createChecked(null,r&&h===0?c:u));return o.table.createChecked(null,f)}function nR(t){return t instanceof Ie}var Cc=({editor:t})=>{const{selection:e}=t.state;if(!nR(e))return!1;let n=0;const r=V2(e.ranges[0].$from,o=>o.type.name==="table");return r?.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},rR="";function iR(t){return(t||"").replace(/\s+/g," ").trim()}function sR(t,e,n={}){var r;const s=(r=n.cellLineSeparator)!=null?r:rR;if(!t||!t.content||t.content.length===0)return"";const o=[];t.content.forEach(S=>{const w=[];S.content&&S.content.forEach(k=>{let E="";k.content&&Array.isArray(k.content)&&k.content.length>1?E=k.content.map(U=>e.renderChildren(U)).join(s):E=k.content?e.renderChildren(k.content):"";const O=iR(E),B=k.type==="tableHeader";w.push({text:O,isHeader:B})}),o.push(w)});const c=o.reduce((S,w)=>Math.max(S,w.length),0);if(c===0)return"";const u=new Array(c).fill(0);o.forEach(S=>{var w;for(let k=0;k<c;k+=1){const O=(((w=S[k])==null?void 0:w.text)||"").length;O>u[k]&&(u[k]=O),u[k]<3&&(u[k]=3)}});const f=(S,w)=>S+" ".repeat(Math.max(0,w-S.length)),h=o[0],p=h.some(S=>S.isHeader);let g=`
`;const x=new Array(c).fill(0).map((S,w)=>p&&h[w]&&h[w].text||"");return g+=`| ${x.map((S,w)=>f(S,u[w])).join(" | ")} |
`,g+=`| ${u.map(S=>"-".repeat(Math.max(3,S))).join(" | ")} |
`,(p?o.slice(1):o).forEach(S=>{g+=`| ${new Array(c).fill(0).map((w,k)=>f(S[k]&&S[k].text||"",u[k])).join(" | ")} |
`}),g}var lR=sR,Dm=vt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:W4,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:s}=Z4(t,this.options.cellMinWidth);return["table",Ve(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),n,["tbody",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(s=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(s.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const s=[];r.forEach(o=>{s.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(o.tokens)}]))}),n.push(e.createNode("tableRow",{},s))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>lR(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:s,editor:o})=>{const c=tR(o.schema,t,e,n);if(s){const u=r.selection.from+1;r.replaceSelectionWith(c).scrollIntoView().setSelection(ae.near(r.doc.resolve(u)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>g4(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>y4(t,e),deleteColumn:()=>({state:t,dispatch:e})=>x4(t,e),addRowBefore:()=>({state:t,dispatch:e})=>S4(t,e),addRowAfter:()=>({state:t,dispatch:e})=>C4(t,e),deleteRow:()=>({state:t,dispatch:e})=>k4(t,e),deleteTable:()=>({state:t,dispatch:e})=>O4(t,e),mergeCells:()=>({state:t,dispatch:e})=>k1(t,e),splitCell:()=>({state:t,dispatch:e})=>N1(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Lo("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Lo("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>A4(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>k1(t,e)?!0:N1(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>M4(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>M1(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>M1(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&QS(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Ie.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Cc,"Mod-Backspace":Cc,Delete:Cc,"Mod-Delete":Cc}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[$4({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Q4({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Te(le(t,"tableRole",e))}}});Be.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(Dm.configure(this.options.table)),this.options.tableCell!==!1&&t.push(Am.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(jm.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(Om.configure(this.options.tableRow)),t}});/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aR=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),_1=t=>{const e=aR(t);return e.charAt(0).toUpperCase()+e.slice(1)},nC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),cR=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:c,...u},f)=>A.createElement("svg",{ref:f,...uR,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nC("lucide",s),...!o&&!cR(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>A.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(t,e)=>{const n=A.forwardRef(({className:r,...s},o)=>A.createElement(dR,{ref:o,iconNode:e,className:nC(`lucide-${oR(_1(t))}`,`lucide-${t}`,r),...s}));return n.displayName=_1(t),n};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],rC=nt("bold",fR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],iC=nt("code",hR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],sC=nt("heading-1",pR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],lC=nt("heading-2",mR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],oC=nt("heading-3",gR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],aC=nt("highlighter",yR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],cC=nt("italic",bR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],uC=nt("link-2",xR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],dC=nt("list-ordered",vR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],fC=nt("list",SR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M5 12h14",key:"1ays0h"}]],hC=nt("minus",CR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],pC=nt("quote",wR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],mC=nt("redo",kR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],gC=nt("strikethrough",NR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],yC=nt("table",ER);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],bC=nt("text-align-center",MR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],xC=nt("text-align-end",TR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],vC=nt("text-align-justify",AR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],SC=nt("text-align-start",jR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],CC=nt("type",OR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],wC=nt("underline",DR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],kC=nt("undo",RR);function zR({node:t}){return b.jsx(sO,{as:"span",className:"inline items-center px-2 py-0.5 rounded text-sm font-medium bg-blue-100 text-blue-800 border border-blue-300",contentEditable:!1,style:{display:"inline",whiteSpace:"nowrap"},children:`{{${t.attrs.label}}}`})}const NC=vt.create({name:"variable",group:"inline",inline:!0,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}}}},parseHTML(){return[{tag:'span[data-type="variable"]'}]},renderHTML({HTMLAttributes:t}){return["span",Ve({"data-type":"variable"},t),`{{${t["data-label"]}}}`]},addNodeView(){return dO(zR)},addCommands(){return{setVariable:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addProseMirrorPlugins(){return[new Ye({key:new tt("autoConvertVariables"),appendTransaction:(t,e,n)=>{if(!t.some(u=>u.docChanged))return null;let s=n.tr,o=!1;const c=/\{\{([^}]+)\}\}/g;return n.doc.descendants((u,f)=>{if(!u.isText||!u.text)return;let h;const p=[];for(;(h=c.exec(u.text))!==null;)p.push({start:f+h.index,end:f+h.index+h[0].length,text:h[1].trim()});for(let g=p.length-1;g>=0;g--){const{start:x,end:v,text:S}=p[g],w=this.type.create({id:S.toLowerCase().replace(/\s+/g,"_"),label:S});s=s.replaceWith(x,v,w),o=!0}}),o?s:null}})]}});function LR(){const t=Ln(),e=zn(),[n,r]=A.useState([]),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState(""),[p,g]=A.useState("ativo"),[x,v]=A.useState(""),[S,w]=A.useState(""),[k,E]=A.useState(!1),[O,B]=A.useState(""),[G,U]=A.useState(""),[Y,$]=A.useState(!1),[te,F]=A.useState(""),J=dS({extensions:[$S,NC,LS,IS.configure({types:["heading","paragraph"]}),KS,GS.configure({multicolor:!0}),wS.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline cursor-pointer"}}),Dm.configure({resizable:!0}),Om,jm,Am],content:"<p>Digite o contedo do contrato aqui...</p>",editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg mx-auto focus:outline-none min-h-[400px] p-4 max-w-none"}}});A.useEffect(()=>{qe()},[]),A.useEffect(()=>{if(e.state?.clienteSelecionado){const Q=e.state.clienteSelecionado;o(Q.id),w(Q.razaoSocial),t(e.pathname,{replace:!0,state:{}})}},[e,t]);const qe=async()=>{try{const Q=await ll.listar();r(Q)}catch(Q){console.error("Erro ao carregar clientes:",Q),B("Erro ao carregar lista de clientes")}},Se=n.filter(Q=>Q.razaoSocial.toLowerCase().includes(S.toLowerCase())||Q.cnpj.includes(S)),lt=()=>{te&&(J.chain().focus().setLink({href:te}).run(),F(""),$(!1))},Oe=()=>{J.chain().focus().unsetLink().run()},De=()=>{J.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},H=async Q=>{if(Q.preventDefault(),B(""),U(""),!c.trim()){B("O ttulo do contrato  obrigatrio");return}if(!s){B("Selecione um cliente");return}if(x&&new Date(x)<new Date){B("A data de vigncia no pode ser no passado");return}if(!J||J.isEmpty){B("O contedo do contrato no pode estar vazio");return}E(!0);try{const we={clienteId:s,titulo:c.trim(),descricao:f.trim(),status:p,conteudo:J.getHTML(),dataVigencia:x||null};await Qs.criar(we),U("Contrato cadastrado com sucesso!"),setTimeout(()=>{t("/dashboard")},2e3)}catch(we){B(we.message||"Erro ao cadastrar contrato")}finally{E(!1)}},W=n.find(Q=>Q.id===s);return b.jsx("div",{className:"min-h-screen bg-gray-100",children:b.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("button",{onClick:()=>t("/dashboard"),className:"text-blue-600 hover:text-blue-800 mb-4 flex items-center",children:" Voltar ao Dashboard"}),b.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cadastrar Novo Contrato"})]}),O&&b.jsx("div",{className:"mb-4 bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded",children:O}),G&&b.jsx("div",{className:"mb-4 bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded",children:G}),b.jsxs("form",{onSubmit:H,className:"space-y-6",children:[b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo do Contrato *"}),b.jsx("input",{type:"text",value:c,onChange:Q=>u(Q.target.value),placeholder:"Ex: Contrato de Prestao de Servios",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:3,maxLength:200})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),b.jsx("textarea",{value:f,onChange:Q=>h(Q.target.value),placeholder:"Breve descrio sobre o contrato (opcional)",rows:"3",maxLength:1e3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),b.jsxs("select",{value:p,onChange:Q=>g(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[b.jsx("option",{value:"ativo",children:"Ativo"}),b.jsx("option",{value:"inativo",children:"Inativo"}),b.jsx("option",{value:"pendente",children:"Pendente"}),b.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Vigncia"}),b.jsx("input",{type:"date",value:x,onChange:Q=>v(Q.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Data limite de validade do contrato"})]})]})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),b.jsx("input",{type:"text",placeholder:"Buscar cliente por razo social ou CNPJ...",value:S,onChange:Q=>w(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"}),b.jsxs("select",{value:s,onChange:Q=>o(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[b.jsx("option",{value:"",children:"Selecione um cliente"}),Se.map(Q=>b.jsxs("option",{value:Q.id,children:[Q.razaoSocial," - CNPJ: ",Q.cnpj]},Q.id))]}),W&&b.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md",children:[b.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Cliente Selecionado:"}),b.jsxs("p",{className:"text-sm text-blue-800",children:[b.jsx("strong",{children:"Razo Social:"})," ",W.razaoSocial]}),b.jsxs("p",{className:"text-sm text-blue-800",children:[b.jsx("strong",{children:"CNPJ:"})," ",W.cnpj]}),b.jsxs("p",{className:"text-sm text-blue-800",children:[b.jsx("strong",{children:"Email:"})," ",W.email]})]})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contedo do Contrato *"}),b.jsxs("div",{className:"border border-gray-300 rounded-t-md bg-gradient-to-b from-gray-50 to-gray-100 p-3 space-y-3",children:[b.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().undo().run(),disabled:!J?.can().undo(),className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition",title:"Desfazer",children:b.jsx(kC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().redo().run(),disabled:!J?.can().redo(),className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition",title:"Refazer",children:b.jsx(mC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().setParagraph().run(),className:`px-3 py-1.5 rounded text-sm font-medium transition ${J?.isActive("paragraph")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Pargrafo Normal",children:"Normal"}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleHeading({level:1}).run(),className:`p-2 rounded transition ${J?.isActive("heading",{level:1})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Ttulo 1",children:b.jsx(sC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded transition ${J?.isActive("heading",{level:2})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Ttulo 2",children:b.jsx(lC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleHeading({level:3}).run(),className:`p-2 rounded transition ${J?.isActive("heading",{level:3})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Ttulo 3",children:b.jsx(oC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleBold().run(),className:`p-2 rounded transition ${J?.isActive("bold")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Negrito (Ctrl+B)",children:b.jsx(rC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleItalic().run(),className:`p-2 rounded transition ${J?.isActive("italic")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Itlico (Ctrl+I)",children:b.jsx(cC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleUnderline().run(),className:`p-2 rounded transition ${J?.isActive("underline")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Sublinhado (Ctrl+U)",children:b.jsx(wC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleStrike().run(),className:`p-2 rounded transition ${J?.isActive("strike")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Tachado",children:b.jsx(gC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleCode().run(),className:`p-2 rounded transition ${J?.isActive("code")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Cdigo",children:b.jsx(iC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(CC,{size:16,className:"text-gray-600"}),b.jsx("input",{type:"color",onChange:Q=>J.chain().focus().setColor(Q.target.value).run(),className:"w-8 h-8 cursor-pointer rounded border border-gray-300",title:"Cor do Texto"})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(aC,{size:16,className:"text-gray-600"}),b.jsx("input",{type:"color",onChange:Q=>J.chain().focus().toggleHighlight({color:Q.target.value}).run(),className:"w-8 h-8 cursor-pointer rounded border border-gray-300",title:"Cor de Destaque"})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().setTextAlign("left").run(),className:`p-2 rounded transition ${J?.isActive({textAlign:"left"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Alinhar  Esquerda",children:b.jsx(SC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().setTextAlign("center").run(),className:`p-2 rounded transition ${J?.isActive({textAlign:"center"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Centralizar",children:b.jsx(bC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().setTextAlign("right").run(),className:`p-2 rounded transition ${J?.isActive({textAlign:"right"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Alinhar  Direita",children:b.jsx(xC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().setTextAlign("justify").run(),className:`p-2 rounded transition ${J?.isActive({textAlign:"justify"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Justificar",children:b.jsx(vC,{size:18})})]})]}),b.jsxs("div",{className:"flex flex-wrap gap-2 items-center pt-2 border-t border-gray-300",children:[b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleBulletList().run(),className:`p-2 rounded transition ${J?.isActive("bulletList")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Lista com Marcadores",children:b.jsx(fC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleOrderedList().run(),className:`p-2 rounded transition ${J?.isActive("orderedList")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Lista Numerada",children:b.jsx(dC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().toggleBlockquote().run(),className:`p-2 rounded transition ${J?.isActive("blockquote")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Citao",children:b.jsx(pC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().setHorizontalRule().run(),className:"p-2 rounded bg-white text-gray-700 hover:bg-gray-200 transition",title:"Linha Horizontal",children:b.jsx(hC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300 items-center",children:[b.jsx("button",{type:"button",onClick:()=>{J.isActive("link")?Oe():$(!Y)},className:`p-2 rounded transition ${J?.isActive("link")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Inserir Link",children:b.jsx(uC,{size:18})}),Y&&b.jsxs("div",{className:"flex gap-1 items-center",children:[b.jsx("input",{type:"url",placeholder:"https://exemplo.com",value:te,onChange:Q=>F(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&lt(),className:"px-2 py-1 text-sm border border-gray-300 rounded w-48"}),b.jsx("button",{type:"button",onClick:lt,className:"px-2 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"OK"}),b.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-2 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:""})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:De,className:"p-2 rounded bg-white text-gray-700 hover:bg-gray-200 transition",title:"Inserir Tabela (3x3)",children:b.jsx(yC,{size:18})}),J?.isActive("table")&&b.jsxs(b.Fragment,{children:[b.jsx("button",{type:"button",onClick:()=>J.chain().focus().addColumnBefore().run(),className:"px-2 py-1 text-xs bg-white rounded hover:bg-gray-200",title:"Adicionar Coluna Antes",children:"+Col"}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().addRowBefore().run(),className:"px-2 py-1 text-xs bg-white rounded hover:bg-gray-200",title:"Adicionar Linha Antes",children:"+Row"}),b.jsx("button",{type:"button",onClick:()=>J.chain().focus().deleteTable().run(),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:"Excluir Tabela",children:"Del"})]})]})]}),b.jsx("div",{className:"border-t border-gray-300 pt-2",children:b.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded p-3",children:[b.jsx("p",{className:"text-xs font-semibold text-purple-900 mb-1",children:" Dica: Crie variveis dinmicas"}),b.jsxs("p",{className:"text-xs text-purple-700",children:["Digite ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{nome_da_variavel}}"})," no texto e ela ser automaticamente convertida em uma varivel destacada."]}),b.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:["Exemplos: ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{nome_cliente}}"}),", ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{data_contrato}}"}),", ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{valor_total}}"})]})]})})]}),b.jsx("div",{className:"border border-t-0 border-gray-300 rounded-b-md bg-white",children:b.jsx(cS,{editor:J})})]}),b.jsxs("div",{className:"flex justify-end space-x-4",children:[b.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:k,children:"Cancelar"}),b.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",disabled:k,children:k?"Salvando...":"Salvar Contrato"})]})]})]})})}function BR(){const t=Ln(),e=zn(),{contrato:n,cliente:r}=e.state||{},[s,o]=A.useState(n?.titulo||""),[c,u]=A.useState(!1),[f,h]=A.useState(""),[p,g]=A.useState(""),[x,v]=A.useState(!1),[S,w]=A.useState(""),k=dS({extensions:[$S,NC,LS,IS.configure({types:["heading","paragraph"]}),KS,GS.configure({multicolor:!0}),wS.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline cursor-pointer"}}),Dm.configure({resizable:!0}),Om,jm,Am],content:n?.conteudo||"<p>Digite o contedo do contrato aqui...</p>",editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4"}}});A.useEffect(()=>{(!n||!r)&&(h("Dados do contrato no encontrados"),setTimeout(()=>t("/clientes-contratos"),2e3))},[n,r,t]);const E=()=>{S&&(k.chain().focus().setLink({href:S}).run(),w(""),v(!1))},O=()=>{k.chain().focus().unsetLink().run()},B=()=>{k.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},G=async U=>{if(U.preventDefault(),h(""),g(""),!s.trim()){h("O ttulo do contrato  obrigatrio");return}if(!k||k.isEmpty){h("O contedo do contrato no pode estar vazio");return}u(!0);try{const Y={titulo:s.trim(),conteudo:k.getHTML()};await Qs.atualizar(n.id,Y),g("Contrato atualizado com sucesso!"),setTimeout(()=>{t("/clientes-contratos")},2e3)}catch(Y){h(Y.message||"Erro ao atualizar contrato")}finally{u(!1)}};return!n||!r?null:b.jsx("div",{className:"min-h-screen bg-gray-100",children:b.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("button",{onClick:()=>t("/clientes-contratos"),className:"text-blue-600 hover:text-blue-800 mb-4 flex items-center",children:" Voltar para Clientes e Contratos"}),b.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Contrato"}),b.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Cliente: ",r.razaoSocial]})]}),f&&b.jsx("div",{className:"mb-4 bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded",children:f}),p&&b.jsx("div",{className:"mb-4 bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded",children:p}),b.jsxs("form",{onSubmit:G,className:"space-y-6",children:[b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo do Contrato *"}),b.jsx("input",{type:"text",value:s,onChange:U=>o(U.target.value),placeholder:"Ex: Contrato de Prestao de Servios",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Cliente:"}),b.jsxs("p",{className:"text-sm text-gray-800",children:[b.jsx("strong",{children:"Razo Social:"})," ",r.razaoSocial]}),b.jsxs("p",{className:"text-sm text-gray-800",children:[b.jsx("strong",{children:"CNPJ:"})," ",r.cnpj]}),b.jsxs("p",{className:"text-sm text-gray-800",children:[b.jsx("strong",{children:"Email:"})," ",r.email]})]}),b.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contedo do Contrato *"}),b.jsxs("div",{className:"border border-gray-300 rounded-t-md bg-gradient-to-b from-gray-50 to-gray-100 p-3 space-y-3",children:[b.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().undo().run(),disabled:!k?.can().undo(),className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition",title:"Desfazer",children:b.jsx(kC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().redo().run(),disabled:!k?.can().redo(),className:"p-2 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition",title:"Refazer",children:b.jsx(mC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().setParagraph().run(),className:`px-3 py-1.5 rounded text-sm font-medium transition ${k?.isActive("paragraph")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Pargrafo Normal",children:"Normal"}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleHeading({level:1}).run(),className:`p-2 rounded transition ${k?.isActive("heading",{level:1})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Ttulo 1",children:b.jsx(sC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded transition ${k?.isActive("heading",{level:2})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Ttulo 2",children:b.jsx(lC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleHeading({level:3}).run(),className:`p-2 rounded transition ${k?.isActive("heading",{level:3})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Ttulo 3",children:b.jsx(oC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleBold().run(),className:`p-2 rounded transition ${k?.isActive("bold")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Negrito (Ctrl+B)",children:b.jsx(rC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleItalic().run(),className:`p-2 rounded transition ${k?.isActive("italic")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Itlico (Ctrl+I)",children:b.jsx(cC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleUnderline().run(),className:`p-2 rounded transition ${k?.isActive("underline")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Sublinhado (Ctrl+U)",children:b.jsx(wC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleStrike().run(),className:`p-2 rounded transition ${k?.isActive("strike")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Tachado",children:b.jsx(gC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleCode().run(),className:`p-2 rounded transition ${k?.isActive("code")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Cdigo",children:b.jsx(iC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(CC,{size:16,className:"text-gray-600"}),b.jsx("input",{type:"color",onChange:U=>k.chain().focus().setColor(U.target.value).run(),className:"w-8 h-8 cursor-pointer rounded border border-gray-300",title:"Cor do Texto"})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(aC,{size:16,className:"text-gray-600"}),b.jsx("input",{type:"color",onChange:U=>k.chain().focus().toggleHighlight({color:U.target.value}).run(),className:"w-8 h-8 cursor-pointer rounded border border-gray-300",title:"Cor de Destaque"})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().setTextAlign("left").run(),className:`p-2 rounded transition ${k?.isActive({textAlign:"left"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Alinhar  Esquerda",children:b.jsx(SC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().setTextAlign("center").run(),className:`p-2 rounded transition ${k?.isActive({textAlign:"center"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Centralizar",children:b.jsx(bC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().setTextAlign("right").run(),className:`p-2 rounded transition ${k?.isActive({textAlign:"right"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Alinhar  Direita",children:b.jsx(xC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().setTextAlign("justify").run(),className:`p-2 rounded transition ${k?.isActive({textAlign:"justify"})?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Justificar",children:b.jsx(vC,{size:18})})]})]}),b.jsxs("div",{className:"flex flex-wrap gap-2 items-center pt-2 border-t border-gray-300",children:[b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleBulletList().run(),className:`p-2 rounded transition ${k?.isActive("bulletList")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Lista com Marcadores",children:b.jsx(fC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleOrderedList().run(),className:`p-2 rounded transition ${k?.isActive("orderedList")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Lista Numerada",children:b.jsx(dC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300",children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().toggleBlockquote().run(),className:`p-2 rounded transition ${k?.isActive("blockquote")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Citao",children:b.jsx(pC,{size:18})}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().setHorizontalRule().run(),className:"p-2 rounded bg-white text-gray-700 hover:bg-gray-200 transition",title:"Linha Horizontal",children:b.jsx(hC,{size:18})})]}),b.jsxs("div",{className:"flex gap-1 pr-2 border-r border-gray-300 items-center",children:[b.jsx("button",{type:"button",onClick:()=>{k.isActive("link")?O():v(!x)},className:`p-2 rounded transition ${k?.isActive("link")?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-200"}`,title:"Inserir Link",children:b.jsx(uC,{size:18})}),x&&b.jsxs("div",{className:"flex gap-1 items-center",children:[b.jsx("input",{type:"url",placeholder:"https://exemplo.com",value:S,onChange:U=>w(U.target.value),onKeyDown:U=>U.key==="Enter"&&E(),className:"px-2 py-1 text-sm border border-gray-300 rounded w-48"}),b.jsx("button",{type:"button",onClick:E,className:"px-2 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"OK"}),b.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-2 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:""})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:B,className:"p-2 rounded bg-white text-gray-700 hover:bg-gray-200 transition",title:"Inserir Tabela (3x3)",children:b.jsx(yC,{size:18})}),k?.isActive("table")&&b.jsxs(b.Fragment,{children:[b.jsx("button",{type:"button",onClick:()=>k.chain().focus().addColumnBefore().run(),className:"px-2 py-1 text-xs bg-white rounded hover:bg-gray-200",title:"Adicionar Coluna Antes",children:"+Col"}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().addRowBefore().run(),className:"px-2 py-1 text-xs bg-white rounded hover:bg-gray-200",title:"Adicionar Linha Antes",children:"+Row"}),b.jsx("button",{type:"button",onClick:()=>k.chain().focus().deleteTable().run(),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:"Excluir Tabela",children:"Del"})]})]})]}),b.jsx("div",{className:"border-t border-gray-300 pt-2",children:b.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded p-3",children:[b.jsx("p",{className:"text-xs font-semibold text-purple-900 mb-1",children:" Dica: Crie variveis dinmicas"}),b.jsxs("p",{className:"text-xs text-purple-700",children:["Digite ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{nome_da_variavel}}"})," no texto e ela ser automaticamente convertida em uma varivel destacada."]}),b.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:["Exemplos: ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{nome_cliente}}"}),", ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{data_contrato}}"}),", ",b.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{{valor_total}}"})]})]})})]}),b.jsx("div",{className:"border border-t-0 border-gray-300 rounded-b-md bg-white",children:b.jsx(cS,{editor:k})})]}),b.jsxs("div",{className:"flex justify-end space-x-4",children:[b.jsx("button",{type:"button",onClick:()=>t("/clientes-contratos"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:c,children:"Cancelar"}),b.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",disabled:c,children:c?"Salvando...":"Salvar Alteraes"})]})]})]})})}function _R(){const{user:t,logout:e}=Zi(),n=Ln(),[r,s]=A.useState([]),[o,c]=A.useState([]),[u,f]=A.useState(!0),[h,p]=A.useState(null),[g,x]=A.useState(null),[v,S]=A.useState(null),[w,k]=A.useState(!1);A.useEffect(()=>{E()},[]);const E=async()=>{try{f(!0),x(null);const[F,J]=await Promise.all([ll.listar(),Qs.listar()]);s(F),c(J)}catch(F){x("Erro ao carregar dados. Tente novamente."),console.error("Erro ao carregar dados:",F)}finally{f(!1)}},O=()=>{e(),n("/login")},B=F=>{p(h===F?null:F)},G=F=>!o||o.length===0?[]:o.filter(J=>J.cliente?.id===F),U=F=>F?new Date(F).toLocaleDateString("pt-BR"):"N/A",Y=F=>({ativo:{label:"Ativo",color:"bg-green-100 text-green-800"},inativo:{label:"Inativo",color:"bg-gray-100 text-gray-800"},pendente:{label:"Pendente",color:"bg-yellow-100 text-yellow-800"},cancelado:{label:"Cancelado",color:"bg-red-100 text-red-800"}})[F]||{label:F,color:"bg-gray-100 text-gray-800"},$=(F,J)=>{n("/editar-contrato",{state:{contrato:F,cliente:J}})},te=async()=>{if(v){k(!0);try{await Qs.deletar(v.id),c(o.filter(F=>F.id!==v.id)),S(null),x(null)}catch(F){x("Erro ao excluir contrato. Tente novamente."),console.error("Erro ao excluir contrato:",F)}finally{k(!1)}}};return b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("nav",{className:"bg-white shadow-lg",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between h-16",children:[b.jsx("div",{className:"flex items-center",children:b.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex-shrink-0 flex items-center hover:opacity-80 transition-opacity",children:[b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:b.jsx("span",{className:"text-white font-bold text-xl",children:"CM"})}),b.jsx("span",{className:"ml-3 text-xl font-bold text-gray-800",children:"ContraticManage"})]})}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsxs("div",{className:"text-right",children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:t?.name}),b.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t?.role})]}),b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:b.jsx("span",{className:"text-white font-semibold",children:t?.name?.charAt(0).toUpperCase()})})]}),b.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition duration-200",children:"Sair"})]})]})})}),b.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Clientes e Contratos"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Visualize todos os clientes cadastrados e seus respectivos contratos"})]}),b.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200",children:[b.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar"]})]}),g&&b.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.jsx("p",{className:"text-sm text-red-700",children:g})]})}),u?b.jsx("div",{className:"flex justify-center items-center py-12",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.length===0?b.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[b.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),b.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Nenhum cliente cadastrado"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece cadastrando um novo cliente no sistema."}),b.jsx("div",{className:"mt-6",children:b.jsxs("button",{onClick:()=>n("/cadastrar-cliente"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200",children:[b.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Cadastrar Cliente"]})})]}):b.jsx("div",{className:"space-y-4",children:r.map(F=>{const J=G(F.id),qe=h===F.id;return b.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[b.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>B(F.id),children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:b.jsx("span",{className:"text-white font-bold text-lg",children:F.razaoSocial?.charAt(0).toUpperCase()})}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("h3",{className:"text-lg font-bold text-gray-900 truncate",children:F.razaoSocial}),b.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[J.length," ",J.length===1?"contrato":"contratos"]})]}),b.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[b.jsxs("span",{className:"flex items-center",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"CNPJ: ",_E(F.cnpj)]}),F.email&&b.jsxs("span",{className:"flex items-center",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),F.email]})]})]})]}),b.jsx("div",{className:"ml-4",children:b.jsx("svg",{className:`w-6 h-6 text-gray-400 transition-transform duration-200 ${qe?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),qe&&b.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 p-6",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Informaes do Cliente"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Nome Fantasia"}),b.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.nomeFantasia||"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Telefone"}),b.jsx("p",{className:"text-sm font-medium text-gray-900",children:HE(F.telefone)||"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Responsvel"}),b.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.responsavel||"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Endereo"}),b.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.endereco?`${F.endereco}, ${F.numero||"S/N"}`:"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"CEP"}),b.jsx("p",{className:"text-sm font-medium text-gray-900",children:VE(F.cep)||"N/A"})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-xs text-gray-500",children:"Data de Cadastro"}),b.jsx("p",{className:"text-sm font-medium text-gray-900",children:U(F.dataCadastro)})]})]})]}),b.jsxs("div",{children:[b.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Contratos (",J.length,")"]}),J.length===0?b.jsxs("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-6 text-center",children:[b.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),b.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Nenhum contrato cadastrado para este cliente"}),b.jsxs("button",{onClick:Se=>{Se.stopPropagation(),n("/cadastrar-contrato",{state:{clienteSelecionado:F}})},className:"mt-3 inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition duration-200",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Contrato"]})]}):b.jsx("div",{className:"space-y-3",children:J.map(Se=>{const lt=Y(Se.status);return b.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-blue-300 transition-colors",children:b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[b.jsx("h5",{className:"font-semibold text-gray-900",children:Se.titulo}),b.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${lt.color}`,children:lt.label})]}),Se.descricao&&b.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Se.descricao})]}),b.jsxs("div",{className:"ml-4 flex flex-col space-y-2",children:[b.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),$(Se,F)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar contrato",children:b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),b.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),S(Se)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir contrato",children:b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},Se.id)})})]})]})]},F.id)})})]}),v&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[b.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:b.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),b.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900 text-center",children:"Confirmar Excluso"}),b.jsxs("p",{className:"mt-2 text-sm text-gray-600 text-center",children:["Tem certeza que deseja excluir o contrato ",b.jsxs("strong",{children:['"',v.titulo,'"']}),"? Esta ao no pode ser desfeita."]}),b.jsxs("div",{className:"mt-6 flex space-x-3",children:[b.jsx("button",{onClick:()=>S(null),disabled:w,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancelar"}),b.jsx("button",{onClick:te,disabled:w,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:w?"Excluindo...":"Excluir"})]})]})})]})}function Li({children:t}){const{user:e,checkAuth:n}=Zi();return A.useEffect(()=>{n()},[]),e?t:b.jsx(F1,{to:"/login",replace:!0})}function HR(){return b.jsx(AE,{children:b.jsx(yE,{children:b.jsxs(FN,{children:[b.jsx(Mn,{path:"/",element:b.jsx(F1,{to:"/login",replace:!0})}),b.jsx(Mn,{path:"/login",element:b.jsx(jE,{})}),b.jsx(Mn,{path:"/cliente/login",element:b.jsx(OE,{})}),b.jsx(Mn,{path:"/cliente/dashboard",element:b.jsx(Li,{children:b.jsx(RE,{})})}),b.jsx(Mn,{path:"/cliente/contrato/:id",element:b.jsx(Li,{children:b.jsx(LE,{})})}),b.jsx(Mn,{path:"/dashboard",element:b.jsx(Li,{children:b.jsx(DE,{})})}),b.jsx(Mn,{path:"/cadastrar-cliente",element:b.jsx(Li,{children:b.jsx($E,{})})}),b.jsx(Mn,{path:"/cadastrar-contrato",element:b.jsx(Li,{children:b.jsx(LR,{})})}),b.jsx(Mn,{path:"/clientes-contratos",element:b.jsx(Li,{children:b.jsx(_R,{})})}),b.jsx(Mn,{path:"/editar-contrato",element:b.jsx(Li,{children:b.jsx(BR,{})})})]})})})}rN.createRoot(document.getElementById("root")).render(b.jsx(A.StrictMode,{children:b.jsx(HR,{})}));
